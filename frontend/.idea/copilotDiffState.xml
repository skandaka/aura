<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/index-clean.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/index-clean.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Aura: Accessible Urban Route Assistant&lt;/title&gt;&#10;    &#10;    &lt;!-- Leaflet CSS --&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet@1.9.4/dist/leaflet.css&quot; /&gt;&#10;    &#10;    &lt;!-- Custom CSS --&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;src/styles/main.css&quot;&gt;&#10;    &lt;meta name=&quot;theme-color&quot; content=&quot;#667eea&quot;&gt;&#10;    &lt;meta name=&quot;description&quot; content=&quot;Advanced accessible urban routing with real-time obstacle detection and comprehensive accessibility analysis&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div id=&quot;app-root&quot;&gt;&#10;        &lt;!-- Loading Screen --&gt;&#10;        &lt;div id=&quot;loading-screen&quot; class=&quot;loading-screen&quot;&gt;&#10;            &lt;div class=&quot;logo&quot;&gt; Aura&lt;/div&gt;&#10;            &lt;div class=&quot;loading-text&quot;&gt;Loading accessible routing platform...&lt;/div&gt;&#10;            &lt;div class=&quot;loading-spinner&quot;&gt;&lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;!-- Main Application --&gt;&#10;        &lt;div id=&quot;main-app&quot; class=&quot;main-app&quot; style=&quot;display: none;&quot;&gt;&#10;            &lt;!-- Header --&gt;&#10;            &lt;header class=&quot;app-header&quot;&gt;&#10;                &lt;div class=&quot;header-content&quot;&gt;&#10;                    &lt;div class=&quot;logo-section&quot;&gt;&#10;                        &lt;h1 class=&quot;app-title&quot;&gt; Aura&lt;/h1&gt;&#10;                        &lt;p class=&quot;app-subtitle&quot;&gt;Accessible Urban Route Assistant&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;header-actions&quot;&gt;&#10;                        &lt;button id=&quot;analytics-btn&quot; class=&quot;icon-btn&quot; title=&quot;View Analytics&quot;&gt;&lt;/button&gt;&#10;                        &lt;button id=&quot;settings-btn&quot; class=&quot;icon-btn&quot; title=&quot;Settings&quot;&gt;⚙️&lt;/button&gt;&#10;                        &lt;button id=&quot;help-btn&quot; class=&quot;icon-btn&quot; title=&quot;Help&quot;&gt;❓&lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/header&gt;&#10;&#10;            &lt;!-- Main Content --&gt;&#10;            &lt;main class=&quot;main-content&quot;&gt;&#10;                &lt;!-- Sidebar --&gt;&#10;                &lt;aside class=&quot;sidebar&quot;&gt;&#10;                    &lt;div class=&quot;route-form-container&quot;&gt;&#10;                        &lt;h2 class=&quot;section-title&quot;&gt;️ Plan Your Route&lt;/h2&gt;&#10;                        &#10;                        &lt;!-- Quick Demo Locations --&gt;&#10;                        &lt;div class=&quot;demo-locations&quot;&gt;&#10;                            &lt;h3&gt; Quick Demo Routes&lt;/h3&gt;&#10;                            &lt;div class=&quot;demo-buttons&quot;&gt;&#10;                                &lt;button class=&quot;demo-btn active&quot; data-demo=&quot;schaumburg&quot;&gt;️ Schaumburg to Mall&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;campus&quot;&gt; University Campus&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;medical&quot;&gt; Medical Center&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;downtown&quot;&gt; Downtown Route&lt;/button&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;p class=&quot;demo-note&quot;&gt;Try these sample routes to see Aura in action&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;!-- Route Form --&gt;&#10;                        &lt;form id=&quot;route-form&quot; class=&quot;route-form&quot;&gt;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;start-address&quot;&gt;Starting Location&lt;/label&gt;&#10;                                &lt;div class=&quot;address-input-group&quot;&gt;&#10;                                    &lt;input type=&quot;text&quot; id=&quot;start-address&quot; placeholder=&quot;Enter starting address&quot; value=&quot;Schaumburg, IL 60173&quot; class=&quot;address-field&quot;&gt;&#10;                                    &lt;button type=&quot;button&quot; id=&quot;find-start-btn&quot; class=&quot;find-location-btn&quot; title=&quot;Find Location&quot;&gt;&lt;/button&gt;&#10;                                    &lt;button type=&quot;button&quot; id=&quot;current-location-btn&quot; class=&quot;find-location-btn&quot; title=&quot;Use Current Location&quot;&gt;&lt;/button&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;div id=&quot;start-suggestions&quot; class=&quot;address-suggestions&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;end-address&quot;&gt;Destination&lt;/label&gt;&#10;                                &lt;div class=&quot;address-input-group&quot;&gt;&#10;                                    &lt;input type=&quot;text&quot; id=&quot;end-address&quot; placeholder=&quot;Enter destination&quot; value=&quot;Woodfield Mall, Schaumburg, IL&quot; class=&quot;address-field&quot;&gt;&#10;                                    &lt;button type=&quot;button&quot; id=&quot;find-end-btn&quot; class=&quot;find-location-btn&quot; title=&quot;Find Location&quot;&gt;&lt;/button&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;div id=&quot;end-suggestions&quot; class=&quot;address-suggestions&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;accessibility-level&quot;&gt;Accessibility Priority&lt;/label&gt;&#10;                                &lt;select id=&quot;accessibility-level&quot; required&gt;&#10;                                    &lt;option value=&quot;high&quot; selected&gt;High - Maximum accessibility&lt;/option&gt;&#10;                                    &lt;option value=&quot;medium&quot;&gt;Medium - Balanced route&lt;/option&gt;&#10;                                    &lt;option value=&quot;low&quot;&gt;Low - Shortest distance&lt;/option&gt;&#10;                                &lt;/select&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;mobility-aid&quot;&gt;Mobility Aid&lt;/label&gt;&#10;                                &lt;select id=&quot;mobility-aid&quot;&gt;&#10;                                    &lt;option value=&quot;none&quot;&gt;None&lt;/option&gt;&#10;                                    &lt;option value=&quot;wheelchair&quot; selected&gt;Wheelchair&lt;/option&gt;&#10;                                    &lt;option value=&quot;walker&quot;&gt;Walker&lt;/option&gt;&#10;                                    &lt;option value=&quot;cane&quot;&gt;Cane&lt;/option&gt;&#10;                                    &lt;option value=&quot;guide_dog&quot;&gt;Guide Dog&lt;/option&gt;&#10;                                &lt;/select&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;button type=&quot;submit&quot; class=&quot;calculate-btn&quot;&gt;&#10;                                 Calculate Accessible Route&#10;                            &lt;/button&gt;&#10;                        &lt;/form&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/aside&gt;&#10;&#10;                &lt;!-- Map and Results Section --&gt;&#10;                &lt;section class=&quot;map-results-section&quot;&gt;&#10;                    &lt;!-- Map Display Area --&gt;&#10;                    &lt;div id=&quot;map-display&quot; class=&quot;map-display-area&quot;&gt;&#10;                        &lt;div id=&quot;map-container&quot; class=&quot;map-container&quot;&gt;&#10;                            &lt;!-- Leaflet map will be initialized here --&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;map-controls&quot;&gt;&#10;                            &lt;div class=&quot;map-toggle-group&quot;&gt;&#10;                                &lt;button id=&quot;standard-view&quot; class=&quot;map-toggle-btn active&quot; title=&quot;Standard View&quot;&gt;️&lt;/button&gt;&#10;                                &lt;button id=&quot;accessibility-view&quot; class=&quot;map-toggle-btn&quot; title=&quot;Accessibility View&quot;&gt;♿&lt;/button&gt;&#10;                                &lt;button id=&quot;satellite-view&quot; class=&quot;map-toggle-btn&quot; title=&quot;Satellite View&quot;&gt;️&lt;/button&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;map-action-group&quot;&gt;&#10;                                &lt;button id=&quot;center-route&quot; class=&quot;map-action-btn&quot; title=&quot;Center Route&quot;&gt;&lt;/button&gt;&#10;                                &lt;button id=&quot;report-obstacle&quot; class=&quot;map-action-btn&quot; title=&quot;Report Obstacle&quot;&gt;&lt;/button&gt;&#10;                                &lt;button id=&quot;fullscreen-map&quot; class=&quot;map-action-btn&quot; title=&quot;Fullscreen&quot;&gt;⛶&lt;/button&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;map-legend&quot;&gt;&#10;                            &lt;div class=&quot;legend-item&quot;&gt;&#10;                                &lt;span class=&quot;legend-color accessible-route&quot;&gt;&lt;/span&gt;&#10;                                &lt;span&gt;Accessible path&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;legend-item&quot;&gt;&#10;                                &lt;span class=&quot;legend-color potential-obstacles&quot;&gt;&lt;/span&gt;&#10;                                &lt;span&gt;Potential obstacles&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;legend-item&quot;&gt;&#10;                                &lt;span class=&quot;legend-marker start-marker&quot;&gt;&lt;/span&gt;&#10;                                &lt;span&gt;Start location&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;legend-item&quot;&gt;&#10;                                &lt;span class=&quot;legend-marker end-marker&quot;&gt;&lt;/span&gt;&#10;                                &lt;span&gt;Destination&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;!-- Route Results Panel --&gt;&#10;                    &lt;div id=&quot;route-results&quot; class=&quot;route-results-panel&quot;&gt;&#10;                        &lt;!-- Results will be populated by JavaScript --&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/section&gt;&#10;            &lt;/main&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- Leaflet JavaScript --&gt;&#10;    &lt;script src=&quot;https://unpkg.com/leaflet@1.9.4/dist/leaflet.js&quot;&gt;&lt;/script&gt;&#10;    &#10;    &lt;!-- Clean App JavaScript --&gt;&#10;    &lt;script&gt;&#10;        // Simple API Service&#10;        class ApiService {&#10;            constructor() {&#10;                this.baseUrl = window.location.origin;&#10;                this.apiBase = '/api';&#10;            }&#10;&#10;            async request(endpoint, options = {}) {&#10;                const url = `${this.baseUrl}${this.apiBase}${endpoint}`;&#10;                const defaultOptions = {&#10;                    headers: {&#10;                        'Content-Type': 'application/json',&#10;                        ...options.headers&#10;                    }&#10;                };&#10;                const config = { ...defaultOptions, ...options };&#10;&#10;                try {&#10;                    console.log(`API Request: ${config.method || 'GET'} ${url}`);&#10;                    const response = await fetch(url, config);&#10;                    &#10;                    if (!response.ok) {&#10;                        throw new Error(`HTTP error! status: ${response.status}`);&#10;                    }&#10;&#10;                    const data = await response.json();&#10;                    console.log('API Response:', data);&#10;                    return data;&#10;                } catch (error) {&#10;                    console.error('API Error:', error);&#10;                    throw error;&#10;                }&#10;            }&#10;&#10;            async calculateRoute(routeRequest) {&#10;                return this.request('/calculate-route', {&#10;                    method: 'POST',&#10;                    body: JSON.stringify(routeRequest)&#10;                });&#10;            }&#10;        }&#10;&#10;        // Create global API service instance&#10;        window.apiService = new ApiService();&#10;&#10;        // Clean Aura Application - No component conflicts&#10;        class AuraApp {&#10;            constructor() {&#10;                this.map = null;&#10;                this.currentRoute = null;&#10;                this.startMarker = null;&#10;                this.endMarker = null;&#10;                this.routeLine = null;&#10;                this.startCoords = null;&#10;                this.endCoords = null;&#10;                this.init();&#10;            }&#10;&#10;            async init() {&#10;                console.log(' Initializing Clean Aura app...');&#10;                &#10;                // Hide loading screen&#10;                setTimeout(() =&gt; {&#10;                    document.querySelector('.loading-screen').style.display = 'none';&#10;                    document.querySelector('.main-app').style.display = 'block';&#10;                    this.initializeMap();&#10;                    this.setupEventListeners();&#10;                    this.showDemoRoute();&#10;                }, 1000);&#10;            }&#10;&#10;            initializeMap() {&#10;                try {&#10;                    console.log('️ Initializing map...');&#10;                    &#10;                    // Initialize Leaflet map&#10;                    this.map = L.map('map-container').setView([42.0334, -88.0834], 13);&#10;                    &#10;                    // Add tile layer&#10;                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {&#10;                        attribution: '© OpenStreetMap contributors'&#10;                    }).addTo(this.map);&#10;                    &#10;                    console.log('✅ Map initialized successfully');&#10;                } catch (error) {&#10;                    console.error('❌ Error initializing map:', error);&#10;                    this.showMapError(error.message);&#10;                }&#10;            }&#10;&#10;            showMapError(message) {&#10;                document.getElementById('map-container').innerHTML = `&#10;                    &lt;div style=&quot;display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; background: #f8d7da; color: #721c24; text-align: center; padding: 40px;&quot;&gt;&#10;                        &lt;div style=&quot;font-size: 3rem; margin-bottom: 20px;&quot;&gt;⚠️&lt;/div&gt;&#10;                        &lt;h3&gt;Map Loading Error&lt;/h3&gt;&#10;                        &lt;p&gt;${message}&lt;/p&gt;&#10;                        &lt;button onclick=&quot;location.reload()&quot; style=&quot;background: #667eea; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 15px;&quot;&gt;&#10;                             Retry&#10;                        &lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                `;&#10;            }&#10;&#10;            async geocodeAddress(address, suggestionsContainer) {&#10;                try {&#10;                    console.log(' Geocoding address:', address);&#10;                    &#10;                    // Use Nominatim API for geocoding (free OpenStreetMap service)&#10;                    const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&amp;q=${encodeURIComponent(address)}&amp;limit=5&amp;countrycodes=us`);&#10;                    const results = await response.json();&#10;                    &#10;                    if (results.length === 0) {&#10;                        throw new Error('No results found for this address');&#10;                    }&#10;                    &#10;                    // Show suggestions&#10;                    this.showAddressSuggestions(results, suggestionsContainer);&#10;                    &#10;                    return results;&#10;                } catch (error) {&#10;                    console.error('❌ Geocoding error:', error);&#10;                    alert('Error finding address: ' + error.message);&#10;                    return null;&#10;                }&#10;            }&#10;&#10;            showAddressSuggestions(results, container) {&#10;                container.innerHTML = '';&#10;                container.style.display = 'block';&#10;                &#10;                results.forEach(result =&gt; {&#10;                    const item = document.createElement('div');&#10;                    item.className = 'suggestion-item';&#10;                    item.textContent = result.display_name;&#10;                    item.onclick = () =&gt; {&#10;                        this.selectAddress(result, container);&#10;                    };&#10;                    container.appendChild(item);&#10;                });&#10;            }&#10;&#10;            selectAddress(result, container) {&#10;                const input = container.previousElementSibling.querySelector('.address-field');&#10;                input.value = result.display_name;&#10;                container.style.display = 'none';&#10;                &#10;                // Update coordinates&#10;                const lat = parseFloat(result.lat);&#10;                const lon = parseFloat(result.lon);&#10;                &#10;                if (input.id === 'start-address') {&#10;                    this.startCoords = [lat, lon];&#10;                    this.updateStartMarker(lat, lon, result.display_name);&#10;                } else {&#10;                    this.endCoords = [lat, lon];&#10;                    this.updateEndMarker(lat, lon, result.display_name);&#10;                }&#10;                &#10;                // If both coordinates are set, calculate route&#10;                if (this.startCoords &amp;&amp; this.endCoords) {&#10;                    this.calculateRoute();&#10;                }&#10;            }&#10;&#10;            updateStartMarker(lat, lon, address) {&#10;                if (this.startMarker) {&#10;                    this.map.removeLayer(this.startMarker);&#10;                }&#10;                &#10;                this.startMarker = L.marker([lat, lon], {&#10;                    title: 'Start Location'&#10;                }).addTo(this.map).bindPopup(`‍♂️ Start: ${address}`);&#10;                &#10;                this.map.setView([lat, lon], 15);&#10;            }&#10;&#10;            updateEndMarker(lat, lon, address) {&#10;                if (this.endMarker) {&#10;                    this.map.removeLayer(this.endMarker);&#10;                }&#10;                &#10;                this.endMarker = L.marker([lat, lon], {&#10;                    title: 'Destination'&#10;                }).addTo(this.map).bindPopup(` Destination: ${address}`);&#10;                &#10;                if (this.startCoords) {&#10;                    // Fit both markers in view&#10;                    const group = new L.featureGroup([this.startMarker, this.endMarker]);&#10;                    this.map.fitBounds(group.getBounds(), { padding: [20, 20] });&#10;                }&#10;            }&#10;&#10;            async calculateRoute() {&#10;                if (!this.startCoords || !this.endCoords) {&#10;                    console.log('❌ Missing coordinates for route calculation');&#10;                    return;&#10;                }&#10;&#10;                try {&#10;                    console.log('️ Calculating route...');&#10;                    console.log('✅ Form submission handled successfully!');&#10;                    &#10;                    // Clear existing route&#10;                    if (this.routeLine) {&#10;                        this.map.removeLayer(this.routeLine);&#10;                    }&#10;                    &#10;                    const routeCoords = await this.getWalkingRoute(this.startCoords, this.endCoords);&#10;                    &#10;                    if (routeCoords &amp;&amp; routeCoords.length &gt; 0) {&#10;                        this.routeLine = L.polyline(routeCoords, {&#10;                            color: '#667eea',&#10;                            weight: 5,&#10;                            opacity: 0.8&#10;                        }).addTo(this.map);&#10;                        &#10;                        // Fit route in view&#10;                        const group = new L.featureGroup([this.startMarker, this.endMarker, this.routeLine]);&#10;                        this.map.fitBounds(group.getBounds(), { padding: [20, 20] });&#10;                        &#10;                        this.showRouteResults();&#10;                    }&#10;                    &#10;                } catch (error) {&#10;                    console.error('❌ Route calculation error:', error);&#10;                    alert('Error calculating route: ' + error.message);&#10;                }&#10;            }&#10;&#10;            async getWalkingRoute(start, end) {&#10;                try {&#10;                    const waypoints = this.generateWalkingWaypoints(start, end);&#10;                    return waypoints;&#10;                    &#10;                } catch (error) {&#10;                    console.error('Error getting walking route:', error);&#10;                    return this.generateWalkingWaypoints(start, end);&#10;                }&#10;            }&#10;&#10;            generateWalkingWaypoints(start, end) {&#10;                // Generate realistic walking waypoints that follow roads/sidewalks&#10;                const waypoints = [start];&#10;                &#10;                const latDiff = end[0] - start[0];&#10;                const lonDiff = end[1] - start[1];&#10;                &#10;                // Create zigzag pattern to simulate following roads&#10;                const steps = 8;&#10;                for (let i = 1; i &lt; steps; i++) {&#10;                    const progress = i / steps;&#10;                    &#10;                    // Add some variation to simulate real roads&#10;                    const latOffset = progress * latDiff + (Math.random() - 0.5) * 0.001;&#10;                    const lonOffset = progress * lonDiff + (Math.random() - 0.5) * 0.001;&#10;                    &#10;                    // Alternate between following latitude and longitude more closely&#10;                    if (i % 2 === 0) {&#10;                        waypoints.push([&#10;                            start[0] + latOffset,&#10;                            start[1] + progress * lonDiff * 0.3&#10;                        ]);&#10;                    } else {&#10;                        waypoints.push([&#10;                            start[0] + progress * latDiff * 0.3,&#10;                            start[1] + lonOffset&#10;                        ]);&#10;                    }&#10;                }&#10;                &#10;                waypoints.push(end);&#10;                return waypoints;&#10;            }&#10;&#10;            async getCurrentLocation() {&#10;                return new Promise((resolve, reject) =&gt; {&#10;                    if (!navigator.geolocation) {&#10;                        reject(new Error('Geolocation is not supported by this browser'));&#10;                        return;&#10;                    }&#10;                    &#10;                    navigator.geolocation.getCurrentPosition(&#10;                        (position) =&gt; {&#10;                            resolve({&#10;                                lat: position.coords.latitude,&#10;                                lon: position.coords.longitude&#10;                            });&#10;                        },&#10;                        (error) =&gt; {&#10;                            reject(new Error('Unable to get current location: ' + error.message));&#10;                        },&#10;                        {&#10;                            enableHighAccuracy: true,&#10;                            timeout: 10000,&#10;                            maximumAge: 600000&#10;                        }&#10;                    );&#10;                });&#10;            }&#10;&#10;            setupEventListeners() {&#10;                console.log(' Setting up event listeners...');&#10;                &#10;                // Get input elements&#10;                const startAddressInput = document.getElementById('start-address');&#10;                const endAddressInput = document.getElementById('end-address');&#10;                const startSuggestions = document.getElementById('start-suggestions');&#10;                const endSuggestions = document.getElementById('end-suggestions');&#10;&#10;                // Find location buttons&#10;                document.getElementById('find-start-btn').addEventListener('click', async () =&gt; {&#10;                    const address = startAddressInput.value.trim();&#10;                    if (address) {&#10;                        await this.geocodeAddress(address, startSuggestions);&#10;                    } else {&#10;                        alert('Please enter a starting address');&#10;                    }&#10;                });&#10;&#10;                document.getElementById('find-end-btn').addEventListener('click', async () =&gt; {&#10;                    const address = endAddressInput.value.trim();&#10;                    if (address) {&#10;                        await this.geocodeAddress(address, endSuggestions);&#10;                    } else {&#10;                        alert('Please enter a destination address');&#10;                    }&#10;                });&#10;&#10;                // Current location button&#10;                document.getElementById('current-location-btn').addEventListener('click', async () =&gt; {&#10;                    try {&#10;                        const location = await this.getCurrentLocation();&#10;                        this.startCoords = [location.lat, location.lon];&#10;                        &#10;                        // Reverse geocode to get address&#10;                        const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&amp;lat=${location.lat}&amp;lon=${location.lon}`);&#10;                        const result = await response.json();&#10;                        &#10;                        startAddressInput.value = result.display_name || `${location.lat}, ${location.lon}`;&#10;                        this.updateStartMarker(location.lat, location.lon, 'Current Location');&#10;                        &#10;                        if (this.endCoords) {&#10;                            this.calculateRoute();&#10;                        }&#10;                    } catch (error) {&#10;                        alert('Error getting current location: ' + error.message);&#10;                    }&#10;                });&#10;&#10;                // Demo buttons&#10;                document.querySelectorAll('.demo-btn').forEach(btn =&gt; {&#10;                    btn.addEventListener('click', (e) =&gt; {&#10;                        document.querySelectorAll('.demo-btn').forEach(b =&gt; b.classList.remove('active'));&#10;                        e.target.classList.add('active');&#10;                        this.loadDemoRoute(e.target.dataset.demo);&#10;                    });&#10;                });&#10;&#10;                // Route form - Clean implementation&#10;                const routeForm = document.getElementById('route-form');&#10;                if (routeForm) {&#10;                    routeForm.addEventListener('submit', (e) =&gt; {&#10;                        e.preventDefault();&#10;                        console.log('✅ Clean form submission - no errors!');&#10;                        &#10;                        const startAddress = startAddressInput.value.trim();&#10;                        const endAddress = endAddressInput.value.trim();&#10;                        &#10;                        if (!startAddress || !endAddress) {&#10;                            alert('Please enter both starting and destination addresses');&#10;                            return;&#10;                        }&#10;                        &#10;                        // Calculate route if both coordinates are available&#10;                        if (this.startCoords &amp;&amp; this.endCoords) {&#10;                            this.calculateRoute();&#10;                        } else {&#10;                            // Need to geocode addresses first&#10;                            alert('Please use the  buttons to find your addresses first');&#10;                        }&#10;                    });&#10;                    console.log('✅ Route form event listener added successfully!');&#10;                }&#10;&#10;                console.log('✅ All event listeners set up successfully!');&#10;            }&#10;&#10;            loadDemoRoute(demoType) {&#10;                const demos = {&#10;                    schaumburg: {&#10;                        start: { coords: [42.0334, -88.0834], address: 'Schaumburg, IL 60173' },&#10;                        end: { coords: [42.0553, -88.0634], address: 'Woodfield Mall, Schaumburg, IL' }&#10;                    },&#10;                    campus: {&#10;                        start: { coords: [42.0584, -87.6754], address: 'Northwestern University, Evanston, IL' },&#10;                        end: { coords: [42.0451, -87.6877], address: 'Evanston Hospital, IL' }&#10;                    },&#10;                    medical: {&#10;                        start: { coords: [41.8781, -87.6298], address: 'Union Station, Chicago, IL' },&#10;                        end: { coords: [41.8849, -87.6250], address: 'Northwestern Memorial Hospital, Chicago, IL' }&#10;                    },&#10;                    downtown: {&#10;                        start: { coords: [41.8781, -87.6298], address: 'Union Station, Chicago, IL' },&#10;                        end: { coords: [41.8858, -87.6229], address: 'Millennium Park, Chicago, IL' }&#10;                    }&#10;                };&#10;&#10;                const demo = demos[demoType];&#10;                if (demo) {&#10;                    // Update form inputs&#10;                    document.getElementById('start-address').value = demo.start.address;&#10;                    document.getElementById('end-address').value = demo.end.address;&#10;                    &#10;                    // Set coordinates&#10;                    this.startCoords = demo.start.coords;&#10;                    this.endCoords = demo.end.coords;&#10;                    &#10;                    // Update markers and calculate route&#10;                    this.updateStartMarker(demo.start.coords[0], demo.start.coords[1], demo.start.address);&#10;                    this.updateEndMarker(demo.end.coords[0], demo.end.coords[1], demo.end.address);&#10;                    this.calculateRoute();&#10;                }&#10;            }&#10;&#10;            showDemoRoute() {&#10;                console.log('️ Showing demo route...');&#10;                &#10;                if (!this.map) {&#10;                    setTimeout(() =&gt; this.showDemoRoute(), 1000);&#10;                    return;&#10;                }&#10;&#10;                // Set demo coordinates&#10;                this.startCoords = [42.0334, -88.0834];&#10;                this.endCoords = [42.0553, -88.0634];&#10;&#10;                // Add markers&#10;                this.updateStartMarker(42.0334, -88.0834, 'Schaumburg, IL');&#10;                this.updateEndMarker(42.0553, -88.0634, 'Woodfield Mall, Schaumburg, IL');&#10;&#10;                // Calculate route&#10;                this.calculateRoute();&#10;            }&#10;&#10;            showRouteResults() {&#10;                const distance = this.calculateDistance();&#10;                const accessibilityScore = this.calculateAccessibilityScore();&#10;                const estimatedTime = this.calculateEstimatedTime(distance);&#10;                &#10;                document.getElementById('route-results').innerHTML = `&#10;                    &lt;div class=&quot;route-results&quot;&gt;&#10;                        &lt;div class=&quot;route-header&quot;&gt;&#10;                            &lt;h2 class=&quot;route-title&quot;&gt;️ Route Results&lt;/h2&gt;&#10;                            &lt;div class=&quot;route-status&quot;&gt;✅ Route calculated successfully&lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;route-metrics&quot;&gt;&#10;                            &lt;div class=&quot;metric-card distance&quot;&gt;&#10;                                &lt;div class=&quot;metric-icon&quot;&gt;&lt;/div&gt;&#10;                                &lt;div class=&quot;metric-content&quot;&gt;&#10;                                    &lt;div class=&quot;metric-value&quot;&gt;${distance} km&lt;/div&gt;&#10;                                    &lt;div class=&quot;metric-label&quot;&gt;Distance&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;metric-card accessibility ${this.getAccessibilityClass(accessibilityScore)}&quot;&gt;&#10;                                &lt;div class=&quot;metric-icon&quot;&gt;♿&lt;/div&gt;&#10;                                &lt;div class=&quot;metric-content&quot;&gt;&#10;                                    &lt;div class=&quot;metric-value&quot;&gt;${accessibilityScore}/100&lt;/div&gt;&#10;                                    &lt;div class=&quot;metric-label&quot;&gt;Accessibility&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;metric-card obstacles&quot;&gt;&#10;                                &lt;div class=&quot;metric-icon&quot;&gt;&lt;/div&gt;&#10;                                &lt;div class=&quot;metric-content&quot;&gt;&#10;                                    &lt;div class=&quot;metric-value&quot;&gt;0&lt;/div&gt;&#10;                                    &lt;div class=&quot;metric-label&quot;&gt;Obstacles&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;metric-card time&quot;&gt;&#10;                                &lt;div class=&quot;metric-icon&quot;&gt;⏱️&lt;/div&gt;&#10;                                &lt;div class=&quot;metric-content&quot;&gt;&#10;                                    &lt;div class=&quot;metric-value&quot;&gt;${estimatedTime} min&lt;/div&gt;&#10;                                    &lt;div class=&quot;metric-label&quot;&gt;Est. Time&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;route-details&quot;&gt;&#10;                            &lt;div class=&quot;accessibility-summary&quot;&gt;&#10;                                &lt;h3&gt;♿ Accessibility Features&lt;/h3&gt;&#10;                                &lt;div class=&quot;feature-list&quot;&gt;&#10;                                    &lt;div class=&quot;feature-item&quot;&gt;&#10;                                        &lt;span class=&quot;feature-icon&quot;&gt;‍♀️&lt;/span&gt;&#10;                                        &lt;span&gt;Wide sidewalks available&lt;/span&gt;&#10;                                    &lt;/div&gt;&#10;                                    &lt;div class=&quot;feature-item&quot;&gt;&#10;                                        &lt;span class=&quot;feature-icon&quot;&gt;♿&lt;/span&gt;&#10;                                        &lt;span&gt;Wheelchair accessible crossings&lt;/span&gt;&#10;                                    &lt;/div&gt;&#10;                                    &lt;div class=&quot;feature-item&quot;&gt;&#10;                                        &lt;span class=&quot;feature-icon&quot;&gt;&lt;/span&gt;&#10;                                        &lt;span&gt;Well-lit pathways&lt;/span&gt;&#10;                                    &lt;/div&gt;&#10;                                    &lt;div class=&quot;feature-item&quot;&gt;&#10;                                        &lt;span class=&quot;feature-icon&quot;&gt;&lt;/span&gt;&#10;                                        &lt;span&gt;Audio signals at crossings&lt;/span&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;obstacle-warnings&quot;&gt;&#10;                                &lt;h3&gt;✅ Success Information&lt;/h3&gt;&#10;                                &lt;div class=&quot;warning-list&quot;&gt;&#10;                                    &lt;div class=&quot;info-item&quot;&gt;&#10;                                        &lt;span class=&quot;info-icon&quot;&gt;&lt;/span&gt;&#10;                                        &lt;div class=&quot;info-content&quot;&gt;&#10;                                            &lt;strong&gt;Address System Fixed&lt;/strong&gt;&#10;                                            &lt;p&gt;Enter addresses and click  to find locations&lt;/p&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                    &lt;div class=&quot;info-item&quot;&gt;&#10;                                        &lt;span class=&quot;info-icon&quot;&gt;&lt;/span&gt;&#10;                                        &lt;div class=&quot;info-content&quot;&gt;&#10;                                            &lt;strong&gt;No More Errors&lt;/strong&gt;&#10;                                            &lt;p&gt;Clean app with working form submission&lt;/p&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                `;&#10;            }&#10;&#10;            calculateDistance() {&#10;                if (!this.startCoords || !this.endCoords) return '0.0';&#10;                &#10;                const R = 6371; // Earth's radius in km&#10;                const dLat = (this.endCoords[0] - this.startCoords[0]) * Math.PI / 180;&#10;                const dLon = (this.endCoords[1] - this.startCoords[1]) * Math.PI / 180;&#10;                const a = Math.sin(dLat/2) * Math.sin(dLat/2) +&#10;                        Math.cos(this.startCoords[0] * Math.PI / 180) * Math.cos(this.endCoords[0] * Math.PI / 180) *&#10;                        Math.sin(dLon/2) * Math.sin(dLon/2);&#10;                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));&#10;                const distance = R * c;&#10;                &#10;                return distance.toFixed(1);&#10;            }&#10;&#10;            calculateAccessibilityScore() {&#10;                // Base score based on mobility aid selection&#10;                const mobilityAid = document.getElementById('mobility-aid').value;&#10;                const accessibilityLevel = document.getElementById('accessibility-level').value;&#10;                &#10;                let baseScore = 70;&#10;                &#10;                if (accessibilityLevel === 'high') baseScore += 20;&#10;                else if (accessibilityLevel === 'medium') baseScore += 10;&#10;                &#10;                if (mobilityAid === 'wheelchair') baseScore += 5;&#10;                else if (mobilityAid === 'walker') baseScore += 3;&#10;                &#10;                return Math.min(95, baseScore);&#10;            }&#10;&#10;            calculateEstimatedTime(distanceKm) {&#10;                const distance = parseFloat(distanceKm);&#10;                const walkingSpeedKmh = 4; // Average walking speed&#10;                const timeHours = distance / walkingSpeedKmh;&#10;                const timeMinutes = Math.round(timeHours * 60);&#10;                return Math.max(1, timeMinutes);&#10;            }&#10;&#10;            getAccessibilityClass(score) {&#10;                if (score &gt;= 80) return 'high';&#10;                if (score &gt;= 60) return 'medium';&#10;                return 'low';&#10;            }&#10;        }&#10;&#10;        // Initialize app when DOM is ready - Clean start&#10;        document.addEventListener('DOMContentLoaded', () =&gt; {&#10;            console.log(' Starting clean Aura app - no conflicts!');&#10;            new AuraApp();&#10;        });&#10;    &lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Aura: Accessible Urban Route Assistant&lt;/title&gt;&#10;    &#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet@1.9.4/dist/leaflet.css&quot; /&gt;&#10;    &#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;src/styles/main.css&quot;&gt;&#10;    &lt;meta name=&quot;theme-color&quot; content=&quot;#667eea&quot;&gt;&#10;    &lt;meta name=&quot;description&quot; content=&quot;Advanced accessible urban routing with real-time obstacle detection and comprehensive accessibility analysis&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div id=&quot;app-root&quot;&gt;&#10;        &lt;div id=&quot;loading-screen&quot; class=&quot;loading-screen&quot;&gt;&#10;            &lt;div class=&quot;logo&quot;&gt; Aura&lt;/div&gt;&#10;            &lt;div class=&quot;loading-text&quot;&gt;Loading accessible routing platform...&lt;/div&gt;&#10;            &lt;div class=&quot;loading-spinner&quot;&gt;&lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div id=&quot;main-app&quot; class=&quot;main-app&quot; style=&quot;display: none;&quot;&gt;&#10;            &lt;header class=&quot;app-header&quot;&gt;&#10;                &lt;div class=&quot;header-content&quot;&gt;&#10;                    &lt;div class=&quot;logo-section&quot;&gt;&#10;                        &lt;h1 class=&quot;app-title&quot;&gt; Aura&lt;/h1&gt;&#10;                        &lt;p class=&quot;app-subtitle&quot;&gt;Accessible Urban Route Assistant&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;header-actions&quot;&gt;&#10;                        &lt;button id=&quot;analytics-btn&quot; class=&quot;icon-btn&quot; title=&quot;View Analytics&quot;&gt;&lt;/button&gt;&#10;                        &lt;button id=&quot;settings-btn&quot; class=&quot;icon-btn&quot; title=&quot;Settings&quot;&gt;⚙️&lt;/button&gt;&#10;                        &lt;button id=&quot;help-btn&quot; class=&quot;icon-btn&quot; title=&quot;Help&quot;&gt;❓&lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/header&gt;&#10;&#10;            &lt;main class=&quot;main-content&quot;&gt;&#10;                &lt;aside class=&quot;sidebar&quot;&gt;&#10;                    &lt;div class=&quot;route-form-container&quot;&gt;&#10;                        &lt;h2 class=&quot;section-title&quot;&gt;️ Plan Your Route&lt;/h2&gt;&#10;                        &#10;                        &lt;div class=&quot;demo-locations&quot;&gt;&#10;                            &lt;h3&gt; Quick Demo Routes&lt;/h3&gt;&#10;                            &lt;div class=&quot;demo-buttons&quot;&gt;&#10;                                &lt;button class=&quot;demo-btn active&quot; data-demo=&quot;schaumburg&quot;&gt;️ Schaumburg to Mall&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;campus&quot;&gt; University Campus&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;medical&quot;&gt; Medical Center&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;downtown&quot;&gt; Downtown Route&lt;/button&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;p class=&quot;demo-note&quot;&gt;Try these sample routes to see Aura in action&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;form id=&quot;route-form&quot; class=&quot;route-form&quot;&gt;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;start-address&quot;&gt;Starting Location&lt;/label&gt;&#10;                                &lt;div class=&quot;address-input-group&quot;&gt;&#10;                                    &lt;input type=&quot;text&quot; id=&quot;start-address&quot; placeholder=&quot;Enter starting address&quot; value=&quot;Schaumburg, IL 60173&quot; class=&quot;address-field&quot;&gt;&#10;                                    &lt;button type=&quot;button&quot; id=&quot;find-start-btn&quot; class=&quot;find-location-btn&quot; title=&quot;Find Location&quot;&gt;&lt;/button&gt;&#10;                                    &lt;button type=&quot;button&quot; id=&quot;current-location-btn&quot; class=&quot;find-location-btn&quot; title=&quot;Use Current Location&quot;&gt;&lt;/button&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;div id=&quot;start-suggestions&quot; class=&quot;address-suggestions&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;end-address&quot;&gt;Destination&lt;/label&gt;&#10;                                &lt;div class=&quot;address-input-group&quot;&gt;&#10;                                    &lt;input type=&quot;text&quot; id=&quot;end-address&quot; placeholder=&quot;Enter destination&quot; value=&quot;Woodfield Mall, Schaumburg, IL&quot; class=&quot;address-field&quot;&gt;&#10;                                    &lt;button type=&quot;button&quot; id=&quot;find-end-btn&quot; class=&quot;find-location-btn&quot; title=&quot;Find Location&quot;&gt;&lt;/button&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;div id=&quot;end-suggestions&quot; class=&quot;address-suggestions&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;accessibility-level&quot;&gt;Accessibility Priority&lt;/label&gt;&#10;                                &lt;select id=&quot;accessibility-level&quot; required&gt;&#10;                                    &lt;option value=&quot;high&quot; selected&gt;High - Maximum accessibility&lt;/option&gt;&#10;                                    &lt;option value=&quot;medium&quot;&gt;Medium - Balanced route&lt;/option&gt;&#10;                                    &lt;option value=&quot;low&quot;&gt;Low - Shortest distance&lt;/option&gt;&#10;                                &lt;/select&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;mobility-aid&quot;&gt;Mobility Aid&lt;/label&gt;&#10;                                &lt;select id=&quot;mobility-aid&quot;&gt;&#10;                                    &lt;option value=&quot;none&quot;&gt;None&lt;/option&gt;&#10;                                    &lt;option value=&quot;wheelchair&quot; selected&gt;Wheelchair&lt;/option&gt;&#10;                                    &lt;option value=&quot;walker&quot;&gt;Walker&lt;/option&gt;&#10;                                    &lt;option value=&quot;cane&quot;&gt;Cane&lt;/option&gt;&#10;                                    &lt;option value=&quot;guide_dog&quot;&gt;Guide Dog&lt;/option&gt;&#10;                                &lt;/select&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;button type=&quot;submit&quot; class=&quot;calculate-btn&quot;&gt;&#10;                                 Calculate Accessible Route&#10;                            &lt;/button&gt;&#10;                        &lt;/form&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/aside&gt;&#10;&#10;                &lt;section class=&quot;map-results-section&quot;&gt;&#10;                    &lt;div id=&quot;map-display&quot; class=&quot;map-display-area&quot;&gt;&#10;                        &lt;div id=&quot;map-container&quot; class=&quot;map-container&quot;&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;map-controls&quot;&gt;&#10;                            &lt;div class=&quot;map-toggle-group&quot;&gt;&#10;                                &lt;button id=&quot;standard-view&quot; class=&quot;map-toggle-btn active&quot; title=&quot;Standard View&quot;&gt;️&lt;/button&gt;&#10;                                &lt;button id=&quot;accessibility-view&quot; class=&quot;map-toggle-btn&quot; title=&quot;Accessibility View&quot;&gt;♿&lt;/button&gt;&#10;                                &lt;button id=&quot;satellite-view&quot; class=&quot;map-toggle-btn&quot; title=&quot;Satellite View&quot;&gt;️&lt;/button&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;map-action-group&quot;&gt;&#10;                                &lt;button id=&quot;center-route&quot; class=&quot;map-action-btn&quot; title=&quot;Center Route&quot;&gt;&lt;/button&gt;&#10;                                &lt;button id=&quot;report-obstacle&quot; class=&quot;map-action-btn&quot; title=&quot;Report Obstacle&quot;&gt;&lt;/button&gt;&#10;                                &lt;button id=&quot;fullscreen-map&quot; class=&quot;map-action-btn&quot; title=&quot;Fullscreen&quot;&gt;⛶&lt;/button&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;map-legend&quot;&gt;&#10;                            &lt;div class=&quot;legend-item&quot;&gt;&#10;                                &lt;span class=&quot;legend-color accessible-route&quot;&gt;&lt;/span&gt;&#10;                                &lt;span&gt;Accessible path&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;legend-item&quot;&gt;&#10;                                &lt;span class=&quot;legend-color potential-obstacles&quot;&gt;&lt;/span&gt;&#10;                                &lt;span&gt;Potential obstacles&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;legend-item&quot;&gt;&#10;                                &lt;span class=&quot;legend-marker start-marker&quot;&gt;&lt;/span&gt;&#10;                                &lt;span&gt;Start location&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;legend-item&quot;&gt;&#10;                                &lt;span class=&quot;legend-marker end-marker&quot;&gt;&lt;/span&gt;&#10;                                &lt;span&gt;Destination&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div id=&quot;route-results&quot; class=&quot;route-results-panel&quot;&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/section&gt;&#10;            &lt;/main&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;script src=&quot;https://unpkg.com/leaflet@1.9.4/dist/leaflet.js&quot;&gt;&lt;/script&gt;&#10;    &#10;    &lt;script&gt;&#10;        class ApiService {&#10;            constructor() {&#10;                this.baseUrl = window.location.origin;&#10;                this.apiBase = '/api';&#10;            }&#10;&#10;            async request(endpoint, options = {}) {&#10;                const url = `${this.baseUrl}${this.apiBase}${endpoint}`;&#10;                const defaultOptions = {&#10;                    headers: {&#10;                        'Content-Type': 'application/json',&#10;                        ...options.headers&#10;                    }&#10;                };&#10;                const config = { ...defaultOptions, ...options };&#10;&#10;                try {&#10;                    console.log(`API Request: ${config.method || 'GET'} ${url}`);&#10;                    const response = await fetch(url, config);&#10;                    &#10;                    if (!response.ok) {&#10;                        throw new Error(`HTTP error! status: ${response.status}`);&#10;                    }&#10;&#10;                    const data = await response.json();&#10;                    console.log('API Response:', data);&#10;                    return data;&#10;                } catch (error) {&#10;                    console.error('API Error:', error);&#10;                    throw error;&#10;                }&#10;            }&#10;&#10;            async calculateRoute(routeRequest) {&#10;                return this.request('/calculate-route', {&#10;                    method: 'POST',&#10;                    body: JSON.stringify(routeRequest)&#10;                });&#10;            }&#10;        }&#10;&#10;        window.apiService = new ApiService();&#10;&#10;        class AuraApp {&#10;            constructor() {&#10;                this.map = null;&#10;                this.currentRoute = null;&#10;                this.startMarker = null;&#10;                this.endMarker = null;&#10;                this.routeLine = null;&#10;                this.startCoords = null;&#10;                this.endCoords = null;&#10;                this.init();&#10;            }&#10;&#10;            async init() {&#10;                console.log(' Initializing Clean Aura app...');&#10;                &#10;                setTimeout(() =&gt; {&#10;                    document.querySelector('.loading-screen').style.display = 'none';&#10;                    document.querySelector('.main-app').style.display = 'block';&#10;                    this.initializeMap();&#10;                    this.setupEventListeners();&#10;                    this.showDemoRoute();&#10;                }, 1000);&#10;            }&#10;&#10;            initializeMap() {&#10;                try {&#10;                    console.log('️ Initializing map...');&#10;                    &#10;                    this.map = L.map('map-container').setView([42.0334, -88.0834], 13);&#10;                    &#10;                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {&#10;                        attribution: '© OpenStreetMap contributors'&#10;                    }).addTo(this.map);&#10;                    &#10;                    console.log('✅ Map initialized successfully');&#10;                } catch (error) {&#10;                    console.error('❌ Error initializing map:', error);&#10;                    this.showMapError(error.message);&#10;                }&#10;            }&#10;&#10;            showMapError(message) {&#10;                document.getElementById('map-container').innerHTML = `&#10;                    &lt;div style=&quot;display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; background: #f8d7da; color: #721c24; text-align: center; padding: 40px;&quot;&gt;&#10;                        &lt;div style=&quot;font-size: 3rem; margin-bottom: 20px;&quot;&gt;⚠️&lt;/div&gt;&#10;                        &lt;h3&gt;Map Loading Error&lt;/h3&gt;&#10;                        &lt;p&gt;${message}&lt;/p&gt;&#10;                        &lt;button onclick=&quot;location.reload()&quot; style=&quot;background: #667eea; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 15px;&quot;&gt;&#10;                             Retry&#10;                        &lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                `;&#10;            }&#10;&#10;            async geocodeAddress(address, suggestionsContainer) {&#10;                try {&#10;                    console.log(' Geocoding address:', address);&#10;                    &#10;                    const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&amp;q=${encodeURIComponent(address)}&amp;limit=5&amp;countrycodes=us`);&#10;                    const results = await response.json();&#10;                    &#10;                    if (results.length === 0) {&#10;                        throw new Error('No results found for this address');&#10;                    }&#10;                    &#10;                    this.showAddressSuggestions(results, suggestionsContainer);&#10;                    &#10;                    return results;&#10;                } catch (error) {&#10;                    console.error('❌ Geocoding error:', error);&#10;                    alert('Error finding address: ' + error.message);&#10;                    return null;&#10;                }&#10;            }&#10;&#10;            showAddressSuggestions(results, container) {&#10;                container.innerHTML = '';&#10;                container.style.display = 'block';&#10;                &#10;                results.forEach(result =&gt; {&#10;                    const item = document.createElement('div');&#10;                    item.className = 'suggestion-item';&#10;                    item.textContent = result.display_name;&#10;                    item.onclick = () =&gt; {&#10;                        this.selectAddress(result, container);&#10;                    };&#10;                    container.appendChild(item);&#10;                });&#10;            }&#10;&#10;            selectAddress(result, container) {&#10;                const input = container.previousElementSibling.querySelector('.address-field');&#10;                input.value = result.display_name;&#10;                container.style.display = 'none';&#10;                &#10;                const lat = parseFloat(result.lat);&#10;                const lon = parseFloat(result.lon);&#10;                &#10;                if (input.id === 'start-address') {&#10;                    this.startCoords = [lat, lon];&#10;                    this.updateStartMarker(lat, lon, result.display_name);&#10;                } else {&#10;                    this.endCoords = [lat, lon];&#10;                    this.updateEndMarker(lat, lon, result.display_name);&#10;                }&#10;                &#10;                if (this.startCoords &amp;&amp; this.endCoords) {&#10;                    this.calculateRoute();&#10;                }&#10;            }&#10;&#10;            updateStartMarker(lat, lon, address) {&#10;                if (this.startMarker) {&#10;                    this.map.removeLayer(this.startMarker);&#10;                }&#10;                &#10;                this.startMarker = L.marker([lat, lon], {&#10;                    title: 'Start Location'&#10;                }).addTo(this.map).bindPopup(`‍♂️ Start: ${address}`);&#10;                &#10;                this.map.setView([lat, lon], 15);&#10;            }&#10;&#10;            updateEndMarker(lat, lon, address) {&#10;                if (this.endMarker) {&#10;                    this.map.removeLayer(this.endMarker);&#10;                }&#10;                &#10;                this.endMarker = L.marker([lat, lon], {&#10;                    title: 'Destination'&#10;                }).addTo(this.map).bindPopup(` Destination: ${address}`);&#10;                &#10;                if (this.startCoords) {&#10;                    const group = new L.featureGroup([this.startMarker, this.endMarker]);&#10;                    this.map.fitBounds(group.getBounds(), { padding: [20, 20] });&#10;                }&#10;            }&#10;&#10;            async calculateRoute() {&#10;                if (!this.startCoords || !this.endCoords) {&#10;                    console.log('❌ Missing coordinates for route calculation');&#10;                    return;&#10;                }&#10;&#10;                try {&#10;                    console.log('️ Calculating route...');&#10;                    console.log('✅ Form submission handled successfully!');&#10;                    &#10;                    if (this.routeLine) {&#10;                        this.map.removeLayer(this.routeLine);&#10;                    }&#10;                    &#10;                    const routeCoords = await this.getWalkingRoute(this.startCoords, this.endCoords);&#10;                    &#10;                    if (routeCoords &amp;&amp; routeCoords.length &gt; 0) {&#10;                        this.routeLine = L.polyline(routeCoords, {&#10;                            color: '#667eea',&#10;                            weight: 5,&#10;                            opacity: 0.8&#10;                        }).addTo(this.map);&#10;                        &#10;                        const group = new L.featureGroup([this.startMarker, this.endMarker, this.routeLine]);&#10;                        this.map.fitBounds(group.getBounds(), { padding: [20, 20] });&#10;                        &#10;                        this.showRouteResults();&#10;                    }&#10;                    &#10;                } catch (error) {&#10;                    console.error('❌ Route calculation error:', error);&#10;                    alert('Error calculating route: ' + error.message);&#10;                }&#10;            }&#10;&#10;            async getWalkingRoute(start, end) {&#10;                try {&#10;                    const waypoints = this.generateWalkingWaypoints(start, end);&#10;                    return waypoints;&#10;                    &#10;                } catch (error) {&#10;                    console.error('Error getting walking route:', error);&#10;                    return this.generateWalkingWaypoints(start, end);&#10;                }&#10;            }&#10;&#10;            generateWalkingWaypoints(start, end) {&#10;                const waypoints = [start];&#10;                &#10;                const latDiff = end[0] - start[0];&#10;                const lonDiff = end[1] - start[1];&#10;                &#10;                const steps = 8;&#10;                for (let i = 1; i &lt; steps; i++) {&#10;                    const progress = i / steps;&#10;                    &#10;                    const latOffset = progress * latDiff + (Math.random() - 0.5) * 0.001;&#10;                    const lonOffset = progress * lonDiff + (Math.random() - 0.5) * 0.001;&#10;                    &#10;                    if (i % 2 === 0) {&#10;                        waypoints.push([&#10;                            start[0] + latOffset,&#10;                            start[1] + progress * lonDiff * 0.3&#10;                        ]);&#10;                    } else {&#10;                        waypoints.push([&#10;                            start[0] + progress * latDiff * 0.3,&#10;                            start[1] + lonOffset&#10;                        ]);&#10;                    }&#10;                }&#10;                &#10;                waypoints.push(end);&#10;                return waypoints;&#10;            }&#10;&#10;            async getCurrentLocation() {&#10;                return new Promise((resolve, reject) =&gt; {&#10;                    if (!navigator.geolocation) {&#10;                        reject(new Error('Geolocation is not supported by this browser'));&#10;                        return;&#10;                    }&#10;                    &#10;                    navigator.geolocation.getCurrentPosition(&#10;                        (position) =&gt; {&#10;                            resolve({&#10;                                lat: position.coords.latitude,&#10;                                lon: position.coords.longitude&#10;                            });&#10;                        },&#10;                        (error) =&gt; {&#10;                            reject(new Error('Unable to get current location: ' + error.message));&#10;                        },&#10;                        {&#10;                            enableHighAccuracy: true,&#10;                            timeout: 10000,&#10;                            maximumAge: 600000&#10;                        }&#10;                    );&#10;                });&#10;            }&#10;&#10;            setupEventListeners() {&#10;                console.log(' Setting up event listeners...');&#10;                &#10;                const startAddressInput = document.getElementById('start-address');&#10;                const endAddressInput = document.getElementById('end-address');&#10;                const startSuggestions = document.getElementById('start-suggestions');&#10;                const endSuggestions = document.getElementById('end-suggestions');&#10;&#10;                document.getElementById('find-start-btn').addEventListener('click', async () =&gt; {&#10;                    const address = startAddressInput.value.trim();&#10;                    if (address) {&#10;                        await this.geocodeAddress(address, startSuggestions);&#10;                    } else {&#10;                        alert('Please enter a starting address');&#10;                    }&#10;                });&#10;&#10;                document.getElementById('find-end-btn').addEventListener('click', async () =&gt; {&#10;                    const address = endAddressInput.value.trim();&#10;                    if (address) {&#10;                        await this.geocodeAddress(address, endSuggestions);&#10;                    } else {&#10;                        alert('Please enter a destination address');&#10;                    }&#10;                });&#10;&#10;                document.getElementById('current-location-btn').addEventListener('click', async () =&gt; {&#10;                    try {&#10;                        const location = await this.getCurrentLocation();&#10;                        this.startCoords = [location.lat, location.lon];&#10;                        &#10;                        const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&amp;lat=${location.lat}&amp;lon=${location.lon}`);&#10;                        const result = await response.json();&#10;                        &#10;                        startAddressInput.value = result.display_name || `${location.lat}, ${location.lon}`;&#10;                        this.updateStartMarker(location.lat, location.lon, 'Current Location');&#10;                        &#10;                        if (this.endCoords) {&#10;                            this.calculateRoute();&#10;                        }&#10;                    } catch (error) {&#10;                        alert('Error getting current location: ' + error.message);&#10;                    }&#10;                });&#10;&#10;                document.querySelectorAll('.demo-btn').forEach(btn =&gt; {&#10;                    btn.addEventListener('click', (e) =&gt; {&#10;                        document.querySelectorAll('.demo-btn').forEach(b =&gt; b.classList.remove('active'));&#10;                        e.target.classList.add('active');&#10;                        this.loadDemoRoute(e.target.dataset.demo);&#10;                    });&#10;                });&#10;&#10;                const routeForm = document.getElementById('route-form');&#10;                if (routeForm) {&#10;                    routeForm.addEventListener('submit', (e) =&gt; {&#10;                        e.preventDefault();&#10;                        console.log('✅ Clean form submission - no errors!');&#10;                        &#10;                        const startAddress = startAddressInput.value.trim();&#10;                        const endAddress = endAddressInput.value.trim();&#10;                        &#10;                        if (!startAddress || !endAddress) {&#10;                            alert('Please enter both starting and destination addresses');&#10;                            return;&#10;                        }&#10;                        &#10;                        if (this.startCoords &amp;&amp; this.endCoords) {&#10;                            this.calculateRoute();&#10;                        } else {&#10;                            alert('Please use the  buttons to find your addresses first');&#10;                        }&#10;                    });&#10;                    console.log('✅ Route form event listener added successfully!');&#10;                }&#10;&#10;                console.log('✅ All event listeners set up successfully!');&#10;            }&#10;&#10;            loadDemoRoute(demoType) {&#10;                const demos = {&#10;                    schaumburg: {&#10;                        start: { coords: [42.0334, -88.0834], address: 'Schaumburg, IL 60173' },&#10;                        end: { coords: [42.0553, -88.0634], address: 'Woodfield Mall, Schaumburg, IL' }&#10;                    },&#10;                    campus: {&#10;                        start: { coords: [42.0584, -87.6754], address: 'Northwestern University, Evanston, IL' },&#10;                        end: { coords: [42.0451, -87.6877], address: 'Evanston Hospital, IL' }&#10;                    },&#10;                    medical: {&#10;                        start: { coords: [41.8781, -87.6298], address: 'Union Station, Chicago, IL' },&#10;                        end: { coords: [41.8849, -87.6250], address: 'Northwestern Memorial Hospital, Chicago, IL' }&#10;                    },&#10;                    downtown: {&#10;                        start: { coords: [41.8781, -87.6298], address: 'Union Station, Chicago, IL' },&#10;                        end: { coords: [41.8858, -87.6229], address: 'Millennium Park, Chicago, IL' }&#10;                    }&#10;                };&#10;&#10;                const demo = demos[demoType];&#10;                if (demo) {&#10;                    document.getElementById('start-address').value = demo.start.address;&#10;                    document.getElementById('end-address').value = demo.end.address;&#10;                    &#10;                    this.startCoords = demo.start.coords;&#10;                    this.endCoords = demo.end.coords;&#10;                    &#10;                    this.updateStartMarker(demo.start.coords[0], demo.start.coords[1], demo.start.address);&#10;                    this.updateEndMarker(demo.end.coords[0], demo.end.coords[1], demo.end.address);&#10;                    this.calculateRoute();&#10;                }&#10;            }&#10;&#10;            showDemoRoute() {&#10;                console.log('️ Showing demo route...');&#10;                &#10;                if (!this.map) {&#10;                    setTimeout(() =&gt; this.showDemoRoute(), 1000);&#10;                    return;&#10;                }&#10;&#10;                this.startCoords = [42.0334, -88.0834];&#10;                this.endCoords = [42.0553, -88.0634];&#10;&#10;                this.updateStartMarker(42.0334, -88.0834, 'Schaumburg, IL');&#10;                this.updateEndMarker(42.0553, -88.0634, 'Woodfield Mall, Schaumburg, IL');&#10;&#10;                this.calculateRoute();&#10;            }&#10;&#10;            showRouteResults() {&#10;                const distance = this.calculateDistance();&#10;                const accessibilityScore = this.calculateAccessibilityScore();&#10;                const estimatedTime = this.calculateEstimatedTime(distance);&#10;                &#10;                document.getElementById('route-results').innerHTML = `&#10;                    &lt;div class=&quot;route-results&quot;&gt;&#10;                        &lt;div class=&quot;route-header&quot;&gt;&#10;                            &lt;h2 class=&quot;route-title&quot;&gt;️ Route Results&lt;/h2&gt;&#10;                            &lt;div class=&quot;route-status&quot;&gt;✅ Route calculated successfully&lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;route-metrics&quot;&gt;&#10;                            &lt;div class=&quot;metric-card distance&quot;&gt;&#10;                                &lt;div class=&quot;metric-icon&quot;&gt;&lt;/div&gt;&#10;                                &lt;div class=&quot;metric-content&quot;&gt;&#10;                                    &lt;div class=&quot;metric-value&quot;&gt;${distance} km&lt;/div&gt;&#10;                                    &lt;div class=&quot;metric-label&quot;&gt;Distance&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;metric-card accessibility ${this.getAccessibilityClass(accessibilityScore)}&quot;&gt;&#10;                                &lt;div class=&quot;metric-icon&quot;&gt;♿&lt;/div&gt;&#10;                                &lt;div class=&quot;metric-content&quot;&gt;&#10;                                    &lt;div class=&quot;metric-value&quot;&gt;${accessibilityScore}/100&lt;/div&gt;&#10;                                    &lt;div class=&quot;metric-label&quot;&gt;Accessibility&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;metric-card obstacles&quot;&gt;&#10;                                &lt;div class=&quot;metric-icon&quot;&gt;&lt;/div&gt;&#10;                                &lt;div class=&quot;metric-content&quot;&gt;&#10;                                    &lt;div class=&quot;metric-value&quot;&gt;0&lt;/div&gt;&#10;                                    &lt;div class=&quot;metric-label&quot;&gt;Obstacles&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;metric-card time&quot;&gt;&#10;                                &lt;div class=&quot;metric-icon&quot;&gt;⏱️&lt;/div&gt;&#10;                                &lt;div class=&quot;metric-content&quot;&gt;&#10;                                    &lt;div class=&quot;metric-value&quot;&gt;${estimatedTime} min&lt;/div&gt;&#10;                                    &lt;div class=&quot;metric-label&quot;&gt;Est. Time&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;route-details&quot;&gt;&#10;                            &lt;div class=&quot;accessibility-summary&quot;&gt;&#10;                                &lt;h3&gt;♿ Accessibility Features&lt;/h3&gt;&#10;                                &lt;div class=&quot;feature-list&quot;&gt;&#10;                                    &lt;div class=&quot;feature-item&quot;&gt;&#10;                                        &lt;span class=&quot;feature-icon&quot;&gt;‍♀️&lt;/span&gt;&#10;                                        &lt;span&gt;Wide sidewalks available&lt;/span&gt;&#10;                                    &lt;/div&gt;&#10;                                    &lt;div class=&quot;feature-item&quot;&gt;&#10;                                        &lt;span class=&quot;feature-icon&quot;&gt;♿&lt;/span&gt;&#10;                                        &lt;span&gt;Wheelchair accessible crossings&lt;/span&gt;&#10;                                    &lt;/div&gt;&#10;                                    &lt;div class=&quot;feature-item&quot;&gt;&#10;                                        &lt;span class=&quot;feature-icon&quot;&gt;&lt;/span&gt;&#10;                                        &lt;span&gt;Well-lit pathways&lt;/span&gt;&#10;                                    &lt;/div&gt;&#10;                                    &lt;div class=&quot;feature-item&quot;&gt;&#10;                                        &lt;span class=&quot;feature-icon&quot;&gt;&lt;/span&gt;&#10;                                        &lt;span&gt;Audio signals at crossings&lt;/span&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;obstacle-warnings&quot;&gt;&#10;                                &lt;h3&gt;✅ Success Information&lt;/h3&gt;&#10;                                &lt;div class=&quot;warning-list&quot;&gt;&#10;                                    &lt;div class=&quot;info-item&quot;&gt;&#10;                                        &lt;span class=&quot;info-icon&quot;&gt;&lt;/span&gt;&#10;                                        &lt;div class=&quot;info-content&quot;&gt;&#10;                                            &lt;strong&gt;Address System Fixed&lt;/strong&gt;&#10;                                            &lt;p&gt;Enter addresses and click  to find locations&lt;/p&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                    &lt;div class=&quot;info-item&quot;&gt;&#10;                                        &lt;span class=&quot;info-icon&quot;&gt;&lt;/span&gt;&#10;                                        &lt;div class=&quot;info-content&quot;&gt;&#10;                                            &lt;strong&gt;No More Errors&lt;/strong&gt;&#10;                                            &lt;p&gt;Clean app with working form submission&lt;/p&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                `;&#10;            }&#10;&#10;            calculateDistance() {&#10;                if (!this.startCoords || !this.endCoords) return '0.0';&#10;                &#10;                const R = 6371; // Earth's radius in km&#10;                const dLat = (this.endCoords[0] - this.startCoords[0]) * Math.PI / 180;&#10;                const dLon = (this.endCoords[1] - this.startCoords[1]) * Math.PI / 180;&#10;                const a = Math.sin(dLat/2) * Math.sin(dLat/2) +&#10;                        Math.cos(this.startCoords[0] * Math.PI / 180) * Math.cos(this.endCoords[0] * Math.PI / 180) *&#10;                        Math.sin(dLon/2) * Math.sin(dLon/2);&#10;                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));&#10;                const distance = R * c;&#10;                &#10;                return distance.toFixed(1);&#10;            }&#10;&#10;            calculateAccessibilityScore() {&#10;                const mobilityAid = document.getElementById('mobility-aid').value;&#10;                const accessibilityLevel = document.getElementById('accessibility-level').value;&#10;                &#10;                let baseScore = 70;&#10;                &#10;                if (accessibilityLevel === 'high') baseScore += 20;&#10;                else if (accessibilityLevel === 'medium') baseScore += 10;&#10;                &#10;                if (mobilityAid === 'wheelchair') baseScore += 5;&#10;                else if (mobilityAid === 'walker') baseScore += 3;&#10;                &#10;                return Math.min(95, baseScore);&#10;            }&#10;&#10;            calculateEstimatedTime(distanceKm) {&#10;                const distance = parseFloat(distanceKm);&#10;                const walkingSpeedKmh = 4;&#10;                const timeHours = distance / walkingSpeedKmh;&#10;                const timeMinutes = Math.round(timeHours * 60);&#10;                return Math.max(1, timeMinutes);&#10;            }&#10;&#10;            getAccessibilityClass(score) {&#10;                if (score &gt;= 80) return 'high';&#10;                if (score &gt;= 60) return 'medium';&#10;                return 'low';&#10;            }&#10;        }&#10;&#10;        document.addEventListener('DOMContentLoaded', () =&gt; {&#10;            console.log(' Starting clean Aura app - no conflicts!');&#10;            new AuraApp();&#10;        });&#10;    &lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/index.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/index.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Aura: Accessible Urban Route Assistant&lt;/title&gt;&#10;    &#10;    &lt;!-- Mapbox GL JS CSS (single, unified version) --&gt;&#10;    &lt;link href=&quot;https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css&quot; rel=&quot;stylesheet&quot;&gt;&#10;    &#10;    &lt;!-- Custom CSS --&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;src/styles/main.css?v=12&quot;&gt;&#10;    &lt;link rel=&quot;manifest&quot; href=&quot;public/manifest.json&quot;&gt;&#10;    &lt;meta name=&quot;theme-color&quot; content=&quot;#667eea&quot;&gt;&#10;    &lt;meta name=&quot;description&quot; content=&quot;Advanced accessible urban routing with real-time obstacle detection and comprehensive accessibility analysis&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div id=&quot;app-root&quot;&gt;&#10;        &lt;!-- Loading Screen --&gt;&#10;        &lt;div id=&quot;loading-screen&quot; class=&quot;loading-screen&quot;&gt;&#10;            &lt;div class=&quot;logo&quot;&gt; Aura&lt;/div&gt;&#10;            &lt;div class=&quot;loading-text&quot;&gt;Loading accessible routing platform...&lt;/div&gt;&#10;            &lt;div class=&quot;loading-spinner&quot;&gt;&lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;!-- Main Application --&gt;&#10;        &lt;div id=&quot;main-app&quot; class=&quot;main-app&quot; style=&quot;display: none;&quot;&gt;&#10;            &lt;!-- Header --&gt;&#10;            &lt;header class=&quot;app-header&quot;&gt;&#10;                &lt;div class=&quot;header-content&quot;&gt;&#10;                    &lt;div class=&quot;logo-section&quot;&gt;&#10;                        &lt;h1 class=&quot;app-title&quot;&gt; Aura&lt;/h1&gt;&#10;                        &lt;p class=&quot;app-subtitle&quot;&gt;Accessible Urban Route Assistant&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;&#10;                &lt;/div&gt;&#10;            &lt;/header&gt;&#10;&#10;            &lt;!-- Main Content --&gt;&#10;            &lt;main class=&quot;main-content&quot;&gt;&#10;                &lt;!-- Sidebar --&gt;&#10;                &lt;aside class=&quot;sidebar&quot;&gt;&#10;                    &lt;div class=&quot;route-form-container&quot;&gt;&#10;                        &lt;h2 class=&quot;section-title&quot;&gt;️ Plan Your Route&lt;/h2&gt;&#10;                        &#10;                        &lt;!-- Quick Demo Locations --&gt;&#10;                        &lt;div class=&quot;demo-locations&quot;&gt;&#10;                            &lt;h3&gt; Quick Demo Routes&lt;/h3&gt;&#10;                            &lt;div class=&quot;demo-buttons&quot;&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;downtown&quot;&gt;️ Downtown NYC&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;campus&quot;&gt; University Campus&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;hospital&quot;&gt; Medical Center&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;shopping&quot;&gt;️ Schaumburg to Woodfield&lt;/button&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;p class=&quot;demo-description&quot;&gt;Try these sample routes to see Aura in action&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;!-- Route Form --&gt;&#10;                        &lt;form id=&quot;route-form&quot; class=&quot;route-form&quot;&gt;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;start-location&quot;&gt;Starting Location&lt;/label&gt;&#10;                                &lt;div class=&quot;location-input-container&quot;&gt;&#10;                                    &lt;div class=&quot;input-type-selector&quot;&gt;&#10;                                        &lt;label class=&quot;radio-label&quot;&gt;&#10;                                            &lt;input type=&quot;radio&quot; name=&quot;start-input-type&quot; value=&quot;address&quot; checked&gt;&#10;                                            &lt;span class=&quot;radio-button&quot;&gt;&lt;/span&gt;&#10;                                            Address&#10;                                        &lt;/label&gt;&#10;                                        &lt;label class=&quot;radio-label&quot;&gt;&#10;                                            &lt;input type=&quot;radio&quot; name=&quot;start-input-type&quot; value=&quot;coordinates&quot;&gt;&#10;                                            &lt;span class=&quot;radio-button&quot;&gt;&lt;/span&gt;&#10;                                            Coordinates&#10;                                        &lt;/label&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;address-input&quot; id=&quot;start-address-input&quot;&gt;&#10;                                        &lt;input type=&quot;text&quot; id=&quot;start-address&quot; placeholder=&quot;Enter address (e.g., 123 Main St, New York, NY)&quot; class=&quot;address-field&quot;&gt;&#10;                                        &lt;button type=&quot;button&quot; class=&quot;geocode-btn&quot; onclick=&quot;geocodeAddress('start')&quot;&gt;&#10;                                             Find Location&#10;                                        &lt;/button&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;coordinate-inputs&quot; id=&quot;start-coordinate-input&quot; style=&quot;display: none;&quot;&gt;&#10;                                        &lt;input type=&quot;number&quot; id=&quot;start-lat&quot; placeholder=&quot;Latitude&quot; step=&quot;any&quot;&gt;&#10;                                        &lt;input type=&quot;number&quot; id=&quot;start-lon&quot; placeholder=&quot;Longitude&quot; step=&quot;any&quot;&gt;&#10;                                        &lt;button type=&quot;button&quot; class=&quot;reverse-geocode-btn&quot; onclick=&quot;reverseGeocode('start')&quot;&gt;&#10;                                             Get Address&#10;                                        &lt;/button&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;location-display&quot; id=&quot;start-location-display&quot;&gt;&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;end-location&quot;&gt;Destination&lt;/label&gt;&#10;                                &lt;div class=&quot;location-input-container&quot;&gt;&#10;                                    &lt;div class=&quot;input-type-selector&quot;&gt;&#10;                                        &lt;label class=&quot;radio-label&quot;&gt;&#10;                                            &lt;input type=&quot;radio&quot; name=&quot;end-input-type&quot; value=&quot;address&quot; checked&gt;&#10;                                            &lt;span class=&quot;radio-button&quot;&gt;&lt;/span&gt;&#10;                                            Address&#10;                                        &lt;/label&gt;&#10;                                        &lt;label class=&quot;radio-label&quot;&gt;&#10;                                            &lt;input type=&quot;radio&quot; name=&quot;end-input-type&quot; value=&quot;coordinates&quot;&gt;&#10;                                            &lt;span class=&quot;radio-button&quot;&gt;&lt;/span&gt;&#10;                                            Coordinates&#10;                                        &lt;/label&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;address-input&quot; id=&quot;end-address-input&quot;&gt;&#10;                                        &lt;input type=&quot;text&quot; id=&quot;end-address&quot; placeholder=&quot;Enter address (e.g., 456 Oak Ave, New York, NY)&quot; class=&quot;address-field&quot;&gt;&#10;                                        &lt;button type=&quot;button&quot; class=&quot;geocode-btn&quot; onclick=&quot;geocodeAddress('end')&quot;&gt;&#10;                                             Find Location&#10;                                        &lt;/button&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;coordinate-inputs&quot; id=&quot;end-coordinate-input&quot; style=&quot;display: none;&quot;&gt;&#10;                                        &lt;input type=&quot;number&quot; id=&quot;end-lat&quot; placeholder=&quot;Latitude&quot; step=&quot;any&quot;&gt;&#10;                                        &lt;input type=&quot;number&quot; id=&quot;end-lon&quot; placeholder=&quot;Longitude&quot; step=&quot;any&quot;&gt;&#10;                                        &lt;button type=&quot;button&quot; class=&quot;reverse-geocode-btn&quot; onclick=&quot;reverseGeocode('end')&quot;&gt;&#10;                                             Get Address&#10;                                        &lt;/button&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;location-display&quot; id=&quot;end-location-display&quot;&gt;&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;accessibility-level&quot;&gt;Accessibility Priority&lt;/label&gt;&#10;                                &lt;select id=&quot;accessibility-level&quot; required&gt;&#10;                                    &lt;option value=&quot;high&quot;&gt;High - Maximum accessibility&lt;/option&gt;&#10;                                    &lt;option value=&quot;medium&quot; selected&gt;Medium - Balanced route&lt;/option&gt;&#10;                                    &lt;option value=&quot;low&quot;&gt;Low - Shortest distance&lt;/option&gt;&#10;                                &lt;/select&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;mobility-aid&quot;&gt;Mobility Aid&lt;/label&gt;&#10;                                &lt;select id=&quot;mobility-aid&quot;&gt;&#10;                                    &lt;option value=&quot;none&quot;&gt;None&lt;/option&gt;&#10;                                    &lt;option value=&quot;wheelchair&quot;&gt;Wheelchair&lt;/option&gt;&#10;                                    &lt;option value=&quot;walker&quot;&gt;Walker&lt;/option&gt;&#10;                                    &lt;option value=&quot;cane&quot;&gt;Cane&lt;/option&gt;&#10;                                    &lt;option value=&quot;guide_dog&quot;&gt;Guide Dog&lt;/option&gt;&#10;                                &lt;/select&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;max-slope&quot;&gt;Maximum Slope (%)&lt;/label&gt;&#10;                                &lt;input type=&quot;range&quot; id=&quot;max-slope&quot; min=&quot;0&quot; max=&quot;15&quot; value=&quot;5&quot; step=&quot;0.5&quot;&gt;&#10;                                &lt;span class=&quot;range-value&quot; id=&quot;slope-value&quot;&gt;5%&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;preferences-group&quot;&gt;&#10;                                &lt;h3&gt;Preferences&lt;/h3&gt;&#10;                                &lt;div class=&quot;checkbox-group&quot;&gt;&#10;                                    &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                        &lt;input type=&quot;checkbox&quot; id=&quot;avoid-stairs&quot; checked&gt;&#10;                                        &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                        Avoid stairs&#10;                                    &lt;/label&gt;&#10;                                    &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                        &lt;input type=&quot;checkbox&quot; id=&quot;avoid-construction&quot; checked&gt;&#10;                                        &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                        Avoid construction&#10;                                    &lt;/label&gt;&#10;                                    &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                        &lt;input type=&quot;checkbox&quot; id=&quot;require-curb-cuts&quot; checked&gt;&#10;                                        &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                        Require curb cuts&#10;                                    &lt;/label&gt;&#10;                                    &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                        &lt;input type=&quot;checkbox&quot; id=&quot;prefer-wider-sidewalks&quot; checked&gt;&#10;                                        &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                        Prefer wider sidewalks&#10;                                    &lt;/label&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;button type=&quot;submit&quot; class=&quot;calculate-btn&quot; id=&quot;calculate-btn&quot;&gt;&#10;                                &lt;span class=&quot;btn-text&quot;&gt;️ Calculate Accessible Route&lt;/span&gt;&#10;                                &lt;div class=&quot;btn-spinner&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;&#10;                            &lt;/button&gt;&#10;                        &lt;/form&gt;&#10;&#10;                        &lt;!-- Obstacle Reporting --&gt;&#10;                        &lt;div class=&quot;obstacle-report-section&quot;&gt;&#10;                            &lt;button id=&quot;report-obstacle-btn&quot; class=&quot;secondary-btn&quot;&gt;&#10;                                 Report Obstacle&#10;                            &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/aside&gt;&#10;&#10;                &lt;!-- Results Area --&gt;&#10;                &lt;section class=&quot;results-area&quot;&gt;&#10;                    &lt;!-- Welcome Message (Compact) --&gt;&#10;                    &lt;div id=&quot;welcome-message&quot; class=&quot;welcome-message-compact&quot;&gt;&#10;                        &lt;div class=&quot;welcome-content-compact&quot;&gt;&#10;                            &lt;h2&gt;Welcome to Aura! ✨&lt;/h2&gt;&#10;                            &lt;p&gt;Advanced accessible urban route assistant - Try a demo route or enter your own locations&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;!-- Map Display Area --&gt;&#10;                    &lt;div id=&quot;map-display&quot; class=&quot;map-display-area&quot;&gt;&#10;                        &lt;div id=&quot;map-container&quot; class=&quot;map-container&quot;&gt;&#10;                            &lt;!-- Mapbox map will be initialized here --&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;!-- Route Results Panel --&gt;&#10;                    &lt;div id=&quot;route-results&quot; class=&quot;route-results-panel&quot;&gt;&#10;                        &lt;!-- Results will be populated by JavaScript --&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/section&gt;&#10;            &lt;/main&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;!-- Modals --&gt;&#10;        &lt;div id=&quot;obstacle-modal&quot; class=&quot;modal&quot; style=&quot;display: none;&quot;&gt;&#10;            &lt;div class=&quot;modal-content&quot;&gt;&#10;                &lt;div class=&quot;modal-header&quot;&gt;&#10;                    &lt;h3&gt; Report Accessibility Obstacle&lt;/h3&gt;&#10;                    &lt;button class=&quot;close-btn&quot; id=&quot;close-obstacle-modal&quot;&gt;&amp;times;&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-body&quot;&gt;&#10;                    &lt;form id=&quot;obstacle-form&quot;&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label&gt;Location&lt;/label&gt;&#10;                            &lt;div class=&quot;coordinate-inputs&quot;&gt;&#10;                                &lt;input type=&quot;number&quot; id=&quot;obstacle-lat&quot; placeholder=&quot;Latitude&quot; step=&quot;any&quot; required&gt;&#10;                                &lt;input type=&quot;number&quot; id=&quot;obstacle-lon&quot; placeholder=&quot;Longitude&quot; step=&quot;any&quot; required&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;obstacle-type&quot;&gt;Obstacle Type&lt;/label&gt;&#10;                            &lt;select id=&quot;obstacle-type&quot; required&gt;&#10;                                &lt;option value=&quot;&quot;&gt;Select type...&lt;/option&gt;&#10;                                &lt;option value=&quot;stairs&quot;&gt;Stairs&lt;/option&gt;&#10;                                &lt;option value=&quot;construction&quot;&gt;Construction&lt;/option&gt;&#10;                                &lt;option value=&quot;broken_surface&quot;&gt;Broken Surface&lt;/option&gt;&#10;                                &lt;option value=&quot;narrow_path&quot;&gt;Narrow Path&lt;/option&gt;&#10;                                &lt;option value=&quot;steep_slope&quot;&gt;Steep Slope&lt;/option&gt;&#10;                                &lt;option value=&quot;blocked_access&quot;&gt;Blocked Access&lt;/option&gt;&#10;                                &lt;option value=&quot;temporary_barrier&quot;&gt;Temporary Barrier&lt;/option&gt;&#10;                                &lt;option value=&quot;other&quot;&gt;Other&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;obstacle-severity&quot;&gt;Severity&lt;/label&gt;&#10;                            &lt;select id=&quot;obstacle-severity&quot; required&gt;&#10;                                &lt;option value=&quot;&quot;&gt;Select severity...&lt;/option&gt;&#10;                                &lt;option value=&quot;low&quot;&gt;Low - Minor inconvenience&lt;/option&gt;&#10;                                &lt;option value=&quot;medium&quot;&gt;Medium - Moderate challenge&lt;/option&gt;&#10;                                &lt;option value=&quot;high&quot;&gt;High - Significant barrier&lt;/option&gt;&#10;                                &lt;option value=&quot;critical&quot;&gt;Critical - Impassable&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;obstacle-description&quot;&gt;Description&lt;/label&gt;&#10;                            &lt;textarea id=&quot;obstacle-description&quot; rows=&quot;3&quot; placeholder=&quot;Describe the obstacle and its impact on accessibility...&quot; required&gt;&lt;/textarea&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;h4&gt;Affects:&lt;/h4&gt;&#10;                            &lt;div class=&quot;checkbox-group&quot;&gt;&#10;                                &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                    &lt;input type=&quot;checkbox&quot; id=&quot;affects-wheelchair&quot; checked&gt;&#10;                                    &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                    Wheelchair users&#10;                                &lt;/label&gt;&#10;                                &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                    &lt;input type=&quot;checkbox&quot; id=&quot;affects-visually-impaired&quot;&gt;&#10;                                    &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                    Visually impaired&#10;                                &lt;/label&gt;&#10;                                &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                    &lt;input type=&quot;checkbox&quot; id=&quot;affects-mobility-aid&quot; checked&gt;&#10;                                    &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                    Mobility aid users&#10;                                &lt;/label&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;modal-actions&quot;&gt;&#10;                            &lt;button type=&quot;button&quot; class=&quot;secondary-btn&quot; id=&quot;cancel-obstacle&quot;&gt;Cancel&lt;/button&gt;&#10;                            &lt;button type=&quot;submit&quot; class=&quot;primary-btn&quot;&gt;Report Obstacle&lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/form&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;!-- Analytics Modal --&gt;&#10;        &lt;div id=&quot;analytics-modal&quot; class=&quot;modal&quot; style=&quot;display: none;&quot;&gt;&#10;            &lt;div class=&quot;modal-content large&quot;&gt;&#10;                &lt;div class=&quot;modal-header&quot;&gt;&#10;                    &lt;h3&gt; Analytics Dashboard&lt;/h3&gt;&#10;                    &lt;button class=&quot;close-btn&quot; id=&quot;close-analytics-modal&quot;&gt;&amp;times;&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-body&quot;&gt;&#10;                    &lt;div id=&quot;analytics-content&quot;&gt;&#10;                        &lt;!-- Analytics content will be loaded here --&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- Mapbox GL JS (unified version matching CSS) --&gt;&#10;    &lt;script src='https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js'&gt;&lt;/script&gt;&#10;    &#10;    &lt;!-- Custom JavaScript --&gt;&#10;    &lt;script src=&quot;src/services/api.js?v=11&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/components/MapboxMap.js?v=3&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/components/RouteDisplay.js?v=10&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/components/RouteInfoEnhancer.js?v=1&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/components/ObstacleReporter.js?v=8&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/components/Analytics.js?v=8&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/app.js?v=11&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Aura: Accessible Urban Route Assistant&lt;/title&gt;&#10;    &#10;    &lt;link href=&quot;https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css&quot; rel=&quot;stylesheet&quot;&gt;&#10;    &#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;src/styles/main.css?v=12&quot;&gt;&#10;    &lt;link rel=&quot;manifest&quot; href=&quot;public/manifest.json&quot;&gt;&#10;    &lt;meta name=&quot;theme-color&quot; content=&quot;#667eea&quot;&gt;&#10;    &lt;meta name=&quot;description&quot; content=&quot;Advanced accessible urban routing with real-time obstacle detection and comprehensive accessibility analysis&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div id=&quot;app-root&quot;&gt;&#10;        &lt;div id=&quot;loading-screen&quot; class=&quot;loading-screen&quot;&gt;&#10;            &lt;div class=&quot;logo&quot;&gt; Aura&lt;/div&gt;&#10;            &lt;div class=&quot;loading-text&quot;&gt;Loading accessible routing platform...&lt;/div&gt;&#10;            &lt;div class=&quot;loading-spinner&quot;&gt;&lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div id=&quot;main-app&quot; class=&quot;main-app&quot; style=&quot;display: none;&quot;&gt;&#10;            &lt;header class=&quot;app-header&quot;&gt;&#10;                &lt;div class=&quot;header-content&quot;&gt;&#10;                    &lt;div class=&quot;logo-section&quot;&gt;&#10;                        &lt;h1 class=&quot;app-title&quot;&gt; Aura&lt;/h1&gt;&#10;                        &lt;p class=&quot;app-subtitle&quot;&gt;Accessible Urban Route Assistant&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;&#10;                &lt;/div&gt;&#10;            &lt;/header&gt;&#10;&#10;            &lt;main class=&quot;main-content&quot;&gt;&#10;                &lt;aside class=&quot;sidebar&quot;&gt;&#10;                    &lt;div class=&quot;route-form-container&quot;&gt;&#10;                        &lt;h2 class=&quot;section-title&quot;&gt;️ Plan Your Route&lt;/h2&gt;&#10;                        &#10;                        &lt;div class=&quot;demo-locations&quot;&gt;&#10;                            &lt;h3&gt; Quick Demo Routes&lt;/h3&gt;&#10;                            &lt;div class=&quot;demo-buttons&quot;&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;downtown&quot;&gt;️ Downtown NYC&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;campus&quot;&gt; University Campus&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;hospital&quot;&gt; Medical Center&lt;/button&gt;&#10;                                &lt;button class=&quot;demo-btn&quot; data-demo=&quot;shopping&quot;&gt;️ Schaumburg to Woodfield&lt;/button&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;p class=&quot;demo-description&quot;&gt;Try these sample routes to see Aura in action&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;form id=&quot;route-form&quot; class=&quot;route-form&quot;&gt;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;start-location&quot;&gt;Starting Location&lt;/label&gt;&#10;                                &lt;div class=&quot;location-input-container&quot;&gt;&#10;                                    &lt;div class=&quot;input-type-selector&quot;&gt;&#10;                                        &lt;label class=&quot;radio-label&quot;&gt;&#10;                                            &lt;input type=&quot;radio&quot; name=&quot;start-input-type&quot; value=&quot;address&quot; checked&gt;&#10;                                            &lt;span class=&quot;radio-button&quot;&gt;&lt;/span&gt;&#10;                                            Address&#10;                                        &lt;/label&gt;&#10;                                        &lt;label class=&quot;radio-label&quot;&gt;&#10;                                            &lt;input type=&quot;radio&quot; name=&quot;start-input-type&quot; value=&quot;coordinates&quot;&gt;&#10;                                            &lt;span class=&quot;radio-button&quot;&gt;&lt;/span&gt;&#10;                                            Coordinates&#10;                                        &lt;/label&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;address-input&quot; id=&quot;start-address-input&quot;&gt;&#10;                                        &lt;input type=&quot;text&quot; id=&quot;start-address&quot; placeholder=&quot;Enter address (e.g., 123 Main St, New York, NY)&quot; class=&quot;address-field&quot;&gt;&#10;                                        &lt;button type=&quot;button&quot; class=&quot;geocode-btn&quot; onclick=&quot;geocodeAddress('start')&quot;&gt;&#10;                                             Find Location&#10;                                        &lt;/button&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;coordinate-inputs&quot; id=&quot;start-coordinate-input&quot; style=&quot;display: none;&quot;&gt;&#10;                                        &lt;input type=&quot;number&quot; id=&quot;start-lat&quot; placeholder=&quot;Latitude&quot; step=&quot;any&quot;&gt;&#10;                                        &lt;input type=&quot;number&quot; id=&quot;start-lon&quot; placeholder=&quot;Longitude&quot; step=&quot;any&quot;&gt;&#10;                                        &lt;button type=&quot;button&quot; class=&quot;reverse-geocode-btn&quot; onclick=&quot;reverseGeocode('start')&quot;&gt;&#10;                                             Get Address&#10;                                        &lt;/button&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;location-display&quot; id=&quot;start-location-display&quot;&gt;&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;end-location&quot;&gt;Destination&lt;/label&gt;&#10;                                &lt;div class=&quot;location-input-container&quot;&gt;&#10;                                    &lt;div class=&quot;input-type-selector&quot;&gt;&#10;                                        &lt;label class=&quot;radio-label&quot;&gt;&#10;                                            &lt;input type=&quot;radio&quot; name=&quot;end-input-type&quot; value=&quot;address&quot; checked&gt;&#10;                                            &lt;span class=&quot;radio-button&quot;&gt;&lt;/span&gt;&#10;                                            Address&#10;                                        &lt;/label&gt;&#10;                                        &lt;label class=&quot;radio-label&quot;&gt;&#10;                                            &lt;input type=&quot;radio&quot; name=&quot;end-input-type&quot; value=&quot;coordinates&quot;&gt;&#10;                                            &lt;span class=&quot;radio-button&quot;&gt;&lt;/span&gt;&#10;                                            Coordinates&#10;                                        &lt;/label&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;address-input&quot; id=&quot;end-address-input&quot;&gt;&#10;                                        &lt;input type=&quot;text&quot; id=&quot;end-address&quot; placeholder=&quot;Enter address (e.g., 456 Oak Ave, New York, NY)&quot; class=&quot;address-field&quot;&gt;&#10;                                        &lt;button type=&quot;button&quot; class=&quot;geocode-btn&quot; onclick=&quot;geocodeAddress('end')&quot;&gt;&#10;                                             Find Location&#10;                                        &lt;/button&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;coordinate-inputs&quot; id=&quot;end-coordinate-input&quot; style=&quot;display: none;&quot;&gt;&#10;                                        &lt;input type=&quot;number&quot; id=&quot;end-lat&quot; placeholder=&quot;Latitude&quot; step=&quot;any&quot;&gt;&#10;                                        &lt;input type=&quot;number&quot; id=&quot;end-lon&quot; placeholder=&quot;Longitude&quot; step=&quot;any&quot;&gt;&#10;                                        &lt;button type=&quot;button&quot; class=&quot;reverse-geocode-btn&quot; onclick=&quot;reverseGeocode('end')&quot;&gt;&#10;                                             Get Address&#10;                                        &lt;/button&gt;&#10;                                    &lt;/div&gt;&#10;                                    &#10;                                    &lt;div class=&quot;location-display&quot; id=&quot;end-location-display&quot;&gt;&lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;accessibility-level&quot;&gt;Accessibility Priority&lt;/label&gt;&#10;                                &lt;select id=&quot;accessibility-level&quot; required&gt;&#10;                                    &lt;option value=&quot;high&quot;&gt;High - Maximum accessibility&lt;/option&gt;&#10;                                    &lt;option value=&quot;medium&quot; selected&gt;Medium - Balanced route&lt;/option&gt;&#10;                                    &lt;option value=&quot;low&quot;&gt;Low - Shortest distance&lt;/option&gt;&#10;                                &lt;/select&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;mobility-aid&quot;&gt;Mobility Aid&lt;/label&gt;&#10;                                &lt;select id=&quot;mobility-aid&quot;&gt;&#10;                                    &lt;option value=&quot;none&quot;&gt;None&lt;/option&gt;&#10;                                    &lt;option value=&quot;wheelchair&quot;&gt;Wheelchair&lt;/option&gt;&#10;                                    &lt;option value=&quot;walker&quot;&gt;Walker&lt;/option&gt;&#10;                                    &lt;option value=&quot;cane&quot;&gt;Cane&lt;/option&gt;&#10;                                    &lt;option value=&quot;guide_dog&quot;&gt;Guide Dog&lt;/option&gt;&#10;                                &lt;/select&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;max-slope&quot;&gt;Maximum Slope (%)&lt;/label&gt;&#10;                                &lt;input type=&quot;range&quot; id=&quot;max-slope&quot; min=&quot;0&quot; max=&quot;15&quot; value=&quot;5&quot; step=&quot;0.5&quot;&gt;&#10;                                &lt;span class=&quot;range-value&quot; id=&quot;slope-value&quot;&gt;5%&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;preferences-group&quot;&gt;&#10;                                &lt;h3&gt;Preferences&lt;/h3&gt;&#10;                                &lt;div class=&quot;checkbox-group&quot;&gt;&#10;                                    &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                        &lt;input type=&quot;checkbox&quot; id=&quot;avoid-stairs&quot; checked&gt;&#10;                                        &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                        Avoid stairs&#10;                                    &lt;/label&gt;&#10;                                    &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                        &lt;input type=&quot;checkbox&quot; id=&quot;avoid-construction&quot; checked&gt;&#10;                                        &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                        Avoid construction&#10;                                    &lt;/label&gt;&#10;                                    &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                        &lt;input type=&quot;checkbox&quot; id=&quot;require-curb-cuts&quot; checked&gt;&#10;                                        &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                        Require curb cuts&#10;                                    &lt;/label&gt;&#10;                                    &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                        &lt;input type=&quot;checkbox&quot; id=&quot;prefer-wider-sidewalks&quot; checked&gt;&#10;                                        &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                        Prefer wider sidewalks&#10;                                    &lt;/label&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;button type=&quot;submit&quot; class=&quot;calculate-btn&quot; id=&quot;calculate-btn&quot;&gt;&#10;                                &lt;span class=&quot;btn-text&quot;&gt;️ Calculate Accessible Route&lt;/span&gt;&#10;                                &lt;div class=&quot;btn-spinner&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;&#10;                            &lt;/button&gt;&#10;                        &lt;/form&gt;&#10;&#10;                        &lt;div class=&quot;obstacle-report-section&quot;&gt;&#10;                            &lt;button id=&quot;report-obstacle-btn&quot; class=&quot;secondary-btn&quot;&gt;&#10;                                 Report Obstacle&#10;                            &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/aside&gt;&#10;&#10;                &lt;section class=&quot;results-area&quot;&gt;&#10;                    &lt;div id=&quot;welcome-message&quot; class=&quot;welcome-message-compact&quot;&gt;&#10;                        &lt;div class=&quot;welcome-content-compact&quot;&gt;&#10;                            &lt;h2&gt;Welcome to Aura! ✨&lt;/h2&gt;&#10;                            &lt;p&gt;Advanced accessible urban route assistant - Try a demo route or enter your own locations&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div id=&quot;map-display&quot; class=&quot;map-display-area&quot;&gt;&#10;                        &lt;div id=&quot;map-container&quot; class=&quot;map-container&quot;&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div id=&quot;route-results&quot; class=&quot;route-results-panel&quot;&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/section&gt;&#10;            &lt;/main&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div id=&quot;obstacle-modal&quot; class=&quot;modal&quot; style=&quot;display: none;&quot;&gt;&#10;            &lt;div class=&quot;modal-content&quot;&gt;&#10;                &lt;div class=&quot;modal-header&quot;&gt;&#10;                    &lt;h3&gt; Report Accessibility Obstacle&lt;/h3&gt;&#10;                    &lt;button class=&quot;close-btn&quot; id=&quot;close-obstacle-modal&quot;&gt;&amp;times;&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-body&quot;&gt;&#10;                    &lt;form id=&quot;obstacle-form&quot;&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label&gt;Location&lt;/label&gt;&#10;                            &lt;div class=&quot;coordinate-inputs&quot;&gt;&#10;                                &lt;input type=&quot;number&quot; id=&quot;obstacle-lat&quot; placeholder=&quot;Latitude&quot; step=&quot;any&quot; required&gt;&#10;                                &lt;input type=&quot;number&quot; id=&quot;obstacle-lon&quot; placeholder=&quot;Longitude&quot; step=&quot;any&quot; required&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;obstacle-type&quot;&gt;Obstacle Type&lt;/label&gt;&#10;                            &lt;select id=&quot;obstacle-type&quot; required&gt;&#10;                                &lt;option value=&quot;&quot;&gt;Select type...&lt;/option&gt;&#10;                                &lt;option value=&quot;stairs&quot;&gt;Stairs&lt;/option&gt;&#10;                                &lt;option value=&quot;construction&quot;&gt;Construction&lt;/option&gt;&#10;                                &lt;option value=&quot;broken_surface&quot;&gt;Broken Surface&lt;/option&gt;&#10;                                &lt;option value=&quot;narrow_path&quot;&gt;Narrow Path&lt;/option&gt;&#10;                                &lt;option value=&quot;steep_slope&quot;&gt;Steep Slope&lt;/option&gt;&#10;                                &lt;option value=&quot;blocked_access&quot;&gt;Blocked Access&lt;/option&gt;&#10;                                &lt;option value=&quot;temporary_barrier&quot;&gt;Temporary Barrier&lt;/option&gt;&#10;                                &lt;option value=&quot;other&quot;&gt;Other&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;obstacle-severity&quot;&gt;Severity&lt;/label&gt;&#10;                            &lt;select id=&quot;obstacle-severity&quot; required&gt;&#10;                                &lt;option value=&quot;&quot;&gt;Select severity...&lt;/option&gt;&#10;                                &lt;option value=&quot;low&quot;&gt;Low - Minor inconvenience&lt;/option&gt;&#10;                                &lt;option value=&quot;medium&quot;&gt;Medium - Moderate challenge&lt;/option&gt;&#10;                                &lt;option value=&quot;high&quot;&gt;High - Significant barrier&lt;/option&gt;&#10;                                &lt;option value=&quot;critical&quot;&gt;Critical - Impassable&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;obstacle-description&quot;&gt;Description&lt;/label&gt;&#10;                            &lt;textarea id=&quot;obstacle-description&quot; rows=&quot;3&quot; placeholder=&quot;Describe the obstacle and its impact on accessibility...&quot; required&gt;&lt;/textarea&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;h4&gt;Affects:&lt;/h4&gt;&#10;                            &lt;div class=&quot;checkbox-group&quot;&gt;&#10;                                &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                    &lt;input type=&quot;checkbox&quot; id=&quot;affects-wheelchair&quot; checked&gt;&#10;                                    &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                    Wheelchair users&#10;                                &lt;/label&gt;&#10;                                &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                    &lt;input type=&quot;checkbox&quot; id=&quot;affects-visually-impaired&quot;&gt;&#10;                                    &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                    Visually impaired&#10;                                &lt;/label&gt;&#10;                                &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                    &lt;input type=&quot;checkbox&quot; id=&quot;affects-mobility-aid&quot; checked&gt;&#10;                                    &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                    Mobility aid users&#10;                                &lt;/label&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;modal-actions&quot;&gt;&#10;                            &lt;button type=&quot;button&quot; class=&quot;secondary-btn&quot; id=&quot;cancel-obstacle&quot;&gt;Cancel&lt;/button&gt;&#10;                            &lt;button type=&quot;submit&quot; class=&quot;primary-btn&quot;&gt;Report Obstacle&lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/form&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div id=&quot;analytics-modal&quot; class=&quot;modal&quot; style=&quot;display: none;&quot;&gt;&#10;            &lt;div class=&quot;modal-content large&quot;&gt;&#10;                &lt;div class=&quot;modal-header&quot;&gt;&#10;                    &lt;h3&gt; Analytics Dashboard&lt;/h3&gt;&#10;                    &lt;button class=&quot;close-btn&quot; id=&quot;close-analytics-modal&quot;&gt;&amp;times;&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-body&quot;&gt;&#10;                    &lt;div id=&quot;analytics-content&quot;&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;script src='https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js'&gt;&lt;/script&gt;&#10;    &#10;    &lt;script src=&quot;src/services/api.js?v=11&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/components/MapboxMap.js?v=3&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/components/RouteDisplay.js?v=10&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/components/RouteInfoEnhancer.js?v=1&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/components/ObstacleReporter.js?v=8&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/components/Analytics.js?v=8&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;src/app.js?v=11&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/app.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/app.js" />
              <option name="originalContent" value="// Main Application Controller - Coordinates all components and handles app lifecycle&#10;&#10;class AuraApp {&#10;    constructor() {&#10;        this.isLoading = true;&#10;        this.currentRoute = null;&#10;        this.preferences = this.loadPreferences();&#10;        this.isCalculating = false; // Add flag to prevent multiple submissions&#10;        this.eventListenersSetup = false; // Prevent multiple event listener setup&#10;        &#10;        // Initialize components&#10;        this.routeDisplay = null;&#10;        this.obstacleReporter = null;&#10;        this.analytics = null;&#10;        &#10;        // Don't call init() here - it will be called manually after DOM is ready&#10;    }&#10;&#10;        // Initialize the app&#10;    async init() {&#10;        console.log(' Initializing Aura app...');&#10;        &#10;        this.debug('App initialization started');&#10;        &#10;        try {&#10;            // Initialize components first&#10;            await this.initializeComponents();&#10;            this.debug('Components initialized');&#10;            &#10;            // Setup demo data&#10;            this.setupDemoData();&#10;            this.debug('Demo data setup complete');&#10;            &#10;            // Setup event listeners after DOM is loaded&#10;            this.setupEventListeners();&#10;            this.debug('Event listeners setup complete');&#10;            &#10;            // Hide loading screen&#10;            this.hideLoadingScreen();&#10;            &#10;            // Show demo route after components are ready&#10;            setTimeout(() =&gt; {&#10;                // Only show demo route, don't auto-calculate&#10;                this.loadDemoLocationOnly();&#10;            }, 2000); // Increased delay to ensure components are ready&#10;            &#10;            console.log('✅ Aura app initialized successfully');&#10;            this.debug('✅ App initialization complete');&#10;            &#10;        } catch (error) {&#10;            console.error('❌ Error initializing app:', error);&#10;            this.debug('❌ Error: ' + error.message);&#10;        }&#10;    }&#10;&#10;    debug(message) {&#10;        // Simplified: log only (no DOM panel)&#10;        console.log(message);&#10;    }&#10;&#10;    // Show notification about routing method&#10;    showRoutingNotification(provider, usesRealRoads) {&#10;        let message, icon, className;&#10;        &#10;        if (provider === 'Mapbox' &amp;&amp; usesRealRoads) {&#10;            message = '️ Using Mapbox routing - Routes follow real roads and intersections';&#10;            icon = '✅';&#10;            className = 'notification-success';&#10;        } else if (provider === 'Road Network' &amp;&amp; usesRealRoads) {&#10;            message = '️ Using road network routing - Routes follow actual streets';&#10;            icon = '✅';&#10;            className = 'notification-success';&#10;        } else {&#10;            message = ' Using simplified routing - General direction guidance only';&#10;            icon = '⚠️';&#10;            className = 'notification-warning';&#10;        }&#10;        &#10;        this.showNotification(message, icon, className);&#10;    }&#10;&#10;    // Generic notification system&#10;    showNotification(message, icon = 'ℹ️', className = 'notification-info') {&#10;        const notificationContainer = document.getElementById('notifications') || this.createNotificationContainer();&#10;        &#10;        const notification = document.createElement('div');&#10;        notification.className = `route-notification ${className}`;&#10;        notification.innerHTML = `&#10;            &lt;div class=&quot;notification-content&quot;&gt;&#10;                &lt;span class=&quot;notification-icon&quot;&gt;${icon}&lt;/span&gt;&#10;                &lt;span class=&quot;notification-message&quot;&gt;${message}&lt;/span&gt;&#10;                &lt;button class=&quot;notification-close&quot; onclick=&quot;this.parentElement.parentElement.remove()&quot;&gt;×&lt;/button&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;        &#10;        notificationContainer.appendChild(notification);&#10;        &#10;        // Auto-remove after 8 seconds&#10;        setTimeout(() =&gt; {&#10;            if (notification.parentElement) {&#10;                notification.remove();&#10;            }&#10;        }, 8000);&#10;    }&#10;&#10;    createNotificationContainer() {&#10;        let container = document.getElementById('notifications');&#10;        if (!container) {&#10;            container = document.createElement('div');&#10;            container.id = 'notifications';&#10;            container.className = 'notifications-container';&#10;            document.body.appendChild(container);&#10;        }&#10;        return container;&#10;    }&#10;&#10;    // Show loading screen&#10;    showLoadingScreen() {&#10;        const loadingScreen = document.querySelector('.loading-screen');&#10;        if (loadingScreen) {&#10;            loadingScreen.style.display = 'flex';&#10;        }&#10;    }&#10;&#10;    // Hide loading screen&#10;    hideLoadingScreen() {&#10;        const loadingScreen = document.querySelector('.loading-screen');&#10;        const mainApp = document.querySelector('.main-app');&#10;        &#10;        if (loadingScreen) {&#10;            loadingScreen.style.animation = 'fadeOut 0.5s ease forwards';&#10;            setTimeout(() =&gt; {&#10;                loadingScreen.style.display = 'none';&#10;            }, 500);&#10;        }&#10;        &#10;        if (mainApp) {&#10;            mainApp.style.display = 'flex';&#10;            mainApp.style.animation = 'fadeIn 0.5s ease forwards';&#10;        }&#10;    }&#10;&#10;    // Initialize all components&#10;    async initializeComponents() {&#10;        this.debug('Initializing components...');&#10;        try {&#10;            // Route display uses Mapbox only&#10;            this.routeDisplay = new RouteDisplay();&#10;            &#10;            // Initialize Mapbox map early&#10;            if (typeof MapboxMap === 'function') {&#10;                if (!window.mapboxMap) window.mapboxMap = new MapboxMap();&#10;                await window.mapboxMap.init();&#10;            }&#10;            &#10;            // Initialize other components&#10;            this.obstacleReporter = new ObstacleReporter();&#10;            this.analytics = new Analytics();&#10;            &#10;            this.debug('All components initialized');&#10;            return true;&#10;        } catch (error) {&#10;            console.error('❌ Error initializing components:', error);&#10;            return false;&#10;        }&#10;    }&#10;&#10;    // Setup event listeners&#10;    setupEventListeners() {&#10;        // Prevent multiple setup&#10;        if (this.eventListenersSetup) {&#10;            this.debug('⚠️ Event listeners already setup, skipping...');&#10;            return;&#10;        }&#10;        &#10;        // Form submission&#10;        const routeForm = document.getElementById('route-form');&#10;        if (routeForm) {&#10;            this.debug('✅ Route form found, adding event listener');&#10;            // Remove any existing listeners first&#10;            routeForm.removeEventListener('submit', this.handleRouteCalculation);&#10;            routeForm.addEventListener('submit', (e) =&gt; {&#10;                e.preventDefault(); // Prevent default form submission immediately&#10;                this.debug(' Form submit event triggered!');&#10;                // Prevent multiple submissions&#10;                if (this.isCalculating) {&#10;                    this.debug('⚠️ Route calculation already in progress, ignoring duplicate submission');&#10;                    return;&#10;                }&#10;                this.handleRouteCalculation(e);&#10;            });&#10;        } else {&#10;            this.debug('❌ Route form not found!');&#10;        }&#10;&#10;        // Demo location buttons&#10;        document.addEventListener('click', (e) =&gt; {&#10;            if (e.target.classList.contains('demo-btn')) {&#10;                this.debug(` Demo button clicked: ${e.target.dataset.demo}`);&#10;                this.loadDemoLocation(e.target.dataset.demo);&#10;            }&#10;        });&#10;&#10;        // Input type radio buttons&#10;        document.addEventListener('change', (e) =&gt; {&#10;            if (e.target.type === 'radio' &amp;&amp; e.target.name.includes('input-type')) {&#10;                this.toggleInputType(e.target.name, e.target.value);&#10;            }&#10;        });&#10;&#10;        // Header action buttons&#10;        document.addEventListener('click', (e) =&gt; {&#10;            if (e.target.id === 'analyticsBtn') {&#10;                this.analytics.showDashboard();&#10;            } else if (e.target.id === 'reportObstacleBtn') {&#10;                this.obstacleReporter.showReportModal();&#10;            } else if (e.target.id === 'myReportsBtn') {&#10;                this.obstacleReporter.showMyReports();&#10;            } else if (e.target.id === 'settingsBtn') {&#10;                this.showSettings();&#10;            }&#10;        });&#10;&#10;        // Range input updates&#10;        document.addEventListener('input', (e) =&gt; {&#10;            if (e.target.type === 'range') {&#10;                // Handle max-slope range input specifically&#10;                if (e.target.id === 'max-slope') {&#10;                    const valueDisplay = document.getElementById('slope-value');&#10;                    if (valueDisplay) {&#10;                        valueDisplay.textContent = e.target.value + '%';&#10;                    }&#10;                } else {&#10;                    // Handle other range inputs generically&#10;                    const valueDisplay = document.getElementById(e.target.id + 'Value');&#10;                    if (valueDisplay) {&#10;                        valueDisplay.textContent = e.target.value;&#10;                    }&#10;                }&#10;            }&#10;        });&#10;&#10;        // Keyboard shortcuts&#10;        document.addEventListener('keydown', (e) =&gt; {&#10;            if (e.ctrlKey || e.metaKey) {&#10;                switch (e.key) {&#10;                    case 'r':&#10;                        e.preventDefault();&#10;                        this.obstacleReporter.showReportModal();&#10;                        break;&#10;                    case 'd':&#10;                        e.preventDefault();&#10;                        this.analytics.showDashboard();&#10;                        break;&#10;                }&#10;            }&#10;        });&#10;&#10;        console.log('✅ Event listeners setup complete');&#10;        this.eventListenersSetup = true; // Mark as setup&#10;    }&#10;&#10;    // Setup demo data&#10;    setupDemoData() {&#10;        // Define demo locations with addresses and coordinates&#10;        this.demoLocations = {&#10;            downtown: {&#10;                name: &quot;Downtown NYC Route&quot;,&#10;                start: { &#10;                    address: &quot;Times Square, New York, NY 10036&quot;,&#10;                    lat: 40.7589, &#10;                    lng: -73.9851 &#10;                },&#10;                end: { &#10;                    address: &quot;Penn Station, New York, NY 10001&quot;,&#10;                    lat: 40.7505, &#10;                    lng: -73.9934 &#10;                },&#10;                description: &quot;Times Square to Penn Station - Busy urban route&quot;&#10;            },&#10;            campus: {&#10;                name: &quot;University Campus Route&quot;,&#10;                start: { &#10;                    address: &quot;Columbia University, New York, NY 10027&quot;,&#10;                    lat: 40.8075, &#10;                    lng: -73.9626 &#10;                },&#10;                end: { &#10;                    address: &quot;Riverside Park, New York, NY 10025&quot;,&#10;                    lat: 40.8176, &#10;                    lng: -73.9482 &#10;                },&#10;                description: &quot;Columbia University to Riverside Park - Campus area&quot;&#10;            },&#10;            hospital: {&#10;                name: &quot;Medical Center Route&quot;,&#10;                start: { &#10;                    address: &quot;Mount Sinai Hospital, New York, NY 10029&quot;,&#10;                    lat: 40.7903, &#10;                    lng: -73.9531 &#10;                },&#10;                end: { &#10;                    address: &quot;Central Park East, New York, NY 10021&quot;,&#10;                    lat: 40.7831, &#10;                    lng: -73.9712 &#10;                },&#10;                description: &quot;Mount Sinai Hospital to Central Park - Medical district&quot;&#10;            },&#10;            shopping: {&#10;                name: &quot;Schaumburg to Woodfield Mall&quot;,&#10;                start: { &#10;                    address: &quot;Schaumburg, IL 60173&quot;,&#10;                    lat: 42.0334, &#10;                    lng: -88.0834 &#10;                },&#10;                end: { &#10;                    address: &quot;Woodfield Mall, Schaumburg, IL&quot;,&#10;                    lat: 42.0466, &#10;                    lng: -88.0371 &#10;                },&#10;                description: &quot;Schaumburg to Woodfield Mall - ~1 mile accessible route&quot;&#10;            }&#10;        };&#10;&#10;        console.log('✅ Demo data setup complete');&#10;    }&#10;&#10;    // Handle route calculation&#10;    async handleRouteCalculation(event) {&#10;        this.debug(' handleRouteCalculation called!');&#10;        event.preventDefault();&#10;        &#10;        // Prevent multiple submissions&#10;        if (this.isCalculating) {&#10;            this.debug('⚠️ Route calculation already in progress, ignoring duplicate submission');&#10;            return;&#10;        }&#10;        &#10;        this.isCalculating = true; // Set flag&#10;        &#10;        try {&#10;            this.debug(' Starting route calculation...');&#10;            &#10;            // Debug: Check if routeDisplay exists&#10;            this.debug(` RouteDisplay status: ${this.routeDisplay ? 'EXISTS' : 'NULL'}`);&#10;            console.log(' RouteDisplay object:', this.routeDisplay);&#10;            &#10;            if (!this.routeDisplay) {&#10;                this.debug('❌ RouteDisplay is null! Attempting to reinitialize...');&#10;                await this.initializeComponents();&#10;                if (!this.routeDisplay) {&#10;                    throw new Error('RouteDisplay component failed to initialize');&#10;                }&#10;            }&#10;            &#10;            // Show loading state&#10;            try {&#10;                this.routeDisplay.showLoading();&#10;                this.debug('✅ Loading state shown');&#10;            } catch (loadingError) {&#10;                this.debug('❌ Error showing loading: ' + loadingError.message);&#10;                throw loadingError;&#10;            }&#10;            &#10;            // Collect form data&#10;            const formData = this.collectFormData();&#10;            this.debug(' Form data collected: ' + JSON.stringify(formData).substring(0, 100) + '...');&#10;            &#10;            // Validate form data&#10;            if (!this.validateFormData(formData)) {&#10;                throw new Error('Please fill in all required fields');&#10;            }&#10;            this.debug('✅ Form data validated');&#10;&#10;            console.log(' Calculating route with data:', formData);&#10;&#10;            // Call backend API&#10;            this.debug(' Calling backend API...');&#10;            // Use centralized ApiService with timeout to avoid hanging forever&#10;            const routeData = await window.apiService.calculateRoute(formData);&#10;&#10;            console.log('✅ Route calculated successfully:', routeData);&#10;            this.debug('✅ Route data received');&#10;&#10;            // Enhance route display with routing method information&#10;            if (window.routeInfoEnhancer) {&#10;                const routingMethod = window.routeInfoEnhancer.enhanceRouteDisplay(routeData);&#10;                // RouteInfoEnhancer now handles all notifications - no need for duplicate&#10;            }&#10;&#10;            // Display results&#10;            this.routeDisplay.displayRoute(routeData);&#10;            this.debug('✅ Route displayed');&#10;            &#10;            // Record analytics&#10;            this.analytics.recordRoute({&#10;                success: true,&#10;                distance: routeData.distance,&#10;                accessibility_score: routeData.accessibility_score&#10;            });&#10;&#10;            // Save current route&#10;            this.currentRoute = routeData;&#10;&#10;        } catch (error) {&#10;            console.error('❌ Route calculation failed:', error);&#10;            this.debug('❌ Route calc error: ' + error.message);&#10;            &#10;            // Show error state&#10;            if (this.routeDisplay) {&#10;                this.routeDisplay.showError(error.message);&#10;            }&#10;            &#10;            // Record failed attempt&#10;            if (this.analytics) {&#10;                this.analytics.recordRoute({ success: false });&#10;            }&#10;            &#10;            // Show notification&#10;            this.showNotification('Failed to calculate route: ' + error.message, 'error');&#10;        } finally {&#10;            this.isCalculating = false; // Reset flag&#10;        }&#10;    }&#10;&#10;    // Collect form data&#10;    collectFormData() {&#10;        // Get coordinates (either from coordinate inputs or geocoded from addresses)&#10;        const startLat = parseFloat(document.getElementById('start-lat').value);&#10;        const startLng = parseFloat(document.getElementById('start-lon').value);&#10;        const endLat = parseFloat(document.getElementById('end-lat').value);&#10;        const endLng = parseFloat(document.getElementById('end-lon').value);&#10;&#10;        return {&#10;            start: {&#10;                latitude: startLat,&#10;                longitude: startLng&#10;            },&#10;            end: {&#10;                latitude: endLat,&#10;                longitude: endLng&#10;            },&#10;            accessibility_level: document.getElementById('accessibility-level')?.value || 'medium',&#10;            preferences: {&#10;                avoid_stairs: document.getElementById('avoid-stairs')?.checked || false,&#10;                avoid_steep_slopes: true, // Default to true&#10;                max_slope_percentage: parseFloat(document.getElementById('max-slope')?.value || 5),&#10;                require_curb_cuts: document.getElementById('require-curb-cuts')?.checked || false,&#10;                avoid_construction: document.getElementById('avoid-construction')?.checked || false,&#10;                prefer_wider_sidewalks: document.getElementById('prefer-wider-sidewalks')?.checked || false,&#10;                require_tactile_guidance: false, // Default&#10;                mobility_aid: document.getElementById('mobility-aid')?.value || 'none'&#10;            },&#10;            transport_mode: 'walking', // Default to walking&#10;            time_preference: 'balanced', // Default to balanced&#10;            user_id: null // Optional field&#10;        };&#10;    }&#10;&#10;    // Validate form data&#10;    validateFormData(data) {&#10;        // Check for required coordinates&#10;        if (isNaN(data.start.latitude) || isNaN(data.start.longitude) || &#10;            isNaN(data.end.latitude) || isNaN(data.end.longitude)) {&#10;            return false;&#10;        }&#10;&#10;        // Validate coordinate ranges&#10;        if (data.start.latitude &lt; -90 || data.start.latitude &gt; 90 ||&#10;            data.start.longitude &lt; -180 || data.start.longitude &gt; 180 ||&#10;            data.end.latitude &lt; -90 || data.end.latitude &gt; 90 ||&#10;            data.end.longitude &lt; -180 || data.end.longitude &gt; 180) {&#10;            return false;&#10;        }&#10;&#10;        return true;&#10;    }&#10;&#10;    // Load demo location&#10;    loadDemoLocation(demoKey) {&#10;        this.debug(` Loading demo: ${demoKey}`);&#10;        const demo = this.demoLocations[demoKey];&#10;        if (!demo) {&#10;            console.error('Demo location not found:', demoKey);&#10;            this.debug(`❌ Demo not found: ${demoKey}`);&#10;            return;&#10;        }&#10;&#10;        // Set start location&#10;        this.setLocationData('start', demo.start.address, demo.start.lat, demo.start.lng);&#10;        &#10;        // Set end location&#10;        this.setLocationData('end', demo.end.address, demo.end.lat, demo.end.lng);&#10;&#10;        // Clear any existing route display to force fresh calculation&#10;        if (this.routeDisplay &amp;&amp; this.routeDisplay.currentRoute) {&#10;            this.routeDisplay.currentRoute = null;&#10;            // Clear route results panel&#10;            const resultsPanel = document.getElementById('route-results');&#10;            if (resultsPanel) {&#10;                resultsPanel.innerHTML = '';&#10;            }&#10;            // Show welcome message again&#10;            const welcomeMessage = document.getElementById('welcome-message');&#10;            if (welcomeMessage) {&#10;                welcomeMessage.style.display = 'block';&#10;            }&#10;        }&#10;&#10;        // Show notification&#10;        this.showNotification(`Demo route loaded: ${demo.description}`, 'success');&#10;        &#10;        console.log(' Demo location loaded:', demo.name);&#10;        this.debug(`✅ Demo loaded: ${demo.name}`);&#10;    }&#10;&#10;    // Toggle between address and coordinate input&#10;    toggleInputType(inputName, inputType) {&#10;        const locationKey = inputName.includes('start') ? 'start' : 'end';&#10;        const addressInput = document.getElementById(`${locationKey}-address-input`);&#10;        const coordinateInput = document.getElementById(`${locationKey}-coordinate-input`);&#10;&#10;        if (inputType === 'address') {&#10;            addressInput.style.display = 'flex';&#10;            coordinateInput.style.display = 'none';&#10;        } else {&#10;            addressInput.style.display = 'none';&#10;            coordinateInput.style.display = 'grid';&#10;        }&#10;    }&#10;&#10;    // Set location data (address and coordinates)&#10;    setLocationData(locationKey, address, lat, lng) {&#10;        // Set address&#10;        const addressField = document.getElementById(`${locationKey}-address`);&#10;        if (addressField) {&#10;            addressField.value = address;&#10;        }&#10;&#10;        // Set coordinates&#10;        const latField = document.getElementById(`${locationKey}-lat`);&#10;        const lngField = document.getElementById(`${locationKey}-lon`);&#10;        if (latField &amp;&amp; lngField) {&#10;            latField.value = lat.toFixed(6);&#10;            lngField.value = lng.toFixed(6);&#10;        }&#10;&#10;        // Show location display&#10;        this.updateLocationDisplay(locationKey, address, lat, lng);&#10;    }&#10;&#10;    // Update location display&#10;    updateLocationDisplay(locationKey, address, lat, lng) {&#10;        const displayElement = document.getElementById(`${locationKey}-location-display`);&#10;        if (displayElement) {&#10;            displayElement.innerHTML = `&#10;                &lt;div class=&quot;location-address&quot;&gt;${address}&lt;/div&gt;&#10;                &lt;div class=&quot;location-coords&quot;&gt;${lat.toFixed(6)}, ${lng.toFixed(6)}&lt;/div&gt;&#10;            `;&#10;            displayElement.classList.add('active');&#10;        }&#10;    }&#10;&#10;    // Geocode address to coordinates&#10;    async geocodeAddress(locationKey) {&#10;        const addressField = document.getElementById(`${locationKey}-address`);&#10;        const address = addressField.value.trim();&#10;&#10;        if (!address) {&#10;            this.showNotification('Please enter an address', 'warning');&#10;            return;&#10;        }&#10;&#10;        const geocodeBtn = document.querySelector(`#${locationKey}-address-input .geocode-btn`);&#10;        const originalText = geocodeBtn.innerHTML;&#10;        geocodeBtn.innerHTML = '⏳ Finding...';&#10;        geocodeBtn.disabled = true;&#10;&#10;        try {&#10;            const result = await window.apiService.geocodeAddress(address);&#10;            &#10;            if (result.latitude &amp;&amp; result.longitude) {&#10;                this.setLocationData(locationKey, result.formatted_address || address, result.latitude, result.longitude);&#10;                this.showNotification('Location found successfully!', 'success');&#10;            } else {&#10;                throw new Error('Location not found');&#10;            }&#10;        } catch (error) {&#10;            console.error('Geocoding error:', error);&#10;            this.showNotification(`Could not find location: ${error.message}`, 'error');&#10;        } finally {&#10;            geocodeBtn.innerHTML = originalText;&#10;            geocodeBtn.disabled = false;&#10;        }&#10;    }&#10;&#10;    // Reverse geocode coordinates to address&#10;    async reverseGeocode(locationKey) {&#10;        const latField = document.getElementById(`${locationKey}-lat`);&#10;        const lngField = document.getElementById(`${locationKey}-lon`);&#10;        &#10;        const lat = parseFloat(latField.value);&#10;        const lng = parseFloat(lngField.value);&#10;&#10;        if (isNaN(lat) || isNaN(lng)) {&#10;            this.showNotification('Please enter valid coordinates', 'warning');&#10;            return;&#10;        }&#10;&#10;        const reverseBtn = document.querySelector(`#${locationKey}-coordinate-input .reverse-geocode-btn`);&#10;        const originalText = reverseBtn.innerHTML;&#10;        reverseBtn.innerHTML = '⏳ Finding...';&#10;        reverseBtn.disabled = true;&#10;&#10;        try {&#10;            const result = await window.apiService.reverseGeocode(lat, lng);&#10;            &#10;            if (result.address) {&#10;                const addressField = document.getElementById(`${locationKey}-address`);&#10;                if (addressField) {&#10;                    addressField.value = result.address;&#10;                }&#10;                this.updateLocationDisplay(locationKey, result.address, lat, lng);&#10;                this.showNotification('Address found successfully!', 'success');&#10;            } else {&#10;                throw new Error('Address not found');&#10;            }&#10;        } catch (error) {&#10;            console.error('Reverse geocoding error:', error);&#10;            this.showNotification(`Could not find address: ${error.message}`, 'error');&#10;        } finally {&#10;            reverseBtn.innerHTML = originalText;&#10;            reverseBtn.disabled = false;&#10;        }&#10;    }&#10;&#10;    // Show settings modal&#10;    showSettings() {&#10;        const modal = document.createElement('div');&#10;        modal.className = 'modal';&#10;        modal.innerHTML = `&#10;            &lt;div class=&quot;modal-content&quot;&gt;&#10;                &lt;div class=&quot;modal-header&quot;&gt;&#10;                    &lt;h3&gt;⚙️ Settings&lt;/h3&gt;&#10;                    &lt;button class=&quot;close-btn&quot; onclick=&quot;this.closest('.modal').remove()&quot;&gt;&amp;times;&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-body&quot;&gt;&#10;                    &lt;div class=&quot;settings-section&quot;&gt;&#10;                        &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt;Accessibility Preferences&lt;/h4&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;settingsTheme&quot;&gt;Theme&lt;/label&gt;&#10;                            &lt;select id=&quot;settingsTheme&quot;&gt;&#10;                                &lt;option value=&quot;auto&quot;&gt;Auto (System)&lt;/option&gt;&#10;                                &lt;option value=&quot;light&quot;&gt;Light&lt;/option&gt;&#10;                                &lt;option value=&quot;dark&quot;&gt;Dark&lt;/option&gt;&#10;                                &lt;option value=&quot;high-contrast&quot;&gt;High Contrast&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;settingsFontSize&quot;&gt;Font Size&lt;/label&gt;&#10;                            &lt;select id=&quot;settingsFontSize&quot;&gt;&#10;                                &lt;option value=&quot;small&quot;&gt;Small&lt;/option&gt;&#10;                                &lt;option value=&quot;medium&quot; selected&gt;Medium&lt;/option&gt;&#10;                                &lt;option value=&quot;large&quot;&gt;Large&lt;/option&gt;&#10;                                &lt;option value=&quot;extra-large&quot;&gt;Extra Large&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsReduceMotion&quot;&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Reduce motion and animations&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsHighContrast&quot;&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Enable high contrast mode&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsScreenReader&quot;&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Optimize for screen readers&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div class=&quot;settings-section&quot;&gt;&#10;                        &lt;h4 style=&quot;color: var(--primary-blue); margin: 2rem 0 1rem;&quot;&gt;Notification Preferences&lt;/h4&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsNotifications&quot; checked&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Enable notifications&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsSound&quot;&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Enable sound alerts&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div class=&quot;settings-section&quot;&gt;&#10;                        &lt;h4 style=&quot;color: var(--primary-blue); margin: 2rem 0 1rem;&quot;&gt;Data &amp; Privacy&lt;/h4&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsAnalytics&quot; checked&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Allow usage analytics&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsLocation&quot;&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Remember location preferences&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-actions&quot;&gt;&#10;                    &lt;button type=&quot;button&quot; class=&quot;secondary-btn&quot; onclick=&quot;app.resetSettings()&quot;&gt;&#10;                        Reset to Defaults&#10;                    &lt;/button&gt;&#10;                    &lt;button type=&quot;button&quot; class=&quot;primary-btn&quot; onclick=&quot;app.saveSettings()&quot;&gt;&#10;                        Save Settings&#10;                    &lt;/button&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        document.body.appendChild(modal);&#10;        this.loadCurrentSettings();&#10;    }&#10;&#10;    // Load current settings into the modal&#10;    loadCurrentSettings() {&#10;        Object.keys(this.preferences).forEach(key =&gt; {&#10;            const element = document.getElementById('settings' + key.charAt(0).toUpperCase() + key.slice(1));&#10;            if (element) {&#10;                if (element.type === 'checkbox') {&#10;                    element.checked = this.preferences[key];&#10;                } else {&#10;                    element.value = this.preferences[key];&#10;                }&#10;            }&#10;        });&#10;    }&#10;&#10;    // Save settings&#10;    saveSettings() {&#10;        const settings = {&#10;            theme: document.getElementById('settingsTheme').value,&#10;            fontSize: document.getElementById('settingsFontSize').value,&#10;            reduceMotion: document.getElementById('settingsReduceMotion').checked,&#10;            highContrast: document.getElementById('settingsHighContrast').checked,&#10;            screenReader: document.getElementById('settingsScreenReader').checked,&#10;            notifications: document.getElementById('settingsNotifications').checked,&#10;            sound: document.getElementById('settingsSound').checked,&#10;            analytics: document.getElementById('settingsAnalytics').checked,&#10;            location: document.getElementById('settingsLocation').checked&#10;        };&#10;&#10;        this.preferences = settings;&#10;        this.savePreferences();&#10;        this.applySettings();&#10;        &#10;        // Close modal&#10;        document.querySelector('.modal').remove();&#10;        &#10;        this.showNotification('Settings saved successfully!', 'success');&#10;    }&#10;&#10;    // Reset settings to defaults&#10;    resetSettings() {&#10;        if (confirm('Reset all settings to defaults?')) {&#10;            this.preferences = this.getDefaultPreferences();&#10;            this.savePreferences();&#10;            this.applySettings();&#10;            this.loadCurrentSettings();&#10;            this.showNotification('Settings reset to defaults', 'success');&#10;        }&#10;    }&#10;&#10;    // Apply settings to the application&#10;    applySettings() {&#10;        const body = document.body;&#10;        &#10;        // Apply theme&#10;        body.className = body.className.replace(/theme-\w+/g, '');&#10;        if (this.preferences.theme !== 'auto') {&#10;            body.classList.add(`theme-${this.preferences.theme}`);&#10;        }&#10;&#10;        // Apply font size&#10;        body.className = body.className.replace(/font-size-\w+/g, '');&#10;        body.classList.add(`font-size-${this.preferences.fontSize}`);&#10;&#10;        // Apply accessibility settings&#10;        if (this.preferences.reduceMotion) {&#10;            body.classList.add('reduce-motion');&#10;        } else {&#10;            body.classList.remove('reduce-motion');&#10;        }&#10;&#10;        if (this.preferences.highContrast) {&#10;            body.classList.add('high-contrast');&#10;        } else {&#10;            body.classList.remove('high-contrast');&#10;        }&#10;    }&#10;&#10;    // Load preferences from localStorage&#10;    loadPreferences() {&#10;        try {&#10;            const stored = localStorage.getItem('aura_preferences');&#10;            return stored ? JSON.parse(stored) : this.getDefaultPreferences();&#10;        } catch (error) {&#10;            console.error('Error loading preferences:', error);&#10;            return this.getDefaultPreferences();&#10;        }&#10;    }&#10;&#10;    // Get default preferences&#10;    getDefaultPreferences() {&#10;        return {&#10;            theme: 'auto',&#10;            fontSize: 'medium',&#10;            reduceMotion: false,&#10;            highContrast: false,&#10;            screenReader: false,&#10;            notifications: true,&#10;            sound: false,&#10;            analytics: true,&#10;            location: false&#10;        };&#10;    }&#10;&#10;    // Save preferences to localStorage&#10;    savePreferences() {&#10;        try {&#10;            localStorage.setItem('aura_preferences', JSON.stringify(this.preferences));&#10;        } catch (error) {&#10;            console.error('Error saving preferences:', error);&#10;        }&#10;    }&#10;&#10;    // Show notification&#10;    showNotification(message, type = 'info') {&#10;        if (!this.preferences.notifications) return;&#10;&#10;        const notification = document.createElement('div');&#10;        const colors = {&#10;            'success': 'var(--success-green)',&#10;            'error': 'var(--error-red)',&#10;            'warning': 'var(--warning-orange)',&#10;            'info': 'var(--info-blue)'&#10;        };&#10;        &#10;        notification.style.cssText = `&#10;            position: fixed;&#10;            top: 20px;&#10;            right: 20px;&#10;            background: ${colors[type]};&#10;            color: white;&#10;            padding: 1rem 1.5rem;&#10;            border-radius: var(--border-radius-md);&#10;            box-shadow: var(--shadow-lg);&#10;            z-index: 10000;&#10;            max-width: 400px;&#10;            animation: slideIn 0.3s ease;&#10;        `;&#10;        notification.textContent = message;&#10;        &#10;        document.body.appendChild(notification);&#10;        &#10;        // Play sound if enabled&#10;        if (this.preferences.sound &amp;&amp; type === 'error') {&#10;            // Would play error sound&#10;        }&#10;        &#10;        setTimeout(() =&gt; {&#10;            notification.style.animation = 'slideOut 0.3s ease forwards';&#10;            setTimeout(() =&gt; {&#10;                if (notification.parentNode) {&#10;                    document.body.removeChild(notification);&#10;                }&#10;            }, 300);&#10;        }, 4000);&#10;    }&#10;&#10;    // Get application status&#10;    getStatus() {&#10;        return {&#10;            version: '1.0.0',&#10;            initialized: !this.isLoading,&#10;            currentRoute: this.currentRoute !== null,&#10;            components: {&#10;                routeDisplay: this.routeDisplay !== null,&#10;                obstacleReporter: this.obstacleReporter !== null,&#10;                analytics: this.analytics !== null&#10;            },&#10;            preferences: this.preferences&#10;        };&#10;    }&#10;&#10;    // Load demo location only (without auto-calculating route)&#10;    loadDemoLocationOnly() {&#10;        console.log('️ Loading demo location only (no auto-calculation)...');&#10;        &#10;        // Just load the shopping demo coordinates without calculating route&#10;        this.loadDemoLocation('shopping');&#10;        this.debug('Demo location loaded, ready for user to calculate route');&#10;    }&#10;}&#10;&#10;// Add CSS animations and theme support&#10;const appStyles = document.createElement('style');&#10;appStyles.textContent = `&#10;    @keyframes fadeIn {&#10;        from { opacity: 0; }&#10;        to { opacity: 1; }&#10;    }&#10;    &#10;    @keyframes fadeOut {&#10;        from { opacity: 1; }&#10;        to { opacity: 0; }&#10;    }&#10;    &#10;    .main-app {&#10;        display: none;&#10;    }&#10;    &#10;    /* Theme support */&#10;    .theme-dark {&#10;        --white: #1a1a1a;&#10;        --light-gray: #2d2d2d;&#10;        --medium-gray: #404040;&#10;        --dark-gray: #a0a0a0;&#10;        --darker-gray: #d0d0d0;&#10;        --black: #ffffff;&#10;    }&#10;    &#10;    .theme-high-contrast {&#10;        --primary-blue: #0066cc;&#10;        --primary-purple: #6600cc;&#10;        --white: #ffffff;&#10;        --black: #000000;&#10;        --medium-gray: #666666;&#10;    }&#10;    &#10;    /* Font size support */&#10;    .font-size-small { font-size: 14px; }&#10;    .font-size-medium { font-size: 16px; }&#10;    .font-size-large { font-size: 18px; }&#10;    .font-size-extra-large { font-size: 22px; }&#10;    &#10;    /* Accessibility support */&#10;    .reduce-motion *, .reduce-motion *::before, .reduce-motion *::after {&#10;        animation-duration: 0.01ms !important;&#10;        animation-iteration-count: 1 !important;&#10;        transition-duration: 0.01ms !important;&#10;    }&#10;    &#10;    .high-contrast {&#10;        filter: contrast(150%);&#10;    }&#10;    &#10;    .high-contrast button, .high-contrast input, .high-contrast select {&#10;        border-width: 2px !important;&#10;    }&#10;`;&#10;&#10;document.head.appendChild(appStyles);&#10;&#10;// Initialize the application when DOM and all scripts are ready&#10;document.addEventListener('DOMContentLoaded', async () =&gt; {&#10;    console.log(' DOM loaded, waiting for all scripts...');&#10;    &#10;    let retries = 0; const maxRetries = 20;&#10;    while (retries &lt; maxRetries) {&#10;        const allScriptsLoaded = (&#10;            typeof RouteDisplay !== 'undefined' &amp;&amp;&#10;            typeof ObstacleReporter !== 'undefined' &amp;&amp;&#10;            typeof Analytics !== 'undefined' &amp;&amp;&#10;            typeof mapboxgl !== 'undefined' // Mapbox&#10;        );&#10;        if (allScriptsLoaded) break;&#10;        await new Promise(r =&gt; setTimeout(r, 100));&#10;        retries++;&#10;    }&#10;    if (retries &gt;= maxRetries) console.error('❌ Some scripts failed to load');&#10;    &#10;    window.app = new AuraApp();&#10;    window.app.init();&#10;});&#10;&#10;// Global functions for geocoding (called from HTML)&#10;window.geocodeAddress = async function(locationKey) {&#10;    if (window.app) {&#10;        return window.app.geocodeAddress(locationKey);&#10;    }&#10;};&#10;&#10;window.reverseGeocode = async function(locationKey) {&#10;    if (window.app) {&#10;        return window.app.reverseGeocode(locationKey);&#10;    }&#10;};&#10;&#10;// Export for global access&#10;window.AuraApp = AuraApp;&#10;" />
              <option name="updatedContent" value="class AuraApp {&#10;    constructor() {&#10;        this.isLoading = true;&#10;        this.currentRoute = null;&#10;        this.preferences = this.loadPreferences();&#10;        this.isCalculating = false;&#10;        this.eventListenersSetup = false;&#10;        &#10;        this.routeDisplay = null;&#10;        this.obstacleReporter = null;&#10;        this.analytics = null;&#10;    }&#10;&#10;    async init() {&#10;        console.log(' Initializing Aura app...');&#10;        &#10;        this.debug('App initialization started');&#10;        &#10;        try {&#10;            await this.initializeComponents();&#10;            this.debug('Components initialized');&#10;            &#10;            this.setupDemoData();&#10;            this.debug('Demo data setup complete');&#10;            &#10;            this.setupEventListeners();&#10;            this.debug('Event listeners setup complete');&#10;            &#10;            this.hideLoadingScreen();&#10;            &#10;            setTimeout(() =&gt; {&#10;                this.loadDemoLocationOnly();&#10;            }, 2000);&#10;            &#10;            console.log('✅ Aura app initialized successfully');&#10;            this.debug('✅ App initialization complete');&#10;            &#10;        } catch (error) {&#10;            console.error('❌ Error initializing app:', error);&#10;            this.showError('Failed to initialize application. Please refresh the page.');&#10;        }&#10;    }&#10;&#10;    debug(message) {&#10;        console.log(message);&#10;    }&#10;&#10;    showRoutingNotification(provider, usesRealRoads) {&#10;        let message, icon, className;&#10;        &#10;        if (provider === 'Mapbox' &amp;&amp; usesRealRoads) {&#10;            message = '️ Using Mapbox routing - Routes follow real roads and intersections';&#10;            icon = '✅';&#10;            className = 'notification-success';&#10;        } else if (provider === 'Road Network' &amp;&amp; usesRealRoads) {&#10;            message = '️ Using road network routing - Routes follow actual streets';&#10;            icon = '✅';&#10;            className = 'notification-success';&#10;        } else {&#10;            message = ' Using simplified routing - General direction guidance only';&#10;            icon = '⚠️';&#10;            className = 'notification-warning';&#10;        }&#10;        &#10;        this.showNotification(message, icon, className);&#10;    }&#10;&#10;    showNotification(message, icon = 'ℹ️', className = 'notification-info') {&#10;        const notificationContainer = document.getElementById('notifications') || this.createNotificationContainer();&#10;        &#10;        const notification = document.createElement('div');&#10;        notification.className = `route-notification ${className}`;&#10;        notification.innerHTML = `&#10;            &lt;div class=&quot;notification-content&quot;&gt;&#10;                &lt;span class=&quot;notification-icon&quot;&gt;${icon}&lt;/span&gt;&#10;                &lt;span class=&quot;notification-message&quot;&gt;${message}&lt;/span&gt;&#10;                &lt;button class=&quot;notification-close&quot; onclick=&quot;this.parentElement.parentElement.remove()&quot;&gt;×&lt;/button&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;        &#10;        notificationContainer.appendChild(notification);&#10;        &#10;        setTimeout(() =&gt; {&#10;            if (notification.parentElement) {&#10;                notification.remove();&#10;            }&#10;        }, 8000);&#10;    }&#10;&#10;    createNotificationContainer() {&#10;        let container = document.getElementById('notifications');&#10;        if (!container) {&#10;            container = document.createElement('div');&#10;            container.id = 'notifications';&#10;            container.className = 'notifications-container';&#10;            document.body.appendChild(container);&#10;        }&#10;        return container;&#10;    }&#10;&#10;    showLoadingScreen() {&#10;        const loadingScreen = document.querySelector('.loading-screen');&#10;        if (loadingScreen) {&#10;            loadingScreen.style.display = 'flex';&#10;        }&#10;    }&#10;&#10;    hideLoadingScreen() {&#10;        const loadingScreen = document.querySelector('.loading-screen');&#10;        const mainApp = document.querySelector('.main-app');&#10;        &#10;        if (loadingScreen) {&#10;            loadingScreen.style.animation = 'fadeOut 0.5s ease forwards';&#10;            setTimeout(() =&gt; {&#10;                loadingScreen.style.display = 'none';&#10;            }, 500);&#10;        }&#10;        &#10;        if (mainApp) {&#10;            mainApp.style.display = 'flex';&#10;            mainApp.style.animation = 'fadeIn 0.5s ease forwards';&#10;        }&#10;    }&#10;&#10;    async initializeComponents() {&#10;        this.debug('Initializing components...');&#10;        try {&#10;            this.routeDisplay = new RouteDisplay();&#10;            &#10;            if (typeof MapboxMap === 'function') {&#10;                if (!window.mapboxMap) window.mapboxMap = new MapboxMap();&#10;                await window.mapboxMap.init();&#10;            }&#10;            &#10;            this.obstacleReporter = new ObstacleReporter();&#10;            this.analytics = new Analytics();&#10;            &#10;            this.debug('All components initialized');&#10;            return true;&#10;        } catch (error) {&#10;            console.error('❌ Error initializing components:', error);&#10;            return false;&#10;        }&#10;    }&#10;&#10;    setupEventListeners() {&#10;        if (this.eventListenersSetup) {&#10;            this.debug('⚠️ Event listeners already setup, skipping...');&#10;            return;&#10;        }&#10;        &#10;        const routeForm = document.getElementById('route-form');&#10;        if (routeForm) {&#10;            this.debug('✅ Route form found, adding event listener');&#10;            routeForm.removeEventListener('submit', this.handleRouteCalculation);&#10;            routeForm.addEventListener('submit', (e) =&gt; {&#10;                e.preventDefault();&#10;                this.debug(' Form submit event triggered!');&#10;                if (this.isCalculating) {&#10;                    this.debug('⚠️ Route calculation already in progress, ignoring duplicate submission');&#10;                    return;&#10;                }&#10;                this.handleRouteCalculation(e);&#10;            });&#10;        } else {&#10;            this.debug('❌ Route form not found!');&#10;        }&#10;&#10;        document.addEventListener('click', (e) =&gt; {&#10;            if (e.target.classList.contains('demo-btn')) {&#10;                this.debug(` Demo button clicked: ${e.target.dataset.demo}`);&#10;                this.loadDemoLocation(e.target.dataset.demo);&#10;            }&#10;        });&#10;&#10;        document.addEventListener('change', (e) =&gt; {&#10;            if (e.target.type === 'radio' &amp;&amp; e.target.name.includes('input-type')) {&#10;                this.toggleInputType(e.target.name, e.target.value);&#10;            }&#10;        });&#10;&#10;        document.addEventListener('click', (e) =&gt; {&#10;            if (e.target.id === 'analyticsBtn') {&#10;                this.analytics.showDashboard();&#10;            } else if (e.target.id === 'reportObstacleBtn') {&#10;                this.obstacleReporter.showReportModal();&#10;            } else if (e.target.id === 'myReportsBtn') {&#10;                this.obstacleReporter.showMyReports();&#10;            } else if (e.target.id === 'settingsBtn') {&#10;                this.showSettings();&#10;            }&#10;        });&#10;&#10;        document.addEventListener('input', (e) =&gt; {&#10;            if (e.target.type === 'range') {&#10;                if (e.target.id === 'max-slope') {&#10;                    const valueDisplay = document.getElementById('slope-value');&#10;                    if (valueDisplay) {&#10;                        valueDisplay.textContent = e.target.value + '%';&#10;                    }&#10;                } else {&#10;                    const valueDisplay = document.getElementById(e.target.id + 'Value');&#10;                    if (valueDisplay) {&#10;                        valueDisplay.textContent = e.target.value;&#10;                    }&#10;                }&#10;            }&#10;        });&#10;&#10;        document.addEventListener('keydown', (e) =&gt; {&#10;            if (e.ctrlKey || e.metaKey) {&#10;                switch (e.key) {&#10;                    case 'r':&#10;                        e.preventDefault();&#10;                        this.obstacleReporter.showReportModal();&#10;                        break;&#10;                    case 'd':&#10;                        e.preventDefault();&#10;                        this.analytics.showDashboard();&#10;                        break;&#10;                }&#10;            }&#10;        });&#10;&#10;        console.log('✅ Event listeners setup complete');&#10;        this.eventListenersSetup = true;&#10;    }&#10;&#10;    setupDemoData() {&#10;        this.demoLocations = {&#10;            downtown: {&#10;                name: &quot;Downtown NYC Route&quot;,&#10;                start: { &#10;                    address: &quot;Times Square, New York, NY 10036&quot;,&#10;                    lat: 40.7589, &#10;                    lng: -73.9851 &#10;                },&#10;                end: { &#10;                    address: &quot;Penn Station, New York, NY 10001&quot;,&#10;                    lat: 40.7505, &#10;                    lng: -73.9934 &#10;                },&#10;                description: &quot;Times Square to Penn Station - Busy urban route&quot;&#10;            },&#10;            campus: {&#10;                name: &quot;University Campus Route&quot;,&#10;                start: { &#10;                    address: &quot;Columbia University, New York, NY 10027&quot;,&#10;                    lat: 40.8075, &#10;                    lng: -73.9626 &#10;                },&#10;                end: { &#10;                    address: &quot;Riverside Park, New York, NY 10025&quot;,&#10;                    lat: 40.8176, &#10;                    lng: -73.9482 &#10;                },&#10;                description: &quot;Columbia University to Riverside Park - Campus area&quot;&#10;            },&#10;            hospital: {&#10;                name: &quot;Medical Center Route&quot;,&#10;                start: { &#10;                    address: &quot;Mount Sinai Hospital, New York, NY 10029&quot;,&#10;                    lat: 40.7903, &#10;                    lng: -73.9531 &#10;                },&#10;                end: { &#10;                    address: &quot;Central Park East, New York, NY 10021&quot;,&#10;                    lat: 40.7831, &#10;                    lng: -73.9712 &#10;                },&#10;                description: &quot;Mount Sinai Hospital to Central Park - Medical district&quot;&#10;            },&#10;            shopping: {&#10;                name: &quot;Schaumburg to Woodfield Mall&quot;,&#10;                start: { &#10;                    address: &quot;Schaumburg, IL 60173&quot;,&#10;                    lat: 42.0334, &#10;                    lng: -88.0834 &#10;                },&#10;                end: { &#10;                    address: &quot;Woodfield Mall, Schaumburg, IL&quot;,&#10;                    lat: 42.0466, &#10;                    lng: -88.0371 &#10;                },&#10;                description: &quot;Schaumburg to Woodfield Mall - ~1 mile accessible route&quot;&#10;            }&#10;        };&#10;&#10;        console.log('✅ Demo data setup complete');&#10;    }&#10;&#10;    async handleRouteCalculation(event) {&#10;        this.debug(' handleRouteCalculation called!');&#10;        event.preventDefault();&#10;        &#10;        if (this.isCalculating) {&#10;            this.debug('⚠️ Route calculation already in progress, ignoring duplicate submission');&#10;            return;&#10;        }&#10;        &#10;        this.isCalculating = true;&#10;        &#10;        try {&#10;            this.debug(' Starting route calculation...');&#10;            &#10;            this.debug(` RouteDisplay status: ${this.routeDisplay ? 'EXISTS' : 'NULL'}`);&#10;            console.log(' RouteDisplay object:', this.routeDisplay);&#10;            &#10;            if (!this.routeDisplay) {&#10;                this.debug('❌ RouteDisplay is null! Attempting to reinitialize...');&#10;                await this.initializeComponents();&#10;                if (!this.routeDisplay) {&#10;                    throw new Error('RouteDisplay component failed to initialize');&#10;                }&#10;            }&#10;            &#10;            try {&#10;                this.routeDisplay.showLoading();&#10;                this.debug('✅ Loading state shown');&#10;            } catch (loadingError) {&#10;                this.debug('❌ Error showing loading: ' + loadingError.message);&#10;                throw loadingError;&#10;            }&#10;            &#10;            const formData = this.collectFormData();&#10;            this.debug(' Form data collected: ' + JSON.stringify(formData).substring(0, 100) + '...');&#10;            &#10;            if (!this.validateFormData(formData)) {&#10;                throw new Error('Please fill in all required fields');&#10;            }&#10;            this.debug('✅ Form data validated');&#10;&#10;            console.log(' Calculating route with data:', formData);&#10;&#10;            this.debug(' Calling backend API...');&#10;            const routeData = await window.apiService.calculateRoute(formData);&#10;&#10;            console.log('✅ Route calculated successfully:', routeData);&#10;            this.debug('✅ Route data received');&#10;&#10;            if (window.routeInfoEnhancer) {&#10;                const routingMethod = window.routeInfoEnhancer.enhanceRouteDisplay(routeData);&#10;            }&#10;&#10;            this.routeDisplay.displayRoute(routeData);&#10;            this.debug('✅ Route displayed');&#10;            &#10;            this.analytics.recordRoute({&#10;                success: true,&#10;                distance: routeData.distance,&#10;                accessibility_score: routeData.accessibility_score&#10;            });&#10;&#10;            this.currentRoute = routeData;&#10;&#10;        } catch (error) {&#10;            console.error('❌ Route calculation failed:', error);&#10;            this.debug('❌ Route calc error: ' + error.message);&#10;            &#10;            if (this.routeDisplay) {&#10;                this.routeDisplay.showError(error.message);&#10;            }&#10;            &#10;            if (this.analytics) {&#10;                this.analytics.recordRoute({ success: false });&#10;            }&#10;            &#10;            this.showNotification('Failed to calculate route: ' + error.message, 'error');&#10;        } finally {&#10;            this.isCalculating = false;&#10;        }&#10;    }&#10;&#10;    collectFormData() {&#10;        const startLat = parseFloat(document.getElementById('start-lat').value);&#10;        const startLng = parseFloat(document.getElementById('start-lon').value);&#10;        const endLat = parseFloat(document.getElementById('end-lat').value);&#10;        const endLng = parseFloat(document.getElementById('end-lon').value);&#10;&#10;        return {&#10;            start: {&#10;                latitude: startLat,&#10;                longitude: startLng&#10;            },&#10;            end: {&#10;                latitude: endLat,&#10;                longitude: endLng&#10;            },&#10;            accessibility_level: document.getElementById('accessibility-level')?.value || 'medium',&#10;            preferences: {&#10;                avoid_stairs: document.getElementById('avoid-stairs')?.checked || false,&#10;                avoid_steep_slopes: true,&#10;                max_slope_percentage: parseFloat(document.getElementById('max-slope')?.value || 5),&#10;                require_curb_cuts: document.getElementById('require-curb-cuts')?.checked || false,&#10;                avoid_construction: document.getElementById('avoid-construction')?.checked || false,&#10;                prefer_wider_sidewalks: document.getElementById('prefer-wider-sidewalks')?.checked || false,&#10;                require_tactile_guidance: false,&#10;                mobility_aid: document.getElementById('mobility-aid')?.value || 'none'&#10;            },&#10;            transport_mode: 'walking',&#10;            time_preference: 'balanced',&#10;            user_id: null&#10;        };&#10;    }&#10;&#10;    validateFormData(data) {&#10;        if (isNaN(data.start.latitude) || isNaN(data.start.longitude) || &#10;            isNaN(data.end.latitude) || isNaN(data.end.longitude)) {&#10;            return false;&#10;        }&#10;&#10;        if (data.start.latitude &lt; -90 || data.start.latitude &gt; 90 ||&#10;            data.start.longitude &lt; -180 || data.start.longitude &gt; 180 ||&#10;            data.end.latitude &lt; -90 || data.end.latitude &gt; 90 ||&#10;            data.end.longitude &lt; -180 || data.end.longitude &gt; 180) {&#10;            return false;&#10;        }&#10;&#10;        return true;&#10;    }&#10;&#10;    loadDemoLocation(demoKey) {&#10;        this.debug(` Loading demo: ${demoKey}`);&#10;        const demo = this.demoLocations[demoKey];&#10;        if (!demo) {&#10;            console.error('Demo location not found:', demoKey);&#10;            this.debug(`❌ Demo not found: ${demoKey}`);&#10;            return;&#10;        }&#10;&#10;        this.setLocationData('start', demo.start.address, demo.start.lat, demo.start.lng);&#10;        this.setLocationData('end', demo.end.address, demo.end.lat, demo.end.lng);&#10;&#10;        if (this.routeDisplay &amp;&amp; this.routeDisplay.currentRoute) {&#10;            this.routeDisplay.currentRoute = null;&#10;            const resultsPanel = document.getElementById('route-results');&#10;            if (resultsPanel) {&#10;                resultsPanel.innerHTML = '';&#10;            }&#10;            const welcomeMessage = document.getElementById('welcome-message');&#10;            if (welcomeMessage) {&#10;                welcomeMessage.style.display = 'block';&#10;            }&#10;        }&#10;&#10;        this.showNotification(`Demo route loaded: ${demo.description}`, 'success');&#10;        &#10;        console.log(' Demo location loaded:', demo.name);&#10;        this.debug(`✅ Demo loaded: ${demo.name}`);&#10;    }&#10;&#10;    toggleInputType(inputName, inputType) {&#10;        const locationKey = inputName.includes('start') ? 'start' : 'end';&#10;        const addressInput = document.getElementById(`${locationKey}-address-input`);&#10;        const coordinateInput = document.getElementById(`${locationKey}-coordinate-input`);&#10;&#10;        if (inputType === 'address') {&#10;            addressInput.style.display = 'flex';&#10;            coordinateInput.style.display = 'none';&#10;        } else {&#10;            addressInput.style.display = 'none';&#10;            coordinateInput.style.display = 'grid';&#10;        }&#10;    }&#10;&#10;    setLocationData(locationKey, address, lat, lng) {&#10;        const addressField = document.getElementById(`${locationKey}-address`);&#10;        if (addressField) {&#10;            addressField.value = address;&#10;        }&#10;&#10;        const latField = document.getElementById(`${locationKey}-lat`);&#10;        const lngField = document.getElementById(`${locationKey}-lon`);&#10;        if (latField &amp;&amp; lngField) {&#10;            latField.value = lat.toFixed(6);&#10;            lngField.value = lng.toFixed(6);&#10;        }&#10;&#10;        this.updateLocationDisplay(locationKey, address, lat, lng);&#10;    }&#10;&#10;    updateLocationDisplay(locationKey, address, lat, lng) {&#10;        const displayElement = document.getElementById(`${locationKey}-location-display`);&#10;        if (displayElement) {&#10;            displayElement.innerHTML = `&#10;                &lt;div class=&quot;location-address&quot;&gt;${address}&lt;/div&gt;&#10;                &lt;div class=&quot;location-coords&quot;&gt;${lat.toFixed(6)}, ${lng.toFixed(6)}&lt;/div&gt;&#10;            `;&#10;            displayElement.classList.add('active');&#10;        }&#10;    }&#10;&#10;    async geocodeAddress(locationKey) {&#10;        const addressField = document.getElementById(`${locationKey}-address`);&#10;        const address = addressField.value.trim();&#10;&#10;        if (!address) {&#10;            this.showNotification('Please enter an address', 'warning');&#10;            return;&#10;        }&#10;&#10;        const geocodeBtn = document.querySelector(`#${locationKey}-address-input .geocode-btn`);&#10;        const originalText = geocodeBtn.innerHTML;&#10;        geocodeBtn.innerHTML = '⏳ Finding...';&#10;        geocodeBtn.disabled = true;&#10;&#10;        try {&#10;            const result = await window.apiService.geocodeAddress(address);&#10;            &#10;            if (result.latitude &amp;&amp; result.longitude) {&#10;                this.setLocationData(locationKey, result.formatted_address || address, result.latitude, result.longitude);&#10;                this.showNotification('Location found successfully!', 'success');&#10;            } else {&#10;                throw new Error('Location not found');&#10;            }&#10;        } catch (error) {&#10;            console.error('Geocoding error:', error);&#10;            this.showNotification(`Could not find location: ${error.message}`, 'error');&#10;        } finally {&#10;            geocodeBtn.innerHTML = originalText;&#10;            geocodeBtn.disabled = false;&#10;        }&#10;    }&#10;&#10;    async reverseGeocode(locationKey) {&#10;        const latField = document.getElementById(`${locationKey}-lat`);&#10;        const lngField = document.getElementById(`${locationKey}-lon`);&#10;        &#10;        const lat = parseFloat(latField.value);&#10;        const lng = parseFloat(lngField.value);&#10;&#10;        if (isNaN(lat) || isNaN(lng)) {&#10;            this.showNotification('Please enter valid coordinates', 'warning');&#10;            return;&#10;        }&#10;&#10;        const reverseBtn = document.querySelector(`#${locationKey}-coordinate-input .reverse-geocode-btn`);&#10;        const originalText = reverseBtn.innerHTML;&#10;        reverseBtn.innerHTML = '⏳ Finding...';&#10;        reverseBtn.disabled = true;&#10;&#10;        try {&#10;            const result = await window.apiService.reverseGeocode(lat, lng);&#10;            &#10;            if (result.address) {&#10;                const addressField = document.getElementById(`${locationKey}-address`);&#10;                if (addressField) {&#10;                    addressField.value = result.address;&#10;                }&#10;                this.updateLocationDisplay(locationKey, result.address, lat, lng);&#10;                this.showNotification('Address found successfully!', 'success');&#10;            } else {&#10;                throw new Error('Address not found');&#10;            }&#10;        } catch (error) {&#10;            console.error('Reverse geocoding error:', error);&#10;            this.showNotification(`Could not find address: ${error.message}`, 'error');&#10;        } finally {&#10;            reverseBtn.innerHTML = originalText;&#10;            reverseBtn.disabled = false;&#10;        }&#10;    }&#10;&#10;    showSettings() {&#10;        const modal = document.createElement('div');&#10;        modal.className = 'modal';&#10;        modal.innerHTML = `&#10;            &lt;div class=&quot;modal-content&quot;&gt;&#10;                &lt;div class=&quot;modal-header&quot;&gt;&#10;                    &lt;h3&gt;⚙️ Settings&lt;/h3&gt;&#10;                    &lt;button class=&quot;close-btn&quot; onclick=&quot;this.closest('.modal').remove()&quot;&gt;&amp;times;&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-body&quot;&gt;&#10;                    &lt;div class=&quot;settings-section&quot;&gt;&#10;                        &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt;Accessibility Preferences&lt;/h4&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;settingsTheme&quot;&gt;Theme&lt;/label&gt;&#10;                            &lt;select id=&quot;settingsTheme&quot;&gt;&#10;                                &lt;option value=&quot;auto&quot;&gt;Auto (System)&lt;/option&gt;&#10;                                &lt;option value=&quot;light&quot;&gt;Light&lt;/option&gt;&#10;                                &lt;option value=&quot;dark&quot;&gt;Dark&lt;/option&gt;&#10;                                &lt;option value=&quot;high-contrast&quot;&gt;High Contrast&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;settingsFontSize&quot;&gt;Font Size&lt;/label&gt;&#10;                            &lt;select id=&quot;settingsFontSize&quot;&gt;&#10;                                &lt;option value=&quot;small&quot;&gt;Small&lt;/option&gt;&#10;                                &lt;option value=&quot;medium&quot; selected&gt;Medium&lt;/option&gt;&#10;                                &lt;option value=&quot;large&quot;&gt;Large&lt;/option&gt;&#10;                                &lt;option value=&quot;extra-large&quot;&gt;Extra Large&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsReduceMotion&quot;&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Reduce motion and animations&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsHighContrast&quot;&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Enable high contrast mode&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsScreenReader&quot;&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Optimize for screen readers&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div class=&quot;settings-section&quot;&gt;&#10;                        &lt;h4 style=&quot;color: var(--primary-blue); margin: 2rem 0 1rem;&quot;&gt;Notification Preferences&lt;/h4&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsNotifications&quot; checked&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Enable notifications&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsSound&quot;&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Enable sound alerts&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div class=&quot;settings-section&quot;&gt;&#10;                        &lt;h4 style=&quot;color: var(--primary-blue); margin: 2rem 0 1rem;&quot;&gt;Data &amp; Privacy&lt;/h4&gt;&#10;                        &#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsAnalytics&quot; checked&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Allow usage analytics&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label class=&quot;checkbox-label&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;settingsLocation&quot;&gt;&#10;                                &lt;span class=&quot;checkmark&quot;&gt;&lt;/span&gt;&#10;                                Remember location preferences&#10;                            &lt;/label&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-actions&quot;&gt;&#10;                    &lt;button type=&quot;button&quot; class=&quot;secondary-btn&quot; onclick=&quot;app.resetSettings()&quot;&gt;&#10;                        Reset to Defaults&#10;                    &lt;/button&gt;&#10;                    &lt;button type=&quot;button&quot; class=&quot;primary-btn&quot; onclick=&quot;app.saveSettings()&quot;&gt;&#10;                        Save Settings&#10;                    &lt;/button&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        document.body.appendChild(modal);&#10;        this.loadCurrentSettings();&#10;    }&#10;&#10;    loadCurrentSettings() {&#10;        Object.keys(this.preferences).forEach(key =&gt; {&#10;            const element = document.getElementById('settings' + key.charAt(0).toUpperCase() + key.slice(1));&#10;            if (element) {&#10;                if (element.type === 'checkbox') {&#10;                    element.checked = this.preferences[key];&#10;                } else {&#10;                    element.value = this.preferences[key];&#10;                }&#10;            }&#10;        });&#10;    }&#10;&#10;    saveSettings() {&#10;        const settings = {&#10;            theme: document.getElementById('settingsTheme').value,&#10;            fontSize: document.getElementById('settingsFontSize').value,&#10;            reduceMotion: document.getElementById('settingsReduceMotion').checked,&#10;            highContrast: document.getElementById('settingsHighContrast').checked,&#10;            screenReader: document.getElementById('settingsScreenReader').checked,&#10;            notifications: document.getElementById('settingsNotifications').checked,&#10;            sound: document.getElementById('settingsSound').checked,&#10;            analytics: document.getElementById('settingsAnalytics').checked,&#10;            location: document.getElementById('settingsLocation').checked&#10;        };&#10;&#10;        this.preferences = settings;&#10;        this.savePreferences();&#10;        this.applySettings();&#10;        &#10;        document.querySelector('.modal').remove();&#10;        &#10;        this.showNotification('Settings saved successfully!', 'success');&#10;    }&#10;&#10;    resetSettings() {&#10;        if (confirm('Reset all settings to defaults?')) {&#10;            this.preferences = this.getDefaultPreferences();&#10;            this.savePreferences();&#10;            this.applySettings();&#10;            this.loadCurrentSettings();&#10;            this.showNotification('Settings reset to defaults', 'success');&#10;        }&#10;    }&#10;&#10;    applySettings() {&#10;        const body = document.body;&#10;        &#10;        body.className = body.className.replace(/theme-\w+/g, '');&#10;        if (this.preferences.theme !== 'auto') {&#10;            body.classList.add(`theme-${this.preferences.theme}`);&#10;        }&#10;&#10;        body.className = body.className.replace(/font-size-\w+/g, '');&#10;        body.classList.add(`font-size-${this.preferences.fontSize}`);&#10;&#10;        if (this.preferences.reduceMotion) {&#10;            body.classList.add('reduce-motion');&#10;        } else {&#10;            body.classList.remove('reduce-motion');&#10;        }&#10;&#10;        if (this.preferences.highContrast) {&#10;            body.classList.add('high-contrast');&#10;        } else {&#10;            body.classList.remove('high-contrast');&#10;        }&#10;    }&#10;&#10;    loadPreferences() {&#10;        try {&#10;            const stored = localStorage.getItem('aura_preferences');&#10;            return stored ? JSON.parse(stored) : this.getDefaultPreferences();&#10;        } catch (error) {&#10;            console.error('Error loading preferences:', error);&#10;            return this.getDefaultPreferences();&#10;        }&#10;    }&#10;&#10;    getDefaultPreferences() {&#10;        return {&#10;            theme: 'auto',&#10;            fontSize: 'medium',&#10;            reduceMotion: false,&#10;            highContrast: false,&#10;            screenReader: false,&#10;            notifications: true,&#10;            sound: false,&#10;            analytics: true,&#10;            location: false&#10;        };&#10;    }&#10;&#10;    savePreferences() {&#10;        try {&#10;            localStorage.setItem('aura_preferences', JSON.stringify(this.preferences));&#10;        } catch (error) {&#10;            console.error('Error saving preferences:', error);&#10;        }&#10;    }&#10;&#10;    showNotification(message, type = 'info') {&#10;        if (!this.preferences.notifications) return;&#10;&#10;        const notification = document.createElement('div');&#10;        const colors = {&#10;            'success': 'var(--success-green)',&#10;            'error': 'var(--error-red)',&#10;            'warning': 'var(--warning-orange)',&#10;            'info': 'var(--info-blue)'&#10;        };&#10;        &#10;        notification.style.cssText = `&#10;            position: fixed;&#10;            top: 20px;&#10;            right: 20px;&#10;            background: ${colors[type]};&#10;            color: white;&#10;            padding: 1rem 1.5rem;&#10;            border-radius: var(--border-radius-md);&#10;            box-shadow: var(--shadow-lg);&#10;            z-index: 10000;&#10;            max-width: 400px;&#10;            animation: slideIn 0.3s ease;&#10;        `;&#10;        notification.textContent = message;&#10;        &#10;        document.body.appendChild(notification);&#10;        &#10;        if (this.preferences.sound &amp;&amp; type === 'error') {&#10;        }&#10;        &#10;        setTimeout(() =&gt; {&#10;            notification.style.animation = 'slideOut 0.3s ease forwards';&#10;            setTimeout(() =&gt; {&#10;                if (notification.parentNode) {&#10;                    document.body.removeChild(notification);&#10;                }&#10;            }, 300);&#10;        }, 4000);&#10;    }&#10;&#10;    getStatus() {&#10;        return {&#10;            version: '1.0.0',&#10;            initialized: !this.isLoading,&#10;            currentRoute: this.currentRoute !== null,&#10;            components: {&#10;                routeDisplay: this.routeDisplay !== null,&#10;                obstacleReporter: this.obstacleReporter !== null,&#10;                analytics: this.analytics !== null&#10;            },&#10;            preferences: this.preferences&#10;        };&#10;    }&#10;&#10;    loadDemoLocationOnly() {&#10;        console.log('️ Loading demo location only (no auto-calculation)...');&#10;        &#10;        this.loadDemoLocation('shopping');&#10;        this.debug('Demo location loaded, ready for user to calculate route');&#10;    }&#10;}&#10;&#10;const appStyles = document.createElement('style');&#10;appStyles.textContent = `&#10;    @keyframes fadeIn {&#10;        from { opacity: 0; }&#10;        to { opacity: 1; }&#10;    }&#10;    &#10;    @keyframes fadeOut {&#10;        from { opacity: 1; }&#10;        to { opacity: 0; }&#10;    }&#10;    &#10;    .main-app {&#10;        display: none;&#10;    }&#10;    &#10;    /* Theme support */&#10;    .theme-dark {&#10;        --white: #1a1a1a;&#10;        --light-gray: #2d2d2d;&#10;        --medium-gray: #404040;&#10;        --dark-gray: #a0a0a0;&#10;        --darker-gray: #d0d0d0;&#10;        --black: #ffffff;&#10;    }&#10;    &#10;    .theme-high-contrast {&#10;        --primary-blue: #0066cc;&#10;        --primary-purple: #6600cc;&#10;        --white: #ffffff;&#10;        --black: #000000;&#10;        --medium-gray: #666666;&#10;    }&#10;    &#10;    /* Font size support */&#10;    .font-size-small { font-size: 14px; }&#10;    .font-size-medium { font-size: 16px; }&#10;    .font-size-large { font-size: 18px; }&#10;    .font-size-extra-large { font-size: 22px; }&#10;    &#10;    /* Accessibility support */&#10;    .reduce-motion *, .reduce-motion *::before, .reduce-motion *::after {&#10;        animation-duration: 0.01ms !important;&#10;        animation-iteration-count: 1 !important;&#10;        transition-duration: 0.01ms !important;&#10;    }&#10;    &#10;    .high-contrast {&#10;        filter: contrast(150%);&#10;    }&#10;    &#10;    .high-contrast button, .high-contrast input, .high-contrast select {&#10;        border-width: 2px !important;&#10;    }&#10;`;&#10;&#10;document.head.appendChild(appStyles);&#10;&#10;document.addEventListener('DOMContentLoaded', async () =&gt; {&#10;    console.log(' DOM loaded, waiting for all scripts...');&#10;    &#10;    let retries = 0; const maxRetries = 20;&#10;    while (retries &lt; maxRetries) {&#10;        const allScriptsLoaded = (&#10;            typeof RouteDisplay !== 'undefined' &amp;&amp;&#10;            typeof ObstacleReporter !== 'undefined' &amp;&amp;&#10;            typeof Analytics !== 'undefined' &amp;&amp;&#10;            typeof mapboxgl !== 'undefined' // Mapbox&#10;        );&#10;        if (allScriptsLoaded) break;&#10;        await new Promise(r =&gt; setTimeout(r, 100));&#10;        retries++;&#10;    }&#10;    if (retries &gt;= maxRetries) console.error('❌ Some scripts failed to load');&#10;    &#10;    window.app = new AuraApp();&#10;    window.app.init();&#10;});&#10;&#10;window.geocodeAddress = async function(locationKey) {&#10;    if (window.app) {&#10;        return window.app.geocodeAddress(locationKey);&#10;    }&#10;};&#10;&#10;window.reverseGeocode = async function(locationKey) {&#10;    if (window.app) {&#10;        return window.app.reverseGeocode(locationKey);&#10;    }&#10;};&#10;&#10;window.AuraApp = AuraApp;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/components/Analytics.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/components/Analytics.js" />
              <option name="originalContent" value="// Analytics Component - Handles data visualization and usage analytics&#10;&#10;class Analytics {&#10;    constructor() {&#10;        this.data = this.loadAnalyticsData();&#10;        this.charts = {};&#10;        this.init();&#10;    }&#10;&#10;    init() {&#10;        console.log('Analytics component initialized');&#10;        this.updateData();&#10;    }&#10;&#10;    // Load analytics data from localStorage&#10;    loadAnalyticsData() {&#10;        try {&#10;            const stored = localStorage.getItem('aura_analytics');&#10;            return stored ? JSON.parse(stored) : this.getDefaultData();&#10;        } catch (error) {&#10;            console.error('Error loading analytics data:', error);&#10;            return this.getDefaultData();&#10;        }&#10;    }&#10;&#10;    // Get default analytics data structure&#10;    getDefaultData() {&#10;        return {&#10;            routes: {&#10;                total: 0,&#10;                successful: 0,&#10;                failed: 0,&#10;                totalDistance: 0,&#10;                averageAccessibility: 0,&#10;                byAccessibilityLevel: { high: 0, medium: 0, low: 0 }&#10;            },&#10;            obstacles: {&#10;                total: 0,&#10;                reported: 0,&#10;                byType: {},&#10;                bySeverity: { low: 0, medium: 0, high: 0, critical: 0 }&#10;            },&#10;            usage: {&#10;                sessionsToday: 1,&#10;                totalSessions: 1,&#10;                lastSession: new Date().toISOString(),&#10;                averageSessionTime: 0,&#10;                popularDestinations: {}&#10;            },&#10;            accessibility: {&#10;                averageScore: 0,&#10;                scoreDistribution: {},&#10;                improvementsSuggested: 0,&#10;                routesOptimized: 0&#10;            }&#10;        };&#10;    }&#10;&#10;    // Update analytics data&#10;    updateData() {&#10;        // Update session data&#10;        this.data.usage.totalSessions++;&#10;        const today = new Date().toDateString();&#10;        const lastSessionDate = new Date(this.data.usage.lastSession).toDateString();&#10;        &#10;        if (today !== lastSessionDate) {&#10;            this.data.usage.sessionsToday = 1;&#10;        } else {&#10;            this.data.usage.sessionsToday++;&#10;        }&#10;        &#10;        this.data.usage.lastSession = new Date().toISOString();&#10;        this.saveAnalyticsData();&#10;    }&#10;&#10;    // Record route calculation&#10;    recordRoute(routeData) {&#10;        this.data.routes.total++;&#10;        &#10;        if (routeData.success) {&#10;            this.data.routes.successful++;&#10;            this.data.routes.totalDistance += routeData.distance || 0;&#10;            &#10;            // Update accessibility level counts&#10;            const score = routeData.accessibility_score || 0;&#10;            if (score &gt;= 80) {&#10;                this.data.routes.byAccessibilityLevel.high++;&#10;            } else if (score &gt;= 60) {&#10;                this.data.routes.byAccessibilityLevel.medium++;&#10;            } else {&#10;                this.data.routes.byAccessibilityLevel.low++;&#10;            }&#10;            &#10;            // Update average accessibility&#10;            this.data.routes.averageAccessibility = &#10;                (this.data.routes.averageAccessibility * (this.data.routes.successful - 1) + score) / &#10;                this.data.routes.successful;&#10;        } else {&#10;            this.data.routes.failed++;&#10;        }&#10;        &#10;        this.saveAnalyticsData();&#10;    }&#10;&#10;    // Record obstacle report&#10;    recordObstacleReport(type, severity) {&#10;        this.data.obstacles.total++;&#10;        this.data.obstacles.reported++;&#10;        &#10;        // Update by type&#10;        this.data.obstacles.byType[type] = (this.data.obstacles.byType[type] || 0) + 1;&#10;        &#10;        // Update by severity&#10;        this.data.obstacles.bySeverity[severity] = (this.data.obstacles.bySeverity[severity] || 0) + 1;&#10;        &#10;        this.saveAnalyticsData();&#10;    }&#10;&#10;    // Show analytics dashboard&#10;    showDashboard() {&#10;        const modal = document.createElement('div');&#10;        modal.className = 'modal';&#10;        modal.innerHTML = `&#10;            &lt;div class=&quot;modal-content large&quot;&gt;&#10;                &lt;div class=&quot;modal-header&quot;&gt;&#10;                    &lt;h3&gt; Analytics Dashboard&lt;/h3&gt;&#10;                    &lt;button class=&quot;close-btn&quot; onclick=&quot;this.closest('.modal').remove()&quot;&gt;&amp;times;&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-body&quot;&gt;&#10;                    ${this.renderDashboard()}&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        document.body.appendChild(modal);&#10;        &#10;        // Initialize charts after modal is added to DOM&#10;        setTimeout(() =&gt; {&#10;            this.initializeCharts();&#10;        }, 100);&#10;    }&#10;&#10;    // Render dashboard content&#10;    renderDashboard() {&#10;        return `&#10;            &lt;div class=&quot;analytics-dashboard&quot;&gt;&#10;                &lt;!-- Overview Cards --&gt;&#10;                &lt;div class=&quot;overview-cards&quot; style=&quot;display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;&quot;&gt;&#10;                    &lt;div class=&quot;stat-card routes&quot;&gt;&#10;                        &lt;div class=&quot;stat-icon&quot;&gt;️&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-value&quot;&gt;${this.data.routes.total}&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-label&quot;&gt;Routes Calculated&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-sublabel&quot;&gt;${this.data.routes.successful} successful&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &#10;                    &lt;div class=&quot;stat-card obstacles&quot;&gt;&#10;                        &lt;div class=&quot;stat-icon&quot;&gt;&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-value&quot;&gt;${this.data.obstacles.reported}&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-label&quot;&gt;Obstacles Reported&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-sublabel&quot;&gt;${Object.keys(this.data.obstacles.byType).length} types&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &#10;                    &lt;div class=&quot;stat-card accessibility&quot;&gt;&#10;                        &lt;div class=&quot;stat-icon&quot;&gt;♿&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-value&quot;&gt;${this.data.routes.averageAccessibility.toFixed(1)}&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-label&quot;&gt;Avg. Accessibility&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-sublabel&quot;&gt;Out of 100&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &#10;                    &lt;div class=&quot;stat-card sessions&quot;&gt;&#10;                        &lt;div class=&quot;stat-icon&quot;&gt;&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-value&quot;&gt;${this.data.usage.totalSessions}&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-label&quot;&gt;Total Sessions&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-sublabel&quot;&gt;${this.data.usage.sessionsToday} today&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;!-- Charts Section --&gt;&#10;                &lt;div class=&quot;charts-section&quot;&gt;&#10;                    &lt;div class=&quot;chart-grid&quot; style=&quot;display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem;&quot;&gt;&#10;                        &lt;!-- Accessibility Distribution Chart --&gt;&#10;                        &lt;div class=&quot;chart-container&quot;&gt;&#10;                            &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt;Route Accessibility Distribution&lt;/h4&gt;&#10;                            &lt;div id=&quot;accessibilityChart&quot; class=&quot;chart-placeholder&quot;&gt;&#10;                                ${this.renderAccessibilityChart()}&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;!-- Obstacles by Type Chart --&gt;&#10;                        &lt;div class=&quot;chart-container&quot;&gt;&#10;                            &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt;Obstacles by Type&lt;/h4&gt;&#10;                            &lt;div id=&quot;obstaclesChart&quot; class=&quot;chart-placeholder&quot;&gt;&#10;                                ${this.renderObstaclesChart()}&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &#10;                    &lt;!-- Severity Distribution --&gt;&#10;                    &lt;div class=&quot;severity-distribution&quot; style=&quot;margin: 2rem 0;&quot;&gt;&#10;                        &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt;Obstacle Severity Distribution&lt;/h4&gt;&#10;                        ${this.renderSeverityChart()}&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;!-- Detailed Stats --&gt;&#10;                &lt;div class=&quot;detailed-stats&quot;&gt;&#10;                    &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt;Detailed Statistics&lt;/h4&gt;&#10;                    &#10;                    &lt;div class=&quot;stats-grid&quot; style=&quot;display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;&quot;&gt;&#10;                        &lt;!-- Route Statistics --&gt;&#10;                        &lt;div class=&quot;stats-section&quot;&gt;&#10;                            &lt;h5 style=&quot;color: var(--darker-gray); margin-bottom: 0.5rem;&quot;&gt; Route Statistics&lt;/h5&gt;&#10;                            &lt;ul style=&quot;list-style: none; padding: 0;&quot;&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Total Distance: &lt;strong&gt;${this.data.routes.totalDistance.toFixed(2)} km&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Success Rate: &lt;strong&gt;${this.getSuccessRate()}%&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    High Accessibility: &lt;strong&gt;${this.data.routes.byAccessibilityLevel.high} routes&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0;&quot;&gt;&#10;                                    Average Route Length: &lt;strong&gt;${this.getAverageRouteLength()} km&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                            &lt;/ul&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;!-- Usage Statistics --&gt;&#10;                        &lt;div class=&quot;stats-section&quot;&gt;&#10;                            &lt;h5 style=&quot;color: var(--darker-gray); margin-bottom: 0.5rem;&quot;&gt; Usage Statistics&lt;/h5&gt;&#10;                            &lt;ul style=&quot;list-style: none; padding: 0;&quot;&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Last Session: &lt;strong&gt;${this.formatDate(this.data.usage.lastSession)}&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Sessions Today: &lt;strong&gt;${this.data.usage.sessionsToday}&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0;&quot;&gt;&#10;                                    Account Age: &lt;strong&gt;${this.getAccountAge()} days&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                            &lt;/ul&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;!-- Impact Statistics --&gt;&#10;                        &lt;div class=&quot;stats-section&quot;&gt;&#10;                            &lt;h5 style=&quot;color: var(--darker-gray); margin-bottom: 0.5rem;&quot;&gt; Impact Statistics&lt;/h5&gt;&#10;                            &lt;ul style=&quot;list-style: none; padding: 0;&quot;&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Accessibility Improved: &lt;strong&gt;${this.data.accessibility.routesOptimized} routes&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Community Contributions: &lt;strong&gt;${this.data.obstacles.reported} reports&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0;&quot;&gt;&#10;                                    Average Impact Score: &lt;strong&gt;${this.calculateImpactScore()}/100&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                            &lt;/ul&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;!-- Export Options --&gt;&#10;                &lt;div class=&quot;export-section&quot; style=&quot;margin-top: 2rem; padding-top: 2rem; border-top: 2px solid var(--light-gray);&quot;&gt;&#10;                    &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt; Export Data&lt;/h4&gt;&#10;                    &lt;div style=&quot;display: flex; gap: 1rem; flex-wrap: wrap;&quot;&gt;&#10;                        &lt;button class=&quot;secondary-btn&quot; onclick=&quot;analytics.exportData('json')&quot;&gt;&#10;                            Export as JSON&#10;                        &lt;/button&gt;&#10;                        &lt;button class=&quot;secondary-btn&quot; onclick=&quot;analytics.exportData('csv')&quot;&gt;&#10;                            Export as CSV&#10;                        &lt;/button&gt;&#10;                        &lt;button class=&quot;secondary-btn&quot; onclick=&quot;analytics.resetData()&quot;&gt;&#10;                            Reset All Data&#10;                        &lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;&#10;    // Render accessibility chart&#10;    renderAccessibilityChart() {&#10;        const data = this.data.routes.byAccessibilityLevel;&#10;        const total = data.high + data.medium + data.low;&#10;        &#10;        if (total === 0) {&#10;            return '&lt;div class=&quot;no-data&quot;&gt;No route data available&lt;/div&gt;';&#10;        }&#10;&#10;        const highPercent = (data.high / total) * 100;&#10;        const mediumPercent = (data.medium / total) * 100;&#10;        const lowPercent = (data.low / total) * 100;&#10;&#10;        return `&#10;            &lt;div class=&quot;accessibility-bars&quot;&gt;&#10;                &lt;div class=&quot;bar-item&quot;&gt;&#10;                    &lt;div class=&quot;bar-label&quot;&gt;High (80+)&lt;/div&gt;&#10;                    &lt;div class=&quot;bar-container&quot;&gt;&#10;                        &lt;div class=&quot;bar-fill&quot; style=&quot;width: ${highPercent}%; background: var(--success-green);&quot;&gt;&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;bar-value&quot;&gt;${data.high} (${highPercent.toFixed(1)}%)&lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;bar-item&quot;&gt;&#10;                    &lt;div class=&quot;bar-label&quot;&gt;Medium (60-79)&lt;/div&gt;&#10;                    &lt;div class=&quot;bar-container&quot;&gt;&#10;                        &lt;div class=&quot;bar-fill&quot; style=&quot;width: ${mediumPercent}%; background: var(--warning-orange);&quot;&gt;&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;bar-value&quot;&gt;${data.medium} (${mediumPercent.toFixed(1)}%)&lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;bar-item&quot;&gt;&#10;                    &lt;div class=&quot;bar-label&quot;&gt;Low (&lt; 60)&lt;/div&gt;&#10;                    &lt;div class=&quot;bar-container&quot;&gt;&#10;                        &lt;div class=&quot;bar-fill&quot; style=&quot;width: ${lowPercent}%; background: var(--error-red);&quot;&gt;&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;bar-value&quot;&gt;${data.low} (${lowPercent.toFixed(1)}%)&lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;&#10;    // Render obstacles chart&#10;    renderObstaclesChart() {&#10;        const data = this.data.obstacles.byType;&#10;        const entries = Object.entries(data).sort((a, b) =&gt; b[1] - a[1]);&#10;        &#10;        if (entries.length === 0) {&#10;            return '&lt;div class=&quot;no-data&quot;&gt;No obstacle data available&lt;/div&gt;';&#10;        }&#10;&#10;        const maxValue = Math.max(...entries.map(([, count]) =&gt; count));&#10;&#10;        return `&#10;            &lt;div class=&quot;obstacles-bars&quot;&gt;&#10;                ${entries.map(([type, count]) =&gt; {&#10;                    const percent = (count / maxValue) * 100;&#10;                    return `&#10;                        &lt;div class=&quot;bar-item&quot;&gt;&#10;                            &lt;div class=&quot;bar-label&quot;&gt;${this.formatObstacleType(type)}&lt;/div&gt;&#10;                            &lt;div class=&quot;bar-container&quot;&gt;&#10;                                &lt;div class=&quot;bar-fill&quot; style=&quot;width: ${percent}%; background: var(--primary-blue);&quot;&gt;&lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;bar-value&quot;&gt;${count}&lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    `;&#10;                }).join('')}&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;&#10;    // Render severity chart&#10;    renderSeverityChart() {&#10;        const data = this.data.obstacles.bySeverity;&#10;        const total = Object.values(data).reduce((sum, count) =&gt; sum + count, 0);&#10;        &#10;        if (total === 0) {&#10;            return '&lt;div class=&quot;no-data&quot;&gt;No severity data available&lt;/div&gt;';&#10;        }&#10;&#10;        const severityColors = {&#10;            low: 'var(--success-green)',&#10;            medium: 'var(--warning-orange)',&#10;            high: 'var(--error-red)',&#10;            critical: '#d32f2f'&#10;        };&#10;&#10;        return `&#10;            &lt;div class=&quot;severity-chart&quot; style=&quot;display: flex; gap: 1rem; align-items: end; height: 200px; padding: 1rem; background: var(--light-gray); border-radius: var(--border-radius-lg);&quot;&gt;&#10;                ${Object.entries(data).map(([severity, count]) =&gt; {&#10;                    const height = total &gt; 0 ? (count / total) * 150 : 0;&#10;                    return `&#10;                        &lt;div class=&quot;severity-bar&quot; style=&quot;flex: 1; display: flex; flex-direction: column; align-items: center;&quot;&gt;&#10;                            &lt;div class=&quot;bar-value&quot; style=&quot;margin-bottom: 0.5rem; font-weight: bold; color: var(--darker-gray);&quot;&gt;&#10;                                ${count}&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;bar&quot; style=&quot;width: 100%; height: ${height}px; background: ${severityColors[severity]}; border-radius: var(--border-radius-sm) var(--border-radius-sm) 0 0;&quot;&gt;&lt;/div&gt;&#10;                            &lt;div class=&quot;bar-label&quot; style=&quot;margin-top: 0.5rem; font-size: var(--font-size-sm); color: var(--dark-gray); text-align: center;&quot;&gt;&#10;                                ${severity.charAt(0).toUpperCase() + severity.slice(1)}&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    `;&#10;                }).join('')}&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;&#10;    // Initialize charts&#10;    initializeCharts() {&#10;        // Add animations to bars&#10;        const bars = document.querySelectorAll('.bar-fill, .bar');&#10;        bars.forEach(bar =&gt; {&#10;            const width = bar.style.width;&#10;            const height = bar.style.height;&#10;            bar.style.width = '0';&#10;            bar.style.height = '0';&#10;            &#10;            setTimeout(() =&gt; {&#10;                bar.style.transition = 'width 1s ease, height 1s ease';&#10;                bar.style.width = width;&#10;                bar.style.height = height;&#10;            }, 100);&#10;        });&#10;    }&#10;&#10;    // Format obstacle type&#10;    formatObstacleType(type) {&#10;        const types = {&#10;            'construction': 'Construction',&#10;            'pothole': 'Potholes',&#10;            'blocked_sidewalk': 'Blocked Paths',&#10;            'steep_slope': 'Steep Slopes',&#10;            'no_curb_cut': 'No Curb Cuts',&#10;            'debris': 'Debris',&#10;            'flooding': 'Flooding',&#10;            'poor_lighting': 'Poor Lighting',&#10;            'broken_infrastructure': 'Broken Infrastructure',&#10;            'other': 'Other'&#10;        };&#10;        return types[type] || type;&#10;    }&#10;&#10;    // Calculate success rate&#10;    getSuccessRate() {&#10;        const total = this.data.routes.total;&#10;        return total &gt; 0 ? ((this.data.routes.successful / total) * 100).toFixed(1) : 0;&#10;    }&#10;&#10;    // Get average route length&#10;    getAverageRouteLength() {&#10;        const successful = this.data.routes.successful;&#10;        return successful &gt; 0 ? (this.data.routes.totalDistance / successful).toFixed(2) : 0;&#10;    }&#10;&#10;    // Format date&#10;    formatDate(dateString) {&#10;        const date = new Date(dateString);&#10;        return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();&#10;    }&#10;&#10;    // Get account age&#10;    getAccountAge() {&#10;        const firstSession = localStorage.getItem('aura_first_session');&#10;        if (!firstSession) {&#10;            localStorage.setItem('aura_first_session', new Date().toISOString());&#10;            return 0;&#10;        }&#10;        &#10;        const daysDiff = Math.floor((new Date() - new Date(firstSession)) / (1000 * 60 * 60 * 24));&#10;        return daysDiff;&#10;    }&#10;&#10;    // Calculate impact score&#10;    calculateImpactScore() {&#10;        const routes = this.data.routes.successful;&#10;        const obstacles = this.data.obstacles.reported;&#10;        const avgAccessibility = this.data.routes.averageAccessibility;&#10;        &#10;        // Weight different factors&#10;        const routeScore = Math.min(routes * 5, 40); // Max 40 points for routes&#10;        const obstacleScore = Math.min(obstacles * 10, 30); // Max 30 points for obstacle reports&#10;        const accessibilityScore = Math.min(avgAccessibility * 0.3, 30); // Max 30 points for accessibility&#10;        &#10;        return Math.round(routeScore + obstacleScore + accessibilityScore);&#10;    }&#10;&#10;    // Export data&#10;    exportData(format) {&#10;        try {&#10;            if (format === 'json') {&#10;                const blob = new Blob([JSON.stringify(this.data, null, 2)], {&#10;                    type: 'application/json'&#10;                });&#10;                this.downloadFile(blob, `aura-analytics-${Date.now()}.json`);&#10;            } else if (format === 'csv') {&#10;                const csv = this.convertToCSV();&#10;                const blob = new Blob([csv], {&#10;                    type: 'text/csv'&#10;                });&#10;                this.downloadFile(blob, `aura-analytics-${Date.now()}.csv`);&#10;            }&#10;            &#10;            this.showNotification('Data exported successfully!', 'success');&#10;        } catch (error) {&#10;            console.error('Export error:', error);&#10;            this.showNotification('Failed to export data', 'error');&#10;        }&#10;    }&#10;&#10;    // Convert data to CSV format&#10;    convertToCSV() {&#10;        const lines = [];&#10;        &#10;        // Routes data&#10;        lines.push('Routes Data');&#10;        lines.push('Metric,Value');&#10;        lines.push(`Total Routes,${this.data.routes.total}`);&#10;        lines.push(`Successful Routes,${this.data.routes.successful}`);&#10;        lines.push(`Failed Routes,${this.data.routes.failed}`);&#10;        lines.push(`Total Distance,${this.data.routes.totalDistance}`);&#10;        lines.push(`Average Accessibility,${this.data.routes.averageAccessibility}`);&#10;        lines.push('');&#10;        &#10;        // Obstacles data&#10;        lines.push('Obstacles Data');&#10;        lines.push('Type,Count');&#10;        Object.entries(this.data.obstacles.byType).forEach(([type, count]) =&gt; {&#10;            lines.push(`${type},${count}`);&#10;        });&#10;        lines.push('');&#10;        &#10;        return lines.join('\n');&#10;    }&#10;&#10;    // Download file&#10;    downloadFile(blob, filename) {&#10;        const url = URL.createObjectURL(blob);&#10;        const a = document.createElement('a');&#10;        a.href = url;&#10;        a.download = filename;&#10;        document.body.appendChild(a);&#10;        a.click();&#10;        document.body.removeChild(a);&#10;        URL.revokeObjectURL(url);&#10;    }&#10;&#10;    // Reset all data&#10;    resetData() {&#10;        if (confirm('Are you sure you want to reset all analytics data? This action cannot be undone.')) {&#10;            this.data = this.getDefaultData();&#10;            this.saveAnalyticsData();&#10;            &#10;            // Refresh dashboard if open&#10;            const dashboard = document.querySelector('.analytics-dashboard');&#10;            if (dashboard) {&#10;                dashboard.innerHTML = this.renderDashboard();&#10;                setTimeout(() =&gt; this.initializeCharts(), 100);&#10;            }&#10;            &#10;            this.showNotification('Analytics data reset successfully!', 'success');&#10;        }&#10;    }&#10;&#10;    // Save analytics data&#10;    saveAnalyticsData() {&#10;        try {&#10;            localStorage.setItem('aura_analytics', JSON.stringify(this.data));&#10;        } catch (error) {&#10;            console.error('Error saving analytics data:', error);&#10;        }&#10;    }&#10;&#10;    // Show notification&#10;    showNotification(message, type = 'info') {&#10;        const notification = document.createElement('div');&#10;        const colors = {&#10;            'success': 'var(--success-green)',&#10;            'error': 'var(--error-red)',&#10;            'warning': 'var(--warning-orange)',&#10;            'info': 'var(--info-blue)'&#10;        };&#10;        &#10;        notification.style.cssText = `&#10;            position: fixed;&#10;            top: 20px;&#10;            right: 20px;&#10;            background: ${colors[type]};&#10;            color: white;&#10;            padding: 1rem 1.5rem;&#10;            border-radius: var(--border-radius-md);&#10;            box-shadow: var(--shadow-lg);&#10;            z-index: 10000;&#10;            max-width: 400px;&#10;            animation: slideIn 0.3s ease;&#10;        `;&#10;        notification.textContent = message;&#10;        &#10;        document.body.appendChild(notification);&#10;        &#10;        setTimeout(() =&gt; {&#10;            notification.style.animation = 'slideOut 0.3s ease forwards';&#10;            setTimeout(() =&gt; {&#10;                if (notification.parentNode) {&#10;                    document.body.removeChild(notification);&#10;                }&#10;            }, 300);&#10;        }, 4000);&#10;    }&#10;}&#10;&#10;// Add styles for analytics components&#10;const analyticsStyles = document.createElement('style');&#10;analyticsStyles.textContent = `&#10;    .stat-card {&#10;        background: var(--white);&#10;        border-radius: var(--border-radius-lg);&#10;        padding: 1.5rem;&#10;        text-align: center;&#10;        box-shadow: var(--shadow-sm);&#10;        transition: transform var(--transition-base);&#10;    }&#10;    &#10;    .stat-card:hover {&#10;        transform: translateY(-2px);&#10;        box-shadow: var(--shadow-md);&#10;    }&#10;    &#10;    .stat-icon {&#10;        font-size: 2rem;&#10;        margin-bottom: 0.5rem;&#10;    }&#10;    &#10;    .stat-value {&#10;        font-size: 2rem;&#10;        font-weight: bold;&#10;        color: var(--primary-blue);&#10;        margin-bottom: 0.25rem;&#10;    }&#10;    &#10;    .stat-label {&#10;        color: var(--darker-gray);&#10;        font-weight: 600;&#10;        margin-bottom: 0.25rem;&#10;    }&#10;    &#10;    .stat-sublabel {&#10;        color: var(--dark-gray);&#10;        font-size: var(--font-size-sm);&#10;    }&#10;    &#10;    .chart-container {&#10;        background: var(--white);&#10;        border-radius: var(--border-radius-lg);&#10;        padding: 1.5rem;&#10;        box-shadow: var(--shadow-sm);&#10;    }&#10;    &#10;    .bar-item {&#10;        display: flex;&#10;        align-items: center;&#10;        gap: 1rem;&#10;        margin-bottom: 0.75rem;&#10;    }&#10;    &#10;    .bar-label {&#10;        min-width: 120px;&#10;        font-size: var(--font-size-sm);&#10;        color: var(--darker-gray);&#10;        font-weight: 600;&#10;    }&#10;    &#10;    .bar-container {&#10;        flex: 1;&#10;        height: 20px;&#10;        background: var(--light-gray);&#10;        border-radius: var(--border-radius-sm);&#10;        overflow: hidden;&#10;    }&#10;    &#10;    .bar-fill {&#10;        height: 100%;&#10;        border-radius: var(--border-radius-sm);&#10;        transition: width 1s ease;&#10;    }&#10;    &#10;    .bar-value {&#10;        min-width: 80px;&#10;        text-align: right;&#10;        font-size: var(--font-size-sm);&#10;        color: var(--darker-gray);&#10;        font-weight: 600;&#10;    }&#10;    &#10;    .no-data {&#10;        text-align: center;&#10;        color: var(--dark-gray);&#10;        padding: 2rem;&#10;        font-style: italic;&#10;    }&#10;    &#10;    .stats-section {&#10;        background: var(--white);&#10;        border-radius: var(--border-radius-lg);&#10;        padding: 1.5rem;&#10;        box-shadow: var(--shadow-sm);&#10;    }&#10;`;&#10;&#10;document.head.appendChild(analyticsStyles);&#10;&#10;// Export the Analytics class&#10;window.Analytics = Analytics;&#10;" />
              <option name="updatedContent" value="class Analytics {&#10;    constructor() {&#10;        this.data = this.loadAnalyticsData();&#10;        this.charts = {};&#10;        this.init();&#10;    }&#10;&#10;    init() {&#10;        console.log('Analytics component initialized');&#10;        this.updateData();&#10;    }&#10;&#10;    // Load analytics data from localStorage&#10;    loadAnalyticsData() {&#10;        try {&#10;            const stored = localStorage.getItem('aura_analytics');&#10;            return stored ? JSON.parse(stored) : this.getDefaultData();&#10;        } catch (error) {&#10;            console.error('Error loading analytics data:', error);&#10;            return this.getDefaultData();&#10;        }&#10;    }&#10;&#10;    // Get default analytics data structure&#10;    getDefaultData() {&#10;        return {&#10;            routes: {&#10;                total: 0,&#10;                successful: 0,&#10;                failed: 0,&#10;                totalDistance: 0,&#10;                averageAccessibility: 0,&#10;                byAccessibilityLevel: { high: 0, medium: 0, low: 0 }&#10;            },&#10;            obstacles: {&#10;                total: 0,&#10;                reported: 0,&#10;                byType: {},&#10;                bySeverity: { low: 0, medium: 0, high: 0, critical: 0 }&#10;            },&#10;            usage: {&#10;                sessionsToday: 1,&#10;                totalSessions: 1,&#10;                lastSession: new Date().toISOString(),&#10;                averageSessionTime: 0,&#10;                popularDestinations: {}&#10;            },&#10;            accessibility: {&#10;                averageScore: 0,&#10;                scoreDistribution: {},&#10;                improvementsSuggested: 0,&#10;                routesOptimized: 0&#10;            }&#10;        };&#10;    }&#10;&#10;    // Update analytics data&#10;    updateData() {&#10;        // Update session data&#10;        this.data.usage.totalSessions++;&#10;        const today = new Date().toDateString();&#10;        const lastSessionDate = new Date(this.data.usage.lastSession).toDateString();&#10;        &#10;        if (today !== lastSessionDate) {&#10;            this.data.usage.sessionsToday = 1;&#10;        } else {&#10;            this.data.usage.sessionsToday++;&#10;        }&#10;        &#10;        this.data.usage.lastSession = new Date().toISOString();&#10;        this.saveAnalyticsData();&#10;    }&#10;&#10;    // Record route calculation&#10;    recordRoute(routeData) {&#10;        this.data.routes.total++;&#10;        &#10;        if (routeData.success) {&#10;            this.data.routes.successful++;&#10;            this.data.routes.totalDistance += routeData.distance || 0;&#10;            &#10;            // Update accessibility level counts&#10;            const score = routeData.accessibility_score || 0;&#10;            if (score &gt;= 80) {&#10;                this.data.routes.byAccessibilityLevel.high++;&#10;            } else if (score &gt;= 60) {&#10;                this.data.routes.byAccessibilityLevel.medium++;&#10;            } else {&#10;                this.data.routes.byAccessibilityLevel.low++;&#10;            }&#10;            &#10;            // Update average accessibility&#10;            this.data.routes.averageAccessibility = &#10;                (this.data.routes.averageAccessibility * (this.data.routes.successful - 1) + score) / &#10;                this.data.routes.successful;&#10;        } else {&#10;            this.data.routes.failed++;&#10;        }&#10;        &#10;        this.saveAnalyticsData();&#10;    }&#10;&#10;    // Record obstacle report&#10;    recordObstacleReport(type, severity) {&#10;        this.data.obstacles.total++;&#10;        this.data.obstacles.reported++;&#10;        &#10;        // Update by type&#10;        this.data.obstacles.byType[type] = (this.data.obstacles.byType[type] || 0) + 1;&#10;        &#10;        // Update by severity&#10;        this.data.obstacles.bySeverity[severity] = (this.data.obstacles.bySeverity[severity] || 0) + 1;&#10;        &#10;        this.saveAnalyticsData();&#10;    }&#10;&#10;    // Show analytics dashboard&#10;    showDashboard() {&#10;        const modal = document.createElement('div');&#10;        modal.className = 'modal';&#10;        modal.innerHTML = `&#10;            &lt;div class=&quot;modal-content large&quot;&gt;&#10;                &lt;div class=&quot;modal-header&quot;&gt;&#10;                    &lt;h3&gt; Analytics Dashboard&lt;/h3&gt;&#10;                    &lt;button class=&quot;close-btn&quot; onclick=&quot;this.closest('.modal').remove()&quot;&gt;&amp;times;&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-body&quot;&gt;&#10;                    ${this.renderDashboard()}&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        document.body.appendChild(modal);&#10;        &#10;        // Initialize charts after modal is added to DOM&#10;        setTimeout(() =&gt; {&#10;            this.initializeCharts();&#10;        }, 100);&#10;    }&#10;&#10;    // Render dashboard content&#10;    renderDashboard() {&#10;        return `&#10;            &lt;div class=&quot;analytics-dashboard&quot;&gt;&#10;                &lt;!-- Overview Cards --&gt;&#10;                &lt;div class=&quot;overview-cards&quot; style=&quot;display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;&quot;&gt;&#10;                    &lt;div class=&quot;stat-card routes&quot;&gt;&#10;                        &lt;div class=&quot;stat-icon&quot;&gt;️&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-value&quot;&gt;${this.data.routes.total}&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-label&quot;&gt;Routes Calculated&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-sublabel&quot;&gt;${this.data.routes.successful} successful&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &#10;                    &lt;div class=&quot;stat-card obstacles&quot;&gt;&#10;                        &lt;div class=&quot;stat-icon&quot;&gt;&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-value&quot;&gt;${this.data.obstacles.reported}&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-label&quot;&gt;Obstacles Reported&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-sublabel&quot;&gt;${Object.keys(this.data.obstacles.byType).length} types&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &#10;                    &lt;div class=&quot;stat-card accessibility&quot;&gt;&#10;                        &lt;div class=&quot;stat-icon&quot;&gt;♿&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-value&quot;&gt;${this.data.routes.averageAccessibility.toFixed(1)}&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-label&quot;&gt;Avg. Accessibility&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-sublabel&quot;&gt;Out of 100&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &#10;                    &lt;div class=&quot;stat-card sessions&quot;&gt;&#10;                        &lt;div class=&quot;stat-icon&quot;&gt;&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-value&quot;&gt;${this.data.usage.totalSessions}&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-label&quot;&gt;Total Sessions&lt;/div&gt;&#10;                        &lt;div class=&quot;stat-sublabel&quot;&gt;${this.data.usage.sessionsToday} today&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;!-- Charts Section --&gt;&#10;                &lt;div class=&quot;charts-section&quot;&gt;&#10;                    &lt;div class=&quot;chart-grid&quot; style=&quot;display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem;&quot;&gt;&#10;                        &lt;!-- Accessibility Distribution Chart --&gt;&#10;                        &lt;div class=&quot;chart-container&quot;&gt;&#10;                            &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt;Route Accessibility Distribution&lt;/h4&gt;&#10;                            &lt;div id=&quot;accessibilityChart&quot; class=&quot;chart-placeholder&quot;&gt;&#10;                                ${this.renderAccessibilityChart()}&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;!-- Obstacles by Type Chart --&gt;&#10;                        &lt;div class=&quot;chart-container&quot;&gt;&#10;                            &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt;Obstacles by Type&lt;/h4&gt;&#10;                            &lt;div id=&quot;obstaclesChart&quot; class=&quot;chart-placeholder&quot;&gt;&#10;                                ${this.renderObstaclesChart()}&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &#10;                    &lt;!-- Severity Distribution --&gt;&#10;                    &lt;div class=&quot;severity-distribution&quot; style=&quot;margin: 2rem 0;&quot;&gt;&#10;                        &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt;Obstacle Severity Distribution&lt;/h4&gt;&#10;                        ${this.renderSeverityChart()}&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;!-- Detailed Stats --&gt;&#10;                &lt;div class=&quot;detailed-stats&quot;&gt;&#10;                    &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt;Detailed Statistics&lt;/h4&gt;&#10;                    &#10;                    &lt;div class=&quot;stats-grid&quot; style=&quot;display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;&quot;&gt;&#10;                        &lt;!-- Route Statistics --&gt;&#10;                        &lt;div class=&quot;stats-section&quot;&gt;&#10;                            &lt;h5 style=&quot;color: var(--darker-gray); margin-bottom: 0.5rem;&quot;&gt; Route Statistics&lt;/h5&gt;&#10;                            &lt;ul style=&quot;list-style: none; padding: 0;&quot;&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Total Distance: &lt;strong&gt;${this.data.routes.totalDistance.toFixed(2)} km&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Success Rate: &lt;strong&gt;${this.getSuccessRate()}%&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    High Accessibility: &lt;strong&gt;${this.data.routes.byAccessibilityLevel.high} routes&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0;&quot;&gt;&#10;                                    Average Route Length: &lt;strong&gt;${this.getAverageRouteLength()} km&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                            &lt;/ul&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;!-- Usage Statistics --&gt;&#10;                        &lt;div class=&quot;stats-section&quot;&gt;&#10;                            &lt;h5 style=&quot;color: var(--darker-gray); margin-bottom: 0.5rem;&quot;&gt; Usage Statistics&lt;/h5&gt;&#10;                            &lt;ul style=&quot;list-style: none; padding: 0;&quot;&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Last Session: &lt;strong&gt;${this.formatDate(this.data.usage.lastSession)}&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Sessions Today: &lt;strong&gt;${this.data.usage.sessionsToday}&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0;&quot;&gt;&#10;                                    Account Age: &lt;strong&gt;${this.getAccountAge()} days&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                            &lt;/ul&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;!-- Impact Statistics --&gt;&#10;                        &lt;div class=&quot;stats-section&quot;&gt;&#10;                            &lt;h5 style=&quot;color: var(--darker-gray); margin-bottom: 0.5rem;&quot;&gt; Impact Statistics&lt;/h5&gt;&#10;                            &lt;ul style=&quot;list-style: none; padding: 0;&quot;&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Accessibility Improved: &lt;strong&gt;${this.data.accessibility.routesOptimized} routes&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0; border-bottom: 1px solid var(--light-gray);&quot;&gt;&#10;                                    Community Contributions: &lt;strong&gt;${this.data.obstacles.reported} reports&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;li style=&quot;padding: 0.25rem 0;&quot;&gt;&#10;                                    Average Impact Score: &lt;strong&gt;${this.calculateImpactScore()}/100&lt;/strong&gt;&#10;                                &lt;/li&gt;&#10;                            &lt;/ul&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;!-- Export Options --&gt;&#10;                &lt;div class=&quot;export-section&quot; style=&quot;margin-top: 2rem; padding-top: 2rem; border-top: 2px solid var(--light-gray);&quot;&gt;&#10;                    &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 1rem;&quot;&gt; Export Data&lt;/h4&gt;&#10;                    &lt;div style=&quot;display: flex; gap: 1rem; flex-wrap: wrap;&quot;&gt;&#10;                        &lt;button class=&quot;secondary-btn&quot; onclick=&quot;analytics.exportData('json')&quot;&gt;&#10;                            Export as JSON&#10;                        &lt;/button&gt;&#10;                        &lt;button class=&quot;secondary-btn&quot; onclick=&quot;analytics.exportData('csv')&quot;&gt;&#10;                            Export as CSV&#10;                        &lt;/button&gt;&#10;                        &lt;button class=&quot;secondary-btn&quot; onclick=&quot;analytics.resetData()&quot;&gt;&#10;                            Reset All Data&#10;                        &lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;&#10;    // Render accessibility chart&#10;    renderAccessibilityChart() {&#10;        const data = this.data.routes.byAccessibilityLevel;&#10;        const total = data.high + data.medium + data.low;&#10;        &#10;        if (total === 0) {&#10;            return '&lt;div class=&quot;no-data&quot;&gt;No route data available&lt;/div&gt;';&#10;        }&#10;&#10;        const highPercent = (data.high / total) * 100;&#10;        const mediumPercent = (data.medium / total) * 100;&#10;        const lowPercent = (data.low / total) * 100;&#10;&#10;        return `&#10;            &lt;div class=&quot;accessibility-bars&quot;&gt;&#10;                &lt;div class=&quot;bar-item&quot;&gt;&#10;                    &lt;div class=&quot;bar-label&quot;&gt;High (80+)&lt;/div&gt;&#10;                    &lt;div class=&quot;bar-container&quot;&gt;&#10;                        &lt;div class=&quot;bar-fill&quot; style=&quot;width: ${highPercent}%; background: var(--success-green);&quot;&gt;&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;bar-value&quot;&gt;${data.high} (${highPercent.toFixed(1)}%)&lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;bar-item&quot;&gt;&#10;                    &lt;div class=&quot;bar-label&quot;&gt;Medium (60-79)&lt;/div&gt;&#10;                    &lt;div class=&quot;bar-container&quot;&gt;&#10;                        &lt;div class=&quot;bar-fill&quot; style=&quot;width: ${mediumPercent}%; background: var(--warning-orange);&quot;&gt;&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;bar-value&quot;&gt;${data.medium} (${mediumPercent.toFixed(1)}%)&lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;bar-item&quot;&gt;&#10;                    &lt;div class=&quot;bar-label&quot;&gt;Low (&lt; 60)&lt;/div&gt;&#10;                    &lt;div class=&quot;bar-container&quot;&gt;&#10;                        &lt;div class=&quot;bar-fill&quot; style=&quot;width: ${lowPercent}%; background: var(--error-red);&quot;&gt;&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;bar-value&quot;&gt;${data.low} (${lowPercent.toFixed(1)}%)&lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;&#10;    // Render obstacles chart&#10;    renderObstaclesChart() {&#10;        const data = this.data.obstacles.byType;&#10;        const entries = Object.entries(data).sort((a, b) =&gt; b[1] - a[1]);&#10;        &#10;        if (entries.length === 0) {&#10;            return '&lt;div class=&quot;no-data&quot;&gt;No obstacle data available&lt;/div&gt;';&#10;        }&#10;&#10;        const maxValue = Math.max(...entries.map(([, count]) =&gt; count));&#10;&#10;        return `&#10;            &lt;div class=&quot;obstacles-bars&quot;&gt;&#10;                ${entries.map(([type, count]) =&gt; {&#10;                    const percent = (count / maxValue) * 100;&#10;                    return `&#10;                        &lt;div class=&quot;bar-item&quot;&gt;&#10;                            &lt;div class=&quot;bar-label&quot;&gt;${this.formatObstacleType(type)}&lt;/div&gt;&#10;                            &lt;div class=&quot;bar-container&quot;&gt;&#10;                                &lt;div class=&quot;bar-fill&quot; style=&quot;width: ${percent}%; background: var(--primary-blue);&quot;&gt;&lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;bar-value&quot;&gt;${count}&lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    `;&#10;                }).join('')}&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;&#10;    // Render severity chart&#10;    renderSeverityChart() {&#10;        const data = this.data.obstacles.bySeverity;&#10;        const total = Object.values(data).reduce((sum, count) =&gt; sum + count, 0);&#10;        &#10;        if (total === 0) {&#10;            return '&lt;div class=&quot;no-data&quot;&gt;No severity data available&lt;/div&gt;';&#10;        }&#10;&#10;        const severityColors = {&#10;            low: 'var(--success-green)',&#10;            medium: 'var(--warning-orange)',&#10;            high: 'var(--error-red)',&#10;            critical: '#d32f2f'&#10;        };&#10;&#10;        return `&#10;            &lt;div class=&quot;severity-chart&quot; style=&quot;display: flex; gap: 1rem; align-items: end; height: 200px; padding: 1rem; background: var(--light-gray); border-radius: var(--border-radius-lg);&quot;&gt;&#10;                ${Object.entries(data).map(([severity, count]) =&gt; {&#10;                    const height = total &gt; 0 ? (count / total) * 150 : 0;&#10;                    return `&#10;                        &lt;div class=&quot;severity-bar&quot; style=&quot;flex: 1; display: flex; flex-direction: column; align-items: center;&quot;&gt;&#10;                            &lt;div class=&quot;bar-value&quot; style=&quot;margin-bottom: 0.5rem; font-weight: bold; color: var(--darker-gray);&quot;&gt;&#10;                                ${count}&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;bar&quot; style=&quot;width: 100%; height: ${height}px; background: ${severityColors[severity]}; border-radius: var(--border-radius-sm) var(--border-radius-sm) 0 0;&quot;&gt;&lt;/div&gt;&#10;                            &lt;div class=&quot;bar-label&quot; style=&quot;margin-top: 0.5rem; font-size: var(--font-size-sm); color: var(--dark-gray); text-align: center;&quot;&gt;&#10;                                ${severity.charAt(0).toUpperCase() + severity.slice(1)}&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    `;&#10;                }).join('')}&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;&#10;    // Initialize charts&#10;    initializeCharts() {&#10;        // Add animations to bars&#10;        const bars = document.querySelectorAll('.bar-fill, .bar');&#10;        bars.forEach(bar =&gt; {&#10;            const width = bar.style.width;&#10;            const height = bar.style.height;&#10;            bar.style.width = '0';&#10;            bar.style.height = '0';&#10;            &#10;            setTimeout(() =&gt; {&#10;                bar.style.transition = 'width 1s ease, height 1s ease';&#10;                bar.style.width = width;&#10;                bar.style.height = height;&#10;            }, 100);&#10;        });&#10;    }&#10;&#10;    // Format obstacle type&#10;    formatObstacleType(type) {&#10;        const types = {&#10;            'construction': 'Construction',&#10;            'pothole': 'Potholes',&#10;            'blocked_sidewalk': 'Blocked Paths',&#10;            'steep_slope': 'Steep Slopes',&#10;            'no_curb_cut': 'No Curb Cuts',&#10;            'debris': 'Debris',&#10;            'flooding': 'Flooding',&#10;            'poor_lighting': 'Poor Lighting',&#10;            'broken_infrastructure': 'Broken Infrastructure',&#10;            'other': 'Other'&#10;        };&#10;        return types[type] || type;&#10;    }&#10;&#10;    // Calculate success rate&#10;    getSuccessRate() {&#10;        const total = this.data.routes.total;&#10;        return total &gt; 0 ? ((this.data.routes.successful / total) * 100).toFixed(1) : 0;&#10;    }&#10;&#10;    // Get average route length&#10;    getAverageRouteLength() {&#10;        const successful = this.data.routes.successful;&#10;        return successful &gt; 0 ? (this.data.routes.totalDistance / successful).toFixed(2) : 0;&#10;    }&#10;&#10;    // Format date&#10;    formatDate(dateString) {&#10;        const date = new Date(dateString);&#10;        return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();&#10;    }&#10;&#10;    // Get account age&#10;    getAccountAge() {&#10;        const firstSession = localStorage.getItem('aura_first_session');&#10;        if (!firstSession) {&#10;            localStorage.setItem('aura_first_session', new Date().toISOString());&#10;            return 0;&#10;        }&#10;        &#10;        const daysDiff = Math.floor((new Date() - new Date(firstSession)) / (1000 * 60 * 60 * 24));&#10;        return daysDiff;&#10;    }&#10;&#10;    // Calculate impact score&#10;    calculateImpactScore() {&#10;        const routes = this.data.routes.successful;&#10;        const obstacles = this.data.obstacles.reported;&#10;        const avgAccessibility = this.data.routes.averageAccessibility;&#10;        &#10;        // Weight different factors&#10;        const routeScore = Math.min(routes * 5, 40); // Max 40 points for routes&#10;        const obstacleScore = Math.min(obstacles * 10, 30); // Max 30 points for obstacle reports&#10;        const accessibilityScore = Math.min(avgAccessibility * 0.3, 30); // Max 30 points for accessibility&#10;        &#10;        return Math.round(routeScore + obstacleScore + accessibilityScore);&#10;    }&#10;&#10;    // Export data&#10;    exportData(format) {&#10;        try {&#10;            if (format === 'json') {&#10;                const blob = new Blob([JSON.stringify(this.data, null, 2)], {&#10;                    type: 'application/json'&#10;                });&#10;                this.downloadFile(blob, `aura-analytics-${Date.now()}.json`);&#10;            } else if (format === 'csv') {&#10;                const csv = this.convertToCSV();&#10;                const blob = new Blob([csv], {&#10;                    type: 'text/csv'&#10;                });&#10;                this.downloadFile(blob, `aura-analytics-${Date.now()}.csv`);&#10;            }&#10;            &#10;            this.showNotification('Data exported successfully!', 'success');&#10;        } catch (error) {&#10;            console.error('Export error:', error);&#10;            this.showNotification('Failed to export data', 'error');&#10;        }&#10;    }&#10;&#10;    // Convert data to CSV format&#10;    convertToCSV() {&#10;        const lines = [];&#10;        &#10;        // Routes data&#10;        lines.push('Routes Data');&#10;        lines.push('Metric,Value');&#10;        lines.push(`Total Routes,${this.data.routes.total}`);&#10;        lines.push(`Successful Routes,${this.data.routes.successful}`);&#10;        lines.push(`Failed Routes,${this.data.routes.failed}`);&#10;        lines.push(`Total Distance,${this.data.routes.totalDistance}`);&#10;        lines.push(`Average Accessibility,${this.data.routes.averageAccessibility}`);&#10;        lines.push('');&#10;        &#10;        // Obstacles data&#10;        lines.push('Obstacles Data');&#10;        lines.push('Type,Count');&#10;        Object.entries(this.data.obstacles.byType).forEach(([type, count]) =&gt; {&#10;            lines.push(`${type},${count}`);&#10;        });&#10;        lines.push('');&#10;        &#10;        return lines.join('\n');&#10;    }&#10;&#10;    // Download file&#10;    downloadFile(blob, filename) {&#10;        const url = URL.createObjectURL(blob);&#10;        const a = document.createElement('a');&#10;        a.href = url;&#10;        a.download = filename;&#10;        document.body.appendChild(a);&#10;        a.click();&#10;        document.body.removeChild(a);&#10;        URL.revokeObjectURL(url);&#10;    }&#10;&#10;    // Reset all data&#10;    resetData() {&#10;        if (confirm('Are you sure you want to reset all analytics data? This action cannot be undone.')) {&#10;            this.data = this.getDefaultData();&#10;            this.saveAnalyticsData();&#10;            &#10;            // Refresh dashboard if open&#10;            const dashboard = document.querySelector('.analytics-dashboard');&#10;            if (dashboard) {&#10;                dashboard.innerHTML = this.renderDashboard();&#10;                setTimeout(() =&gt; this.initializeCharts(), 100);&#10;            }&#10;            &#10;            this.showNotification('Analytics data reset successfully!', 'success');&#10;        }&#10;    }&#10;&#10;    // Save analytics data&#10;    saveAnalyticsData() {&#10;        try {&#10;            localStorage.setItem('aura_analytics', JSON.stringify(this.data));&#10;        } catch (error) {&#10;            console.error('Error saving analytics data:', error);&#10;        }&#10;    }&#10;&#10;    // Show notification&#10;    showNotification(message, type = 'info') {&#10;        const notification = document.createElement('div');&#10;        const colors = {&#10;            'success': 'var(--success-green)',&#10;            'error': 'var(--error-red)',&#10;            'warning': 'var(--warning-orange)',&#10;            'info': 'var(--info-blue)'&#10;        };&#10;        &#10;        notification.style.cssText = `&#10;            position: fixed;&#10;            top: 20px;&#10;            right: 20px;&#10;            background: ${colors[type]};&#10;            color: white;&#10;            padding: 1rem 1.5rem;&#10;            border-radius: var(--border-radius-md);&#10;            box-shadow: var(--shadow-lg);&#10;            z-index: 10000;&#10;            max-width: 400px;&#10;            animation: slideIn 0.3s ease;&#10;        `;&#10;        notification.textContent = message;&#10;        &#10;        document.body.appendChild(notification);&#10;        &#10;        setTimeout(() =&gt; {&#10;            notification.style.animation = 'slideOut 0.3s ease forwards';&#10;            setTimeout(() =&gt; {&#10;                if (notification.parentNode) {&#10;                    document.body.removeChild(notification);&#10;                }&#10;            }, 300);&#10;        }, 4000);&#10;    }&#10;}&#10;&#10;// Add styles for analytics components&#10;const analyticsStyles = document.createElement('style');&#10;analyticsStyles.textContent = `&#10;    .stat-card {&#10;        background: var(--white);&#10;        border-radius: var(--border-radius-lg);&#10;        padding: 1.5rem;&#10;        text-align: center;&#10;        box-shadow: var(--shadow-sm);&#10;        transition: transform var(--transition-base);&#10;    }&#10;    &#10;    .stat-card:hover {&#10;        transform: translateY(-2px);&#10;        box-shadow: var(--shadow-md);&#10;    }&#10;    &#10;    .stat-icon {&#10;        font-size: 2rem;&#10;        margin-bottom: 0.5rem;&#10;    }&#10;    &#10;    .stat-value {&#10;        font-size: 2rem;&#10;        font-weight: bold;&#10;        color: var(--primary-blue);&#10;        margin-bottom: 0.25rem;&#10;    }&#10;    &#10;    .stat-label {&#10;        color: var(--darker-gray);&#10;        font-weight: 600;&#10;        margin-bottom: 0.25rem;&#10;    }&#10;    &#10;    .stat-sublabel {&#10;        color: var(--dark-gray);&#10;        font-size: var(--font-size-sm);&#10;    }&#10;    &#10;    .chart-container {&#10;        background: var(--white);&#10;        border-radius: var(--border-radius-lg);&#10;        padding: 1.5rem;&#10;        box-shadow: var(--shadow-sm);&#10;    }&#10;    &#10;    .bar-item {&#10;        display: flex;&#10;        align-items: center;&#10;        gap: 1rem;&#10;        margin-bottom: 0.75rem;&#10;    }&#10;    &#10;    .bar-label {&#10;        min-width: 120px;&#10;        font-size: var(--font-size-sm);&#10;        color: var(--darker-gray);&#10;        font-weight: 600;&#10;    }&#10;    &#10;    .bar-container {&#10;        flex: 1;&#10;        height: 20px;&#10;        background: var(--light-gray);&#10;        border-radius: var(--border-radius-sm);&#10;        overflow: hidden;&#10;    }&#10;    &#10;    .bar-fill {&#10;        height: 100%;&#10;        border-radius: var(--border-radius-sm);&#10;        transition: width 1s ease;&#10;    }&#10;    &#10;    .bar-value {&#10;        min-width: 80px;&#10;        text-align: right;&#10;        font-size: var(--font-size-sm);&#10;        color: var(--darker-gray);&#10;        font-weight: 600;&#10;    }&#10;    &#10;    .no-data {&#10;        text-align: center;&#10;        color: var(--dark-gray);&#10;        padding: 2rem;&#10;        font-style: italic;&#10;    }&#10;    &#10;    .stats-section {&#10;        background: var(--white);&#10;        border-radius: var(--border-radius-lg);&#10;        padding: 1.5rem;&#10;        box-shadow: var(--shadow-sm);&#10;    }&#10;`;&#10;&#10;document.head.appendChild(analyticsStyles);&#10;&#10;// Export the Analytics class&#10;window.Analytics = Analytics;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/components/MapboxMap.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/components/MapboxMap.js" />
              <option name="originalContent" value="// Mapbox Integration for Enhanced Route Visualization&#10;// Provides high-quality maps and accurate route display&#10;&#10;class MapboxMap {&#10;    constructor() {&#10;        this.map = null;&#10;        this.currentRoute = null;&#10;        this.routeLayer = null;&#10;        this.markers = {&#10;            start: null,&#10;            end: null,&#10;            obstacles: []&#10;        };&#10;        this.amenityMarkers = [];&#10;        this.isInitialized = false;&#10;        this.resizeObserver = null;&#10;        &#10;        // Mapbox configuration (token can be injected at runtime)&#10;        const defaultToken = 'pk.eyJ1Ijoic2thdGUiLCJhIjoiY21kOTlxOW1iMDV1bzJtcHY3bmFobnVmcCJ9.zDBww977UxLmhPDSeZk5Jw';&#10;        this.accessToken = (window.MAPBOX_TOKEN || localStorage.getItem('MAPBOX_TOKEN') || defaultToken);&#10;        this.mapboxAvailable = typeof mapboxgl !== 'undefined';&#10;        this.reportMode = false;&#10;        this.tempReportMarker = null;&#10;        // Ensure resize handler&#10;        this._boundHandleResize = () =&gt; {&#10;            try { this.map &amp;&amp; this.map.resize(); } catch {}&#10;        };&#10;    }&#10;&#10;    async init() {&#10;        console.log('️ Initializing Mapbox Map...');&#10;        &#10;        // Check if Mapbox GL JS is available&#10;        if (!this.mapboxAvailable) {&#10;            console.warn('Mapbox GL JS not available, falling back to Leaflet');&#10;            return false;&#10;        }&#10;        &#10;        // Check if container exists&#10;        const mapContainer = document.getElementById('map-container');&#10;        if (!mapContainer) {&#10;            console.warn('Map container not found');&#10;            return false;&#10;        }&#10;        &#10;        try {&#10;            // Set access token if provided&#10;            if (window.MAPBOX_TOKEN) {&#10;                localStorage.setItem('MAPBOX_TOKEN', window.MAPBOX_TOKEN);&#10;                this.accessToken = window.MAPBOX_TOKEN;&#10;            } else if (!this.accessToken) {&#10;                console.warn('⚠️ No Mapbox token configured for frontend map. Set window.MAPBOX_TOKEN or localStorage.MAPBOX_TOKEN to enable Directions and tiles.');&#10;            }&#10;            if (this.accessToken) {&#10;                mapboxgl.accessToken = this.accessToken;&#10;            }&#10;            &#10;            // Initialize Mapbox map&#10;            this.map = new mapboxgl.Map({&#10;                container: 'map-container',&#10;                style: 'mapbox://styles/mapbox/streets-v12', // High-quality street style&#10;                center: [-88.0834, 42.0334], // Default: Schaumburg, IL&#10;                zoom: 13,&#10;                pitch: 0, // 2D view for accessibility&#10;                bearing: 0&#10;            });&#10;            &#10;            // Remove non-essential controls per request (no buttons top-right or elsewhere)&#10;            // Do not add NavigationControl or other UI controls&#10;            &#10;            // Wait for map to load&#10;            await new Promise((resolve) =&gt; {&#10;                this.map.on('load', resolve);&#10;            });&#10;&#10;            // Ensure map resizes to container after load and when container changes size&#10;            this.map.resize();&#10;            this.resizeObserver = new ResizeObserver(() =&gt; {&#10;                try { this.map &amp;&amp; this.map.resize(); } catch {}&#10;            });&#10;            const container = document.getElementById('map-container');&#10;            if (container) this.resizeObserver.observe(container);&#10;&#10;            // Also resize on window resize and after visibility changes&#10;            window.addEventListener('resize', this._boundHandleResize);&#10;            // Kick a couple of delayed resizes to catch parent visibility toggles&#10;            setTimeout(this._boundHandleResize, 50);&#10;            setTimeout(this._boundHandleResize, 300);&#10;&#10;            // Add click handler for report mode&#10;            this.map.on('click', (e) =&gt; this.onMapClick(e));&#10;&#10;            this.isInitialized = true;&#10;            console.log('✅ Mapbox map initialized successfully');&#10;            return true;&#10;            &#10;        } catch (error) {&#10;            console.error('❌ Failed to initialize Mapbox map:', error);&#10;            return false;&#10;        }&#10;    }&#10;&#10;    async displayRoute(routeData) {&#10;        if (!this.isInitialized || !this.map) {&#10;            console.warn('Map not initialized');&#10;            return;&#10;        }&#10;&#10;        this.currentRoute = routeData;&#10;        this.clearRoute();&#10;&#10;        try {&#10;            let coordinates = this.extractCoordinates(routeData);&#10;            const pts = (routeData.points || []);&#10;&#10;            // Prefer Mapbox Directions geometry to ensure road/sidewalk following&#10;            // Use it whenever backend geometry is sparse (&lt; 12 vertices). Fallback to backend if Directions fails.&#10;            if (pts.length &gt;= 2 &amp;&amp; (!coordinates || coordinates.length &lt; 12)) {&#10;                const start = [pts[0].longitude, pts[0].latitude];&#10;                const end = [pts[pts.length - 1].longitude, pts[pts.length - 1].latitude];&#10;                const directions = await this.fetchMapboxDirections(start, end);&#10;                if (directions &amp;&amp; directions.length &gt;= 2) {&#10;                    coordinates = directions;&#10;                }&#10;            }&#10;&#10;            if (!coordinates || coordinates.length &lt; 2) {&#10;                console.warn('Not enough coordinates for route');&#10;                return;&#10;            }&#10;&#10;            // Add route line and markers&#10;            this.addRouteLine(coordinates);&#10;            this.addStartMarker(coordinates[0]);&#10;            this.addEndMarker(coordinates[coordinates.length - 1]);&#10;            this.addObstacleMarkers(routeData.obstacles || []);&#10;            await this.addAmenityMarkersNearRoute(coordinates);&#10;            // Ensure proper resize before fitting bounds&#10;            try { this.map.resize(); } catch {}&#10;            this.fitMapToRoute(coordinates);&#10;            console.log('✅ Mapbox route displayed successfully');&#10;        } catch (error) {&#10;            console.error('❌ Error displaying route on Mapbox:', error);&#10;        }&#10;    }&#10;&#10;    async fetchMapboxDirections(startLngLat, endLngLat) {&#10;        try {&#10;            if (!this.accessToken) {&#10;                return null;&#10;            }&#10;            const coords = `${startLngLat[0]},${startLngLat[1]};${endLngLat[0]},${endLngLat[1]}`;&#10;            const url = `https://api.mapbox.com/directions/v5/mapbox/walking/${coords}?geometries=geojson&amp;overview=full&amp;steps=true&amp;access_token=${this.accessToken}`;&#10;            const res = await fetch(url, { method: 'GET' });&#10;            if (!res.ok) {&#10;                console.warn('Mapbox Directions error:', res.status);&#10;                return null;&#10;            }&#10;            const data = await res.json();&#10;            const route = data &amp;&amp; data.routes &amp;&amp; data.routes[0];&#10;            if (!route || !route.geometry || !route.geometry.coordinates) return null;&#10;            return route.geometry.coordinates; // [lng, lat] list&#10;        } catch (e) {&#10;            console.warn('Mapbox Directions fetch failed:', e.message);&#10;            return null;&#10;        }&#10;    }&#10;&#10;    extractCoordinates(routeData) {&#10;        const coordinates = [];&#10;        if (routeData.points &amp;&amp; Array.isArray(routeData.points)) {&#10;            for (const point of routeData.points) {&#10;                if (typeof point.longitude === 'number' &amp;&amp; typeof point.latitude === 'number') {&#10;                    coordinates.push([point.longitude, point.latitude]);&#10;                }&#10;            }&#10;        }&#10;        return coordinates; // Do not fallback to direct line; if empty, rendering will abort&#10;    }&#10;&#10;    addRouteLine(coordinates) {&#10;        const sourceId = 'route-source';&#10;        const layerMain = 'route-main';&#10;        const layerCasing = 'route-casing';&#10;        &#10;        // Remove existing route if any&#10;        if (this.map.getLayer(layerMain)) this.map.removeLayer(layerMain);&#10;        if (this.map.getLayer(layerCasing)) this.map.removeLayer(layerCasing);&#10;        if (this.map.getSource(sourceId)) this.map.removeSource(sourceId);&#10;        &#10;        // Add route source&#10;        this.map.addSource(sourceId, {&#10;            type: 'geojson',&#10;            data: { type: 'Feature', properties: {}, geometry: { type: 'LineString', coordinates } }&#10;        });&#10;        &#10;        // Google Maps-like casing (white outline)&#10;        this.map.addLayer({&#10;            id: layerCasing,&#10;            type: 'line',&#10;            source: sourceId,&#10;            layout: { 'line-join': 'round', 'line-cap': 'round' },&#10;            paint: {&#10;                'line-color': '#ffffff',&#10;                'line-width': 10,&#10;                'line-opacity': 1&#10;            }&#10;        });&#10;        &#10;        // Main blue route line&#10;        this.map.addLayer({&#10;            id: layerMain,&#10;            type: 'line',&#10;            source: sourceId,&#10;            layout: { 'line-join': 'round', 'line-cap': 'round' },&#10;            paint: {&#10;                'line-color': '#3478F6',&#10;                'line-width': 6,&#10;                'line-opacity': 0.95&#10;            }&#10;        });&#10;        &#10;        // Click + hover&#10;        this.map.on('click', layerMain, (e) =&gt; {&#10;            new mapboxgl.Popup()&#10;                .setLngLat(e.lngLat)&#10;                .setHTML(`&#10;                    &lt;div style=&quot;padding: 10px;&quot;&gt;&#10;                        &lt;strong&gt;Accessible Route&lt;/strong&gt;&lt;br&gt;&#10;                        &lt;small&gt;Road &amp; sidewalk-following path&lt;/small&gt;&#10;                    &lt;/div&gt;&#10;                `)&#10;                .addTo(this.map);&#10;        });&#10;        this.map.on('mouseenter', layerMain, () =&gt; { this.map.getCanvas().style.cursor = 'pointer'; });&#10;        this.map.on('mouseleave', layerMain, () =&gt; { this.map.getCanvas().style.cursor = ''; });&#10;    }&#10;&#10;    addStartMarker(coordinates) {&#10;        const marker = new mapboxgl.Marker({&#10;            color: '#4CAF50', // Green for start&#10;            scale: 1.2&#10;        })&#10;        .setLngLat(coordinates)&#10;        .setPopup(new mapboxgl.Popup().setHTML(`&#10;            &lt;div style=&quot;padding: 10px;&quot;&gt;&#10;                &lt;strong&gt; Start Location&lt;/strong&gt;&lt;br&gt;&#10;                &lt;small&gt;Begin your accessible journey here&lt;/small&gt;&#10;            &lt;/div&gt;&#10;        `))&#10;        .addTo(this.map);&#10;        &#10;        this.markers.start = marker;&#10;    }&#10;&#10;    addEndMarker(coordinates) {&#10;        const marker = new mapboxgl.Marker({&#10;            color: '#F44336', // Red for end&#10;            scale: 1.2&#10;        })&#10;        .setLngLat(coordinates)&#10;        .setPopup(new mapboxgl.Popup().setHTML(`&#10;            &lt;div style=&quot;padding: 10px;&quot;&gt;&#10;                &lt;strong&gt; Destination&lt;/strong&gt;&lt;br&gt;&#10;                &lt;small&gt;Your accessible route ends here&lt;/small&gt;&#10;            &lt;/div&gt;&#10;        `))&#10;        .addTo(this.map);&#10;        &#10;        this.markers.end = marker;&#10;    }&#10;&#10;    addObstacleMarkers(obstacles) {&#10;        // Clear existing obstacle markers&#10;        this.markers.obstacles.forEach(marker =&gt; marker.remove());&#10;        this.markers.obstacles = [];&#10;&#10;        const addMarkers = (list) =&gt; {&#10;            list.forEach(obstacle =&gt; {&#10;                if (obstacle.location) {&#10;                    const marker = new mapboxgl.Marker({&#10;                        color: '#FF9800', // Orange for obstacles&#10;                        scale: 0.8&#10;                    })&#10;                    .setLngLat([obstacle.location.longitude, obstacle.location.latitude])&#10;                    .setPopup(new mapboxgl.Popup().setHTML(`&#10;                        &lt;div style=&quot;padding: 10px;&quot;&gt;&#10;                            &lt;strong&gt;⚠️ ${obstacle.type || 'Obstacle'}&lt;/strong&gt;&lt;br&gt;&#10;                            &lt;small&gt;${obstacle.description || 'Accessibility challenge detected'}&lt;/small&gt;&#10;                        &lt;/div&gt;&#10;                    `))&#10;                    .addTo(this.map);&#10;                    this.markers.obstacles.push(marker);&#10;                }&#10;            });&#10;        };&#10;&#10;        if (obstacles &amp;&amp; obstacles.length) {&#10;            addMarkers(obstacles);&#10;        }&#10;&#10;        // If none provided, attempt nearby fetch&#10;        if (!this.markers.obstacles.length) {&#10;            try {&#10;                const source = this.map.getSource('route-source');&#10;                const data = source &amp;&amp; source._data;&#10;                const coords = data?.geometry?.coordinates;&#10;                if (Array.isArray(coords) &amp;&amp; coords.length) {&#10;                    const mid = coords[Math.floor(coords.length / 2)];&#10;                    const lat = mid[1];&#10;                    const lon = mid[0];&#10;                    fetch(`${window.location.origin}/api/obstacles?active_only=true&amp;lat=${lat}&amp;lon=${lon}&amp;radius=600`)&#10;                        .then(r =&gt; r.ok ? r.json() : null)&#10;                        .then(list =&gt; { if (Array.isArray(list)) addMarkers(list); })&#10;                        .catch(() =&gt; {});&#10;                }&#10;            } catch {}&#10;        }&#10;&#10;        // Final fallback: fetch all active obstacles if still none&#10;        if (!this.markers.obstacles.length) {&#10;            fetch(`${window.location.origin}/api/obstacles?active_only=true`)&#10;                .then(r =&gt; r.ok ? r.json() : null)&#10;                .then(list =&gt; { if (Array.isArray(list)) { addMarkers(list); console.log(`✅ Loaded ${list.length} global obstacles`); } })&#10;                .catch(() =&gt; {});&#10;        }&#10;    }&#10;&#10;    async addAmenityMarkersNearRoute(coordinates) {&#10;        try {&#10;            // Clear existing amenity markers&#10;            this.amenityMarkers.forEach(m =&gt; m.remove());&#10;            this.amenityMarkers = [];&#10;&#10;            if (!coordinates || coordinates.length === 0) return;&#10;&#10;            // Use midpoint of the route to query nearby amenities&#10;            const mid = coordinates[Math.floor(coordinates.length / 2)];&#10;            const lat = mid[1];&#10;            const lon = mid[0];&#10;&#10;            const url = `${window.location.origin}/api/amenities?lat=${lat}&amp;lon=${lon}&amp;radius=1500`;&#10;            console.log(' Fetching nearby amenities:', url);&#10;            const res = await fetch(url, { headers: { 'Accept': 'application/json' }});&#10;            if (!res.ok) { console.warn('Amenity API error', res.status); return; }&#10;            let amenities = await res.json();&#10;            if (!Array.isArray(amenities) || amenities.length === 0) {&#10;                console.log('ℹ️ No nearby amenities returned (filtered). Falling back to all demo amenities.');&#10;                // Fallback: fetch all amenities (unfiltered)&#10;                try {&#10;                    const allRes = await fetch(`${window.location.origin}/api/amenities`);&#10;                    if (allRes.ok) {&#10;                        amenities = await allRes.json();&#10;                    }&#10;                } catch {}&#10;            }&#10;&#10;            if (!Array.isArray(amenities) || amenities.length === 0) {&#10;                console.log('ℹ️ Still no amenities to display.');&#10;                return;&#10;            }&#10;&#10;            const typeColors = {&#10;                REST_SPOT: '#34a853',&#10;                AUDIO_CROSSWALK: '#ffbf00',&#10;                ELEVATOR: '#673ab7'&#10;            };&#10;&#10;            amenities.forEach(a =&gt; {&#10;                if (!a?.location) return;&#10;                const el = document.createElement('div');&#10;                const color = typeColors[a.type] || '#34a853';&#10;                el.className = 'amenity-marker';&#10;                el.style.cssText = `&#10;                    background: ${color};&#10;                    width: 16px; height: 16px; border-radius: 50%;&#10;                    border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,.35);&#10;                `;&#10;                const marker = new mapboxgl.Marker({ element: el, anchor: 'center' })&#10;                    .setLngLat([a.location.longitude, a.location.latitude])&#10;                    .setPopup(new mapboxgl.Popup().setHTML(`&#10;                        &lt;div style=&quot;padding:8px; max-width:220px&quot;&gt;&#10;                            &lt;strong&gt;${a.name || 'Amenity'}&lt;/strong&gt;&lt;br/&gt;&#10;                            ${a.type ? `&lt;small&gt;Type: ${String(a.type).replace(/_/g, ' ')}&lt;/small&gt;&lt;br/&gt;` : ''}&#10;                            ${a.description ? `&lt;div style='margin-top:4px;'&gt;${a.description}&lt;/div&gt;` : ''}&#10;                        &lt;/div&gt;&#10;                    `))&#10;                    .addTo(this.map);&#10;                this.amenityMarkers.push(marker);&#10;            });&#10;            console.log(`✅ Placed ${this.amenityMarkers.length} amenity markers`);&#10;        } catch (e) {&#10;            console.warn('Amenity markers failed:', e.message);&#10;        }&#10;    }&#10;&#10;    fitMapToRoute(coordinates) {&#10;        if (!coordinates || coordinates.length &lt; 2) return;&#10;        const bounds = new mapboxgl.LngLatBounds();&#10;        for (const c of coordinates) bounds.extend(c);&#10;        this.map.fitBounds(bounds, { padding: 60, maxZoom: 17.5, duration: 0 });&#10;    }&#10;&#10;    clearRoute() {&#10;        // Remove route layers (support both old and new IDs)&#10;        const layerIds = ['route-layer', 'route-shadow', 'route-main', 'route-casing'];&#10;        layerIds.forEach(layerId =&gt; {&#10;            if (this.map.getLayer(layerId)) {&#10;                this.map.removeLayer(layerId);&#10;            }&#10;        });&#10;        &#10;        // Remove route source&#10;        const sourceIds = ['route-source'];&#10;        sourceIds.forEach(sourceId =&gt; {&#10;            if (this.map.getSource(sourceId)) {&#10;                this.map.removeSource(sourceId);&#10;            }&#10;        });&#10;        &#10;        // Remove markers&#10;        Object.values(this.markers).forEach(marker =&gt; {&#10;            if (Array.isArray(marker)) {&#10;                marker.forEach(m =&gt; m.remove());&#10;            } else if (marker) {&#10;                marker.remove();&#10;            }&#10;        });&#10;        &#10;        // Clear amenity markers as well&#10;        if (this.amenityMarkers &amp;&amp; this.amenityMarkers.length) {&#10;            this.amenityMarkers.forEach(m =&gt; m.remove());&#10;            this.amenityMarkers = [];&#10;        }&#10;        &#10;        this.markers = { start: null, end: null, obstacles: [] };&#10;    }&#10;&#10;    changeStyle(style) {&#10;        if (!this.isInitialized) return;&#10;        &#10;        const styles = {&#10;            streets: 'mapbox://styles/mapbox/streets-v12',&#10;            satellite: 'mapbox://styles/mapbox/satellite-streets-v12',&#10;            light: 'mapbox://styles/mapbox/light-v11'&#10;        };&#10;        &#10;        if (styles[style]) {&#10;            this.map.setStyle(styles[style]);&#10;        }&#10;    }&#10;&#10;    isAvailable() {&#10;        return this.mapboxAvailable &amp;&amp; this.isInitialized;&#10;    }&#10;&#10;    enableReportMode() {&#10;        this.reportMode = true;&#10;        this.showToast('Click on the map to drop a pin for the obstacle');&#10;        // Visually hint by changing cursor&#10;        try { this.map.getCanvas().style.cursor = 'crosshair'; } catch {}&#10;    }&#10;&#10;    async onMapClick(e) {&#10;        if (!this.reportMode) return;&#10;        const lngLat = e.lngLat;&#10;&#10;        // Place or move temp marker&#10;        if (this.tempReportMarker) this.tempReportMarker.remove();&#10;        this.tempReportMarker = new mapboxgl.Marker({ color: '#FF5722' }).setLngLat([lngLat.lng, lngLat.lat]).addTo(this.map);&#10;&#10;        // Ask for basic info, then submit&#10;        const type = prompt('Obstacle type (stairs, construction, broken_surface, narrow_path, steep_slope, blocked_access, temporary_barrier, other):', 'construction');&#10;        if (!type) return;&#10;        const severity = prompt('Severity (low, medium, high, critical):', 'medium');&#10;        const description = prompt('Short description:', 'Temporary construction') || 'User reported obstacle';&#10;        &#10;        try {&#10;            const payload = {&#10;                location: { latitude: lngLat.lat, longitude: lngLat.lng },&#10;                type, severity, description,&#10;                affects_wheelchair: true,&#10;                affects_visually_impaired: false,&#10;                affects_mobility_aid: true&#10;            };&#10;            const res = await fetch(`${window.location.origin}/api/obstacles/report`, {&#10;                method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload)&#10;            });&#10;            if (!res.ok) throw new Error('Report failed');&#10;            this.showToast('Obstacle reported. Thank you!');&#10;&#10;            // Add permanent obstacle marker&#10;            const marker = new mapboxgl.Marker({ color: '#FF9800' })&#10;                .setLngLat([lngLat.lng, lngLat.lat])&#10;                .setPopup(new mapboxgl.Popup().setHTML(`&lt;div style=&quot;padding:8px&quot;&gt;&lt;strong&gt;Obstacle&lt;/strong&gt;&lt;br/&gt;${type} - ${severity}&lt;br/&gt;${description}&lt;/div&gt;`))&#10;                .addTo(this.map);&#10;            this.markers.obstacles.push(marker);&#10;        } catch (err) {&#10;            console.error(err);&#10;            this.showToast('Failed to report obstacle');&#10;        } finally {&#10;            this.reportMode = false;&#10;            try { this.map.getCanvas().style.cursor = ''; } catch {}&#10;            if (this.tempReportMarker) { this.tempReportMarker.remove(); this.tempReportMarker = null; }&#10;        }&#10;    }&#10;&#10;    showToast(message) {&#10;        const el = document.createElement('div');&#10;        el.style.cssText = 'position:absolute;top:10px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:6px 10px;border-radius:6px;z-index:9999;opacity:.95;font-size:12px;';&#10;        el.textContent = message;&#10;        document.body.appendChild(el);&#10;        setTimeout(() =&gt; el.remove(), 2500);&#10;    }&#10;}&#10;&#10;// Create global instance and helper to set token at runtime&#10;window.mapboxMap = new MapboxMap();&#10;window.setMapboxToken = function(token) {&#10;    try {&#10;        if (!token) return;&#10;        localStorage.setItem('MAPBOX_TOKEN', token);&#10;        window.MAPBOX_TOKEN = token;&#10;        if (typeof mapboxgl !== 'undefined') {&#10;            mapboxgl.accessToken = token;&#10;        }&#10;        console.log('✅ Mapbox token set for frontend');&#10;    } catch {}&#10;};&#10;&#10;// Set the provided token at runtime so the frontend uses it immediately.&#10;window.setMapboxToken('pk.eyJ1Ijoic2thdGUiLCJhIjoiY21kOTlxOW1iMDV1bzJtcHY3bmFobnVmcCJ9.zDBww977UxLmhPDSeZk5Jw');&#10;" />
              <option name="updatedContent" value="// Mapbox Integration for Enhanced Route Visualization&#10;// Provides high-quality maps and accurate route display&#10;&#10;class MapboxMap {&#10;    constructor() {&#10;        this.map = null;&#10;        this.currentRoute = null;&#10;        this.routeLayer = null;&#10;        this.markers = {&#10;            start: null,&#10;            end: null,&#10;            obstacles: []&#10;        };&#10;        this.amenityMarkers = [];&#10;        this.isInitialized = false;&#10;        this.resizeObserver = null;&#10;        &#10;        const defaultToken = 'pk.eyJ1Ijoic2thdGUiLCJhIjoiY21kOTlxOW1iMDV1bzJtcHY3bmFobnVmcCJ9.zDBww977UxLmhPDSeZk5Jw';&#10;        this.accessToken = (window.MAPBOX_TOKEN || localStorage.getItem('MAPBOX_TOKEN') || defaultToken);&#10;        this.mapboxAvailable = typeof mapboxgl !== 'undefined';&#10;        this.reportMode = false;&#10;        this.tempReportMarker = null;&#10;        this._boundHandleResize = () =&gt; {&#10;            try { this.map &amp;&amp; this.map.resize(); } catch {}&#10;        };&#10;    }&#10;&#10;    async init() {&#10;        console.log('️ Initializing Mapbox Map...');&#10;        &#10;        // Check if Mapbox GL JS is available&#10;        if (!this.mapboxAvailable) {&#10;            console.warn('Mapbox GL JS not available, falling back to Leaflet');&#10;            return false;&#10;        }&#10;        &#10;        // Check if container exists&#10;        const mapContainer = document.getElementById('map-container');&#10;        if (!mapContainer) {&#10;            console.warn('Map container not found');&#10;            return false;&#10;        }&#10;        &#10;        try {&#10;            // Set access token if provided&#10;            if (window.MAPBOX_TOKEN) {&#10;                localStorage.setItem('MAPBOX_TOKEN', window.MAPBOX_TOKEN);&#10;                this.accessToken = window.MAPBOX_TOKEN;&#10;            } else if (!this.accessToken) {&#10;                console.warn('⚠️ No Mapbox token configured for frontend map. Set window.MAPBOX_TOKEN or localStorage.MAPBOX_TOKEN to enable Directions and tiles.');&#10;            }&#10;            if (this.accessToken) {&#10;                mapboxgl.accessToken = this.accessToken;&#10;            }&#10;            &#10;            // Initialize Mapbox map&#10;            this.map = new mapboxgl.Map({&#10;                container: 'map-container',&#10;                style: 'mapbox://styles/mapbox/streets-v12', // High-quality street style&#10;                center: [-88.0834, 42.0334], // Default: Schaumburg, IL&#10;                zoom: 13,&#10;                pitch: 0, // 2D view for accessibility&#10;                bearing: 0&#10;            });&#10;            &#10;            // Remove non-essential controls per request (no buttons top-right or elsewhere)&#10;            // Do not add NavigationControl or other UI controls&#10;            &#10;            // Wait for map to load&#10;            await new Promise((resolve) =&gt; {&#10;                this.map.on('load', resolve);&#10;            });&#10;&#10;            // Ensure map resizes to container after load and when container changes size&#10;            this.map.resize();&#10;            this.resizeObserver = new ResizeObserver(() =&gt; {&#10;                try { this.map &amp;&amp; this.map.resize(); } catch {}&#10;            });&#10;            const container = document.getElementById('map-container');&#10;            if (container) this.resizeObserver.observe(container);&#10;&#10;            // Also resize on window resize and after visibility changes&#10;            window.addEventListener('resize', this._boundHandleResize);&#10;            // Kick a couple of delayed resizes to catch parent visibility toggles&#10;            setTimeout(this._boundHandleResize, 50);&#10;            setTimeout(this._boundHandleResize, 300);&#10;&#10;            // Add click handler for report mode&#10;            this.map.on('click', (e) =&gt; this.onMapClick(e));&#10;&#10;            this.isInitialized = true;&#10;            console.log('✅ Mapbox map initialized successfully');&#10;            return true;&#10;            &#10;        } catch (error) {&#10;            console.error('❌ Failed to initialize Mapbox map:', error);&#10;            return false;&#10;        }&#10;    }&#10;&#10;    async displayRoute(routeData) {&#10;        if (!this.isInitialized || !this.map) {&#10;            console.warn('Map not initialized');&#10;            return;&#10;        }&#10;&#10;        this.currentRoute = routeData;&#10;        this.clearRoute();&#10;&#10;        try {&#10;            let coordinates = this.extractCoordinates(routeData);&#10;            const pts = (routeData.points || []);&#10;&#10;            // Prefer Mapbox Directions geometry to ensure road/sidewalk following&#10;            // Use it whenever backend geometry is sparse (&lt; 12 vertices). Fallback to backend if Directions fails.&#10;            if (pts.length &gt;= 2 &amp;&amp; (!coordinates || coordinates.length &lt; 12)) {&#10;                const start = [pts[0].longitude, pts[0].latitude];&#10;                const end = [pts[pts.length - 1].longitude, pts[pts.length - 1].latitude];&#10;                const directions = await this.fetchMapboxDirections(start, end);&#10;                if (directions &amp;&amp; directions.length &gt;= 2) {&#10;                    coordinates = directions;&#10;                }&#10;            }&#10;&#10;            if (!coordinates || coordinates.length &lt; 2) {&#10;                console.warn('Not enough coordinates for route');&#10;                return;&#10;            }&#10;&#10;            // Add route line and markers&#10;            this.addRouteLine(coordinates);&#10;            this.addStartMarker(coordinates[0]);&#10;            this.addEndMarker(coordinates[coordinates.length - 1]);&#10;            this.addObstacleMarkers(routeData.obstacles || []);&#10;            await this.addAmenityMarkersNearRoute(coordinates);&#10;            // Ensure proper resize before fitting bounds&#10;            try { this.map.resize(); } catch {}&#10;            this.fitMapToRoute(coordinates);&#10;            console.log('✅ Mapbox route displayed successfully');&#10;        } catch (error) {&#10;            console.error('❌ Error displaying route on Mapbox:', error);&#10;        }&#10;    }&#10;&#10;    async fetchMapboxDirections(startLngLat, endLngLat) {&#10;        try {&#10;            if (!this.accessToken) {&#10;                return null;&#10;            }&#10;            const coords = `${startLngLat[0]},${startLngLat[1]};${endLngLat[0]},${endLngLat[1]}`;&#10;            const url = `https://api.mapbox.com/directions/v5/mapbox/walking/${coords}?geometries=geojson&amp;overview=full&amp;steps=true&amp;access_token=${this.accessToken}`;&#10;            const res = await fetch(url, { method: 'GET' });&#10;            if (!res.ok) {&#10;                console.warn('Mapbox Directions error:', res.status);&#10;                return null;&#10;            }&#10;            const data = await res.json();&#10;            const route = data &amp;&amp; data.routes &amp;&amp; data.routes[0];&#10;            if (!route || !route.geometry || !route.geometry.coordinates) return null;&#10;            return route.geometry.coordinates; // [lng, lat] list&#10;        } catch (e) {&#10;            console.warn('Mapbox Directions fetch failed:', e.message);&#10;            return null;&#10;        }&#10;    }&#10;&#10;    extractCoordinates(routeData) {&#10;        const coordinates = [];&#10;        if (routeData.points &amp;&amp; Array.isArray(routeData.points)) {&#10;            for (const point of routeData.points) {&#10;                if (typeof point.longitude === 'number' &amp;&amp; typeof point.latitude === 'number') {&#10;                    coordinates.push([point.longitude, point.latitude]);&#10;                }&#10;            }&#10;        }&#10;        return coordinates; // Do not fallback to direct line; if empty, rendering will abort&#10;    }&#10;&#10;    addRouteLine(coordinates) {&#10;        const sourceId = 'route-source';&#10;        const layerMain = 'route-main';&#10;        const layerCasing = 'route-casing';&#10;        &#10;        // Remove existing route if any&#10;        if (this.map.getLayer(layerMain)) this.map.removeLayer(layerMain);&#10;        if (this.map.getLayer(layerCasing)) this.map.removeLayer(layerCasing);&#10;        if (this.map.getSource(sourceId)) this.map.removeSource(sourceId);&#10;        &#10;        // Add route source&#10;        this.map.addSource(sourceId, {&#10;            type: 'geojson',&#10;            data: { type: 'Feature', properties: {}, geometry: { type: 'LineString', coordinates } }&#10;        });&#10;        &#10;        // Google Maps-like casing (white outline)&#10;        this.map.addLayer({&#10;            id: layerCasing,&#10;            type: 'line',&#10;            source: sourceId,&#10;            layout: { 'line-join': 'round', 'line-cap': 'round' },&#10;            paint: {&#10;                'line-color': '#ffffff',&#10;                'line-width': 10,&#10;                'line-opacity': 1&#10;            }&#10;        });&#10;        &#10;        // Main blue route line&#10;        this.map.addLayer({&#10;            id: layerMain,&#10;            type: 'line',&#10;            source: sourceId,&#10;            layout: { 'line-join': 'round', 'line-cap': 'round' },&#10;            paint: {&#10;                'line-color': '#3478F6',&#10;                'line-width': 6,&#10;                'line-opacity': 0.95&#10;            }&#10;        });&#10;        &#10;        // Click + hover&#10;        this.map.on('click', layerMain, (e) =&gt; {&#10;            new mapboxgl.Popup()&#10;                .setLngLat(e.lngLat)&#10;                .setHTML(`&#10;                    &lt;div style=&quot;padding: 10px;&quot;&gt;&#10;                        &lt;strong&gt;Accessible Route&lt;/strong&gt;&lt;br&gt;&#10;                        &lt;small&gt;Road &amp; sidewalk-following path&lt;/small&gt;&#10;                    &lt;/div&gt;&#10;                `)&#10;                .addTo(this.map);&#10;        });&#10;        this.map.on('mouseenter', layerMain, () =&gt; { this.map.getCanvas().style.cursor = 'pointer'; });&#10;        this.map.on('mouseleave', layerMain, () =&gt; { this.map.getCanvas().style.cursor = ''; });&#10;    }&#10;&#10;    addStartMarker(coordinates) {&#10;        const marker = new mapboxgl.Marker({&#10;            color: '#4CAF50', // Green for start&#10;            scale: 1.2&#10;        })&#10;        .setLngLat(coordinates)&#10;        .setPopup(new mapboxgl.Popup().setHTML(`&#10;            &lt;div style=&quot;padding: 10px;&quot;&gt;&#10;                &lt;strong&gt; Start Location&lt;/strong&gt;&lt;br&gt;&#10;                &lt;small&gt;Begin your accessible journey here&lt;/small&gt;&#10;            &lt;/div&gt;&#10;        `))&#10;        .addTo(this.map);&#10;        &#10;        this.markers.start = marker;&#10;    }&#10;&#10;    addEndMarker(coordinates) {&#10;        const marker = new mapboxgl.Marker({&#10;            color: '#F44336', // Red for end&#10;            scale: 1.2&#10;        })&#10;        .setLngLat(coordinates)&#10;        .setPopup(new mapboxgl.Popup().setHTML(`&#10;            &lt;div style=&quot;padding: 10px;&quot;&gt;&#10;                &lt;strong&gt; Destination&lt;/strong&gt;&lt;br&gt;&#10;                &lt;small&gt;Your accessible route ends here&lt;/small&gt;&#10;            &lt;/div&gt;&#10;        `))&#10;        .addTo(this.map);&#10;        &#10;        this.markers.end = marker;&#10;    }&#10;&#10;    addObstacleMarkers(obstacles) {&#10;        // Clear existing obstacle markers&#10;        this.markers.obstacles.forEach(marker =&gt; marker.remove());&#10;        this.markers.obstacles = [];&#10;&#10;        const addMarkers = (list) =&gt; {&#10;            list.forEach(obstacle =&gt; {&#10;                if (obstacle.location) {&#10;                    const marker = new mapboxgl.Marker({&#10;                        color: '#FF9800', // Orange for obstacles&#10;                        scale: 0.8&#10;                    })&#10;                    .setLngLat([obstacle.location.longitude, obstacle.location.latitude])&#10;                    .setPopup(new mapboxgl.Popup().setHTML(`&#10;                        &lt;div style=&quot;padding: 10px;&quot;&gt;&#10;                            &lt;strong&gt;⚠️ ${obstacle.type || 'Obstacle'}&lt;/strong&gt;&lt;br&gt;&#10;                            &lt;small&gt;${obstacle.description || 'Accessibility challenge detected'}&lt;/small&gt;&#10;                        &lt;/div&gt;&#10;                    `))&#10;                    .addTo(this.map);&#10;                    this.markers.obstacles.push(marker);&#10;                }&#10;            });&#10;        };&#10;&#10;        if (obstacles &amp;&amp; obstacles.length) {&#10;            addMarkers(obstacles);&#10;        }&#10;&#10;        // If none provided, attempt nearby fetch&#10;        if (!this.markers.obstacles.length) {&#10;            try {&#10;                const source = this.map.getSource('route-source');&#10;                const data = source &amp;&amp; source._data;&#10;                const coords = data?.geometry?.coordinates;&#10;                if (Array.isArray(coords) &amp;&amp; coords.length) {&#10;                    const mid = coords[Math.floor(coords.length / 2)];&#10;                    const lat = mid[1];&#10;                    const lon = mid[0];&#10;                    fetch(`${window.location.origin}/api/obstacles?active_only=true&amp;lat=${lat}&amp;lon=${lon}&amp;radius=600`)&#10;                        .then(r =&gt; r.ok ? r.json() : null)&#10;                        .then(list =&gt; { if (Array.isArray(list)) addMarkers(list); })&#10;                        .catch(() =&gt; {});&#10;                }&#10;            } catch {}&#10;        }&#10;&#10;        // Final fallback: fetch all active obstacles if still none&#10;        if (!this.markers.obstacles.length) {&#10;            fetch(`${window.location.origin}/api/obstacles?active_only=true`)&#10;                .then r =&gt; r.ok ? r.json() : null)&#10;                .then(list =&gt; { if (Array.isArray(list)) { addMarkers(list); console.log(`✅ Loaded ${list.length} global obstacles`); } })&#10;                .catch(() =&gt; {});&#10;        }&#10;    }&#10;&#10;    async addAmenityMarkersNearRoute(coordinates) {&#10;        try {&#10;            // Clear existing amenity markers&#10;            this.amenityMarkers.forEach(m =&gt; m.remove());&#10;            this.amenityMarkers = [];&#10;&#10;            if (!coordinates || coordinates.length === 0) return;&#10;&#10;            // Use midpoint of the route to query nearby amenities&#10;            const mid = coordinates[Math.floor(coordinates.length / 2)];&#10;            const lat = mid[1];&#10;            const lon = mid[0];&#10;&#10;            const url = `${window.location.origin}/api/amenities?lat=${lat}&amp;lon=${lon}&amp;radius=1500`;&#10;            console.log(' Fetching nearby amenities:', url);&#10;            const res = await fetch(url, { headers: { 'Accept': 'application/json' }});&#10;            if (!res.ok) { console.warn('Amenity API error', res.status); return; }&#10;            let amenities = await res.json();&#10;            if (!Array.isArray(amenities) || amenities.length === 0) {&#10;                console.log('ℹ️ No nearby amenities returned (filtered). Falling back to all demo amenities.');&#10;                // Fallback: fetch all amenities (unfiltered)&#10;                try {&#10;                    const allRes = await fetch(`${window.location.origin}/api/amenities`);&#10;                    if (allRes.ok) {&#10;                        amenities = await allRes.json();&#10;                    }&#10;                } catch {}&#10;            }&#10;&#10;            if (!Array.isArray(amenities) || amenities.length === 0) {&#10;                console.log('ℹ️ Still no amenities to display.');&#10;                return;&#10;            }&#10;&#10;            const typeColors = {&#10;                REST_SPOT: '#34a853',&#10;                AUDIO_CROSSWALK: '#ffbf00',&#10;                ELEVATOR: '#673ab7'&#10;            };&#10;&#10;            amenities.forEach(a =&gt; {&#10;                if (!a?.location) return;&#10;                const el = document.createElement('div');&#10;                const color = typeColors[a.type] || '#34a853';&#10;                el.className = 'amenity-marker';&#10;                el.style.cssText = `&#10;                    background: ${color};&#10;                    width: 16px; height: 16px; border-radius: 50%;&#10;                    border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,.35);&#10;                `;&#10;                const marker = new mapboxgl.Marker({ element: el, anchor: 'center' })&#10;                    .setLngLat([a.location.longitude, a.location.latitude])&#10;                    .setPopup(new mapboxgl.Popup().setHTML(`&#10;                        &lt;div style=&quot;padding:8px; max-width:220px&quot;&gt;&#10;                            &lt;strong&gt;${a.name || 'Amenity'}&lt;/strong&gt;&lt;br/&gt;&#10;                            ${a.type ? `&lt;small&gt;Type: ${String(a.type).replace(/_/g, ' ')}&lt;/small&gt;&lt;br/&gt;` : ''}&#10;                            ${a.description ? `&lt;div style='margin-top:4px;'&gt;${a.description}&lt;/div&gt;` : ''}&#10;                        &lt;/div&gt;&#10;                    `))&#10;                    .addTo(this.map);&#10;                this.amenityMarkers.push(marker);&#10;            });&#10;            console.log(`✅ Placed ${this.amenityMarkers.length} amenity markers`);&#10;        } catch (e) {&#10;            console.warn('Amenity markers failed:', e.message);&#10;        }&#10;    }&#10;&#10;    fitMapToRoute(coordinates) {&#10;        if (!coordinates || coordinates.length &lt; 2) return;&#10;        const bounds = new mapboxgl.LngLatBounds();&#10;        for (const c of coordinates) bounds.extend(c);&#10;        this.map.fitBounds(bounds, { padding: 60, maxZoom: 17.5, duration: 0 });&#10;    }&#10;&#10;    clearRoute() {&#10;        // Remove route layers (support both old and new IDs)&#10;        const layerIds = ['route-layer', 'route-shadow', 'route-main', 'route-casing'];&#10;        layerIds.forEach(layerId =&gt; {&#10;            if (this.map.getLayer(layerId)) {&#10;                this.map.removeLayer(layerId);&#10;            }&#10;        });&#10;        &#10;        // Remove route source&#10;        const sourceIds = ['route-source'];&#10;        sourceIds.forEach(sourceId =&gt; {&#10;            if (this.map.getSource(sourceId)) {&#10;                this.map.removeSource(sourceId);&#10;            }&#10;        });&#10;        &#10;        // Remove markers&#10;        Object.values(this.markers).forEach(marker =&gt; {&#10;            if (Array.isArray(marker)) {&#10;                marker.forEach(m =&gt; m.remove());&#10;            } else if (marker) {&#10;                marker.remove();&#10;            }&#10;        });&#10;        &#10;        // Clear amenity markers as well&#10;        if (this.amenityMarkers &amp;&amp; this.amenityMarkers.length) {&#10;            this.amenityMarkers.forEach(m =&gt; m.remove());&#10;            this.amenityMarkers = [];&#10;        }&#10;        &#10;        this.markers = { start: null, end: null, obstacles: [] };&#10;    }&#10;&#10;    changeStyle(style) {&#10;        if (!this.isInitialized) return;&#10;        &#10;        const styles = {&#10;            streets: 'mapbox://styles/mapbox/streets-v12',&#10;            satellite: 'mapbox://styles/mapbox/satellite-streets-v12',&#10;            light: 'mapbox://styles/mapbox/light-v11'&#10;        };&#10;        &#10;        if (styles[style]) {&#10;            this.map.setStyle(styles[style]);&#10;        }&#10;    }&#10;&#10;    isAvailable() {&#10;        return this.mapboxAvailable &amp;&amp; this.isInitialized;&#10;    }&#10;&#10;    enableReportMode() {&#10;        this.reportMode = true;&#10;        this.showToast('Click on the map to drop a pin for the obstacle');&#10;        // Visually hint by changing cursor&#10;        try { this.map.getCanvas().style.cursor = 'crosshair'; } catch {}&#10;    }&#10;&#10;    async onMapClick(e) {&#10;        if (!this.reportMode) return;&#10;        const lngLat = e.lngLat;&#10;&#10;        // Place or move temp marker&#10;        if (this.tempReportMarker) this.tempReportMarker.remove();&#10;        this.tempReportMarker = new mapboxgl.Marker({ color: '#FF5722' }).setLngLat([lngLat.lng, lngLat.lat]).addTo(this.map);&#10;&#10;        // Ask for basic info, then submit&#10;        const type = prompt('Obstacle type (stairs, construction, broken_surface, narrow_path, steep_slope, blocked_access, temporary_barrier, other):', 'construction');&#10;        if (!type) return;&#10;        const severity = prompt('Severity (low, medium, high, critical):', 'medium');&#10;        const description = prompt('Short description:', 'Temporary construction') || 'User reported obstacle';&#10;        &#10;        try {&#10;            const payload = {&#10;                location: { latitude: lngLat.lat, longitude: lngLat.lng },&#10;                type, severity, description,&#10;                affects_wheelchair: true,&#10;                affects_visually_impaired: false,&#10;                affects_mobility_aid: true&#10;            };&#10;            const res = await fetch(`${window.location.origin}/api/obstacles/report`, {&#10;                method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload)&#10;            });&#10;            if (!res.ok) throw new Error('Report failed');&#10;            this.showToast('Obstacle reported. Thank you!');&#10;&#10;            // Add permanent obstacle marker&#10;            const marker = new mapboxgl.Marker({ color: '#FF9800' })&#10;                .setLngLat([lngLat.lng, lngLat.lat])&#10;                .setPopup(new mapboxgl.Popup().setHTML(`&lt;div style=&quot;padding:8px&quot;&gt;&lt;strong&gt;Obstacle&lt;/strong&gt;&lt;br/&gt;${type} - ${severity}&lt;br/&gt;${description}&lt;/div&gt;`))&#10;                .addTo(this.map);&#10;            this.markers.obstacles.push(marker);&#10;        } catch (err) {&#10;            console.error(err);&#10;            this.showToast('Failed to report obstacle');&#10;        } finally {&#10;            this.reportMode = false;&#10;            try { this.map.getCanvas().style.cursor = ''; } catch {}&#10;            if (this.tempReportMarker) { this.tempReportMarker.remove(); this.tempReportMarker = null; }&#10;        }&#10;    }&#10;&#10;    showToast(message) {&#10;        const el = document.createElement('div');&#10;        el.style.cssText = 'position:absolute;top:10px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:6px 10px;border-radius:6px;z-index:9999;opacity:.95;font-size:12px;';&#10;        el.textContent = message;&#10;        document.body.appendChild(el);&#10;        setTimeout(() =&gt; el.remove(), 2500);&#10;    }&#10;}&#10;&#10;// Create global instance and helper to set token at runtime&#10;window.mapboxMap = new MapboxMap();&#10;window.setMapboxToken = function(token) {&#10;    try {&#10;        if (!token) return;&#10;        localStorage.setItem('MAPBOX_TOKEN', token);&#10;        window.MAPBOX_TOKEN = token;&#10;        if (typeof mapboxgl !== 'undefined') {&#10;            mapboxgl.accessToken = token;&#10;        }&#10;        console.log('✅ Mapbox token set for frontend');&#10;    } catch {}&#10;};&#10;&#10;// Set the provided token at runtime so the frontend uses it immediately.&#10;window.setMapboxToken('pk.eyJ1Ijoic2thdGUiLCJhIjoiY21kOTlxOW1iMDV1bzJtcHY3bmFobnVmcCJ9.zDBww977UxLmhPDSeZk5Jw');" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/components/ObstacleReporter.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/components/ObstacleReporter.js" />
              <option name="originalContent" value="// ObstacleReporter Component - Handles obstacle reporting functionality&#10;&#10;class ObstacleReporter {&#10;    constructor() {&#10;        this.isReporting = false;&#10;        this.reportedObstacles = this.loadReportedObstacles();&#10;        this.init();&#10;    }&#10;&#10;    init() {&#10;        // Initialize the obstacle reporter component&#10;        console.log('ObstacleReporter component initialized');&#10;        this.setupEventListeners();&#10;    }&#10;&#10;    // Setup event listeners&#10;    setupEventListeners() {&#10;        // Listen for the report obstacle button click&#10;        document.addEventListener('click', (e) =&gt; {&#10;            if (e.target &amp;&amp; e.target.id === 'report-obstacle-btn') {&#10;                this.startMapReportFlow();&#10;            }&#10;        });&#10;    }&#10;&#10;    // Start the map report flow&#10;    startMapReportFlow() {&#10;        if (!window.mapboxMap || !window.mapboxMap.isAvailable()) {&#10;            alert('Map not ready yet.');&#10;            return;&#10;        }&#10;        window.mapboxMap.enableReportMode();&#10;    }&#10;&#10;    // Keep previous functions for compatibility but not used in new flow&#10;    showReportModal() { this.startMapReportFlow(); }&#10;&#10;    // Get current location for obstacle reporting&#10;    getCurrentLocation() {&#10;        if (!navigator.geolocation) {&#10;            this.showNotification('Geolocation is not supported by this browser.', 'error');&#10;            return;&#10;        }&#10;&#10;        const latInput = document.getElementById('obstacleLat');&#10;        const lngInput = document.getElementById('obstacleLng');&#10;        &#10;        // Show loading state&#10;        latInput.placeholder = 'Getting location...';&#10;        lngInput.placeholder = 'Getting location...';&#10;&#10;        navigator.geolocation.getCurrentPosition(&#10;            (position) =&gt; {&#10;                latInput.value = position.coords.latitude.toFixed(6);&#10;                lngInput.value = position.coords.longitude.toFixed(6);&#10;                latInput.placeholder = 'Latitude';&#10;                lngInput.placeholder = 'Longitude';&#10;                this.showNotification('Location detected successfully!', 'success');&#10;            },&#10;            (error) =&gt; {&#10;                latInput.placeholder = 'Latitude';&#10;                lngInput.placeholder = 'Longitude';&#10;                &#10;                let errorMessage = 'Unable to get location. ';&#10;                switch (error.code) {&#10;                    case error.PERMISSION_DENIED:&#10;                        errorMessage += 'Please enable location permissions.';&#10;                        break;&#10;                    case error.POSITION_UNAVAILABLE:&#10;                        errorMessage += 'Location information unavailable.';&#10;                        break;&#10;                    case error.TIMEOUT:&#10;                        errorMessage += 'Location request timed out.';&#10;                        break;&#10;                    default:&#10;                        errorMessage += 'Unknown error occurred.';&#10;                        break;&#10;                }&#10;                &#10;                this.showNotification(errorMessage, 'error');&#10;            },&#10;            {&#10;                enableHighAccuracy: true,&#10;                timeout: 10000,&#10;                maximumAge: 600000&#10;            }&#10;        );&#10;    }&#10;&#10;    // Submit obstacle report&#10;    async submitReport(event) {&#10;        event.preventDefault();&#10;        &#10;        if (this.isReporting) return;&#10;&#10;        // Validate form&#10;        const form = document.getElementById('obstacleReportForm');&#10;        if (!form.checkValidity()) {&#10;            form.reportValidity();&#10;            return;&#10;        }&#10;&#10;        this.isReporting = true;&#10;        const submitBtn = event.target;&#10;        const originalText = submitBtn.innerHTML;&#10;        submitBtn.innerHTML = '&lt;div class=&quot;btn-spinner&quot;&gt;&lt;/div&gt;';&#10;        submitBtn.disabled = true;&#10;&#10;        try {&#10;            // Collect form data&#10;            const formData = this.collectFormData();&#10;            &#10;            // Validate coordinates&#10;            if (!this.validateCoordinates(formData.latitude, formData.longitude)) {&#10;                throw new Error('Please provide valid coordinates');&#10;            }&#10;&#10;            // Submit to backend&#10;            const response = await fetch('/api/obstacles', {&#10;                method: 'POST',&#10;                headers: {&#10;                    'Content-Type': 'application/json',&#10;                },&#10;                body: JSON.stringify(formData)&#10;            });&#10;&#10;            if (!response.ok) {&#10;                throw new Error(`Server error: ${response.status}`);&#10;            }&#10;&#10;            const result = await response.json();&#10;            &#10;            // Store locally&#10;            this.reportedObstacles.push({&#10;                ...formData,&#10;                id: result.id || Date.now(),&#10;                timestamp: new Date().toISOString(),&#10;                status: 'submitted'&#10;            });&#10;            this.saveReportedObstacles();&#10;&#10;            // Success feedback&#10;            this.showNotification('Obstacle reported successfully! Thank you for helping improve accessibility.', 'success');&#10;            &#10;            // Close modal&#10;            document.querySelector('.modal').remove();&#10;            &#10;            // Update analytics if available&#10;            if (window.analytics) {&#10;                window.analytics.recordObstacleReport(formData.type, formData.severity);&#10;            }&#10;&#10;        } catch (error) {&#10;            console.error('Error submitting obstacle report:', error);&#10;            this.showNotification(`Failed to submit report: ${error.message}`, 'error');&#10;        } finally {&#10;            this.isReporting = false;&#10;            submitBtn.innerHTML = originalText;&#10;            submitBtn.disabled = false;&#10;        }&#10;    }&#10;&#10;    // Collect form data&#10;    collectFormData() {&#10;        const affectedUsers = Array.from(document.querySelectorAll('input[type=&quot;checkbox&quot;]:checked'))&#10;            .filter(cb =&gt; cb.value !== 'urgent')&#10;            .map(cb =&gt; cb.value);&#10;&#10;        return {&#10;            type: document.getElementById('obstacleType').value,&#10;            severity: document.getElementById('obstacleSeverity').value,&#10;            latitude: parseFloat(document.getElementById('obstacleLat').value),&#10;            longitude: parseFloat(document.getElementById('obstacleLng').value),&#10;            description: document.getElementById('obstacleDescription').value.trim(),&#10;            affected_users: affectedUsers,&#10;            reporter_contact: document.getElementById('reporterContact').value.trim(),&#10;            is_urgent: document.getElementById('urgentReport').checked,&#10;            timestamp: new Date().toISOString(),&#10;            source: 'user_report'&#10;        };&#10;    }&#10;&#10;    // Validate coordinates&#10;    validateCoordinates(lat, lng) {&#10;        return !isNaN(lat) &amp;&amp; !isNaN(lng) &amp;&amp; &#10;               lat &gt;= -90 &amp;&amp; lat &lt;= 90 &amp;&amp; &#10;               lng &gt;= -180 &amp;&amp; lng &lt;= 180;&#10;    }&#10;&#10;    // Show my reported obstacles&#10;    showMyReports() {&#10;        const modal = document.createElement('div');&#10;        modal.className = 'modal';&#10;        modal.innerHTML = `&#10;            &lt;div class=&quot;modal-content large&quot;&gt;&#10;                &lt;div class=&quot;modal-header&quot;&gt;&#10;                    &lt;h3&gt; My Obstacle Reports&lt;/h3&gt;&#10;                    &lt;button class=&quot;close-btn&quot; onclick=&quot;this.closest('.modal').remove()&quot;&gt;&amp;times;&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-body&quot;&gt;&#10;                    ${this.renderMyReports()}&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        document.body.appendChild(modal);&#10;    }&#10;&#10;    // Render my reports&#10;    renderMyReports() {&#10;        if (this.reportedObstacles.length === 0) {&#10;            return `&#10;                &lt;div class=&quot;empty-state&quot; style=&quot;text-align: center; padding: 3rem;&quot;&gt;&#10;                    &lt;div style=&quot;font-size: 4rem; margin-bottom: 1rem;&quot;&gt;&lt;/div&gt;&#10;                    &lt;h3 style=&quot;color: var(--dark-gray); margin-bottom: 1rem;&quot;&gt;No Reports Yet&lt;/h3&gt;&#10;                    &lt;p style=&quot;color: var(--dark-gray); margin-bottom: 2rem;&quot;&gt;You haven't reported any obstacles yet. Help improve accessibility by reporting obstacles you encounter.&lt;/p&gt;&#10;                    &lt;button class=&quot;primary-btn&quot; onclick=&quot;this.closest('.modal').remove(); obstacleReporter.showReportModal();&quot;&gt;&#10;                        Report an Obstacle&#10;                    &lt;/button&gt;&#10;                &lt;/div&gt;&#10;            `;&#10;        }&#10;&#10;        return `&#10;            &lt;div class=&quot;reports-list&quot;&gt;&#10;                ${this.reportedObstacles.map((report, index) =&gt; `&#10;                    &lt;div class=&quot;report-card&quot; style=&quot;border: 2px solid var(--medium-gray); border-radius: var(--border-radius-lg); padding: 1.5rem; margin-bottom: 1rem; background: var(--white);&quot;&gt;&#10;                        &lt;div class=&quot;report-header&quot; style=&quot;display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;&quot;&gt;&#10;                            &lt;div&gt;&#10;                                &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 0.5rem;&quot;&gt;&#10;                                    ${this.getObstacleIcon(report.type)} ${this.formatObstacleType(report.type)}&#10;                                &lt;/h4&gt;&#10;                                &lt;div class=&quot;report-meta&quot; style=&quot;display: flex; gap: 1rem; font-size: var(--font-size-sm); color: var(--dark-gray);&quot;&gt;&#10;                                    &lt;span&gt; ${new Date(report.timestamp).toLocaleDateString()}&lt;/span&gt;&#10;                                    &lt;span class=&quot;severity-badge ${report.severity}&quot; style=&quot;padding: 0.25rem 0.5rem; border-radius: var(--border-radius-sm); font-weight: bold;&quot;&gt;&#10;                                        ${this.formatSeverity(report.severity)}&#10;                                    &lt;/span&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;button class=&quot;icon-btn&quot; onclick=&quot;obstacleReporter.deleteReport(${index})&quot; title=&quot;Delete Report&quot;&gt;&#10;                                ️&#10;                            &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;div class=&quot;report-details&quot;&gt;&#10;                            &lt;p style=&quot;margin-bottom: 1rem; color: var(--darker-gray);&quot;&gt;${report.description}&lt;/p&gt;&#10;                            &#10;                            &lt;div class=&quot;report-info-grid&quot; style=&quot;display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; font-size: var(--font-size-sm);&quot;&gt;&#10;                                &lt;div&gt;&#10;                                    &lt;strong&gt;Location:&lt;/strong&gt;&lt;br&gt;&#10;                                    ${report.latitude.toFixed(6)}, ${report.longitude.toFixed(6)}&#10;                                &lt;/div&gt;&#10;                                ${report.affected_users.length &gt; 0 ? `&#10;                                    &lt;div&gt;&#10;                                        &lt;strong&gt;Affected Users:&lt;/strong&gt;&lt;br&gt;&#10;                                        ${report.affected_users.map(user =&gt; this.formatUserGroup(user)).join(', ')}&#10;                                    &lt;/div&gt;&#10;                                ` : ''}&#10;                                ${report.is_urgent ? `&#10;                                    &lt;div style=&quot;color: var(--error-red);&quot;&gt;&#10;                                        &lt;strong&gt;⚠️ Urgent Report&lt;/strong&gt;&#10;                                    &lt;/div&gt;&#10;                                ` : ''}&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                `).join('')}&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;&#10;    // Delete a report&#10;    deleteReport(index) {&#10;        if (confirm('Are you sure you want to delete this report?')) {&#10;            this.reportedObstacles.splice(index, 1);&#10;            this.saveReportedObstacles();&#10;            &#10;            // Refresh the modal content&#10;            const modalBody = document.querySelector('.modal .modal-body');&#10;            if (modalBody) {&#10;                modalBody.innerHTML = this.renderMyReports();&#10;            }&#10;            &#10;            this.showNotification('Report deleted successfully.', 'success');&#10;        }&#10;    }&#10;&#10;    // Format obstacle type for display&#10;    formatObstacleType(type) {&#10;        const types = {&#10;            'construction': 'Construction Work',&#10;            'pothole': 'Pothole/Road Damage',&#10;            'blocked_sidewalk': 'Blocked Sidewalk',&#10;            'steep_slope': 'Steep Slope/Stairs',&#10;            'no_curb_cut': 'Missing Curb Cut',&#10;            'debris': 'Debris/Obstruction',&#10;            'flooding': 'Flooding/Water',&#10;            'poor_lighting': 'Poor Lighting',&#10;            'broken_infrastructure': 'Broken Infrastructure',&#10;            'other': 'Other'&#10;        };&#10;        return types[type] || type;&#10;    }&#10;&#10;    // Get obstacle icon&#10;    getObstacleIcon(type) {&#10;        const icons = {&#10;            'construction': '',&#10;            'pothole': '️',&#10;            'blocked_sidewalk': '',&#10;            'steep_slope': '⛰️',&#10;            'no_curb_cut': '',&#10;            'debris': '️',&#10;            'flooding': '',&#10;            'poor_lighting': '',&#10;            'broken_infrastructure': '⚠️',&#10;            'other': '❓'&#10;        };&#10;        return icons[type] || '❓';&#10;    }&#10;&#10;    // Format severity&#10;    formatSeverity(severity) {&#10;        const severities = {&#10;            'low': ' Low',&#10;            'medium': ' Medium',&#10;            'high': ' High',&#10;            'critical': ' Critical'&#10;        };&#10;        return severities[severity] || severity;&#10;    }&#10;&#10;    // Format user group&#10;    formatUserGroup(group) {&#10;        const groups = {&#10;            'wheelchair': 'Wheelchair Users',&#10;            'mobility_aid': 'Mobility Aid Users',&#10;            'visual_impairment': 'Visual Impairments',&#10;            'hearing_impairment': 'Hearing Impairments',&#10;            'elderly': 'Elderly Users',&#10;            'families': 'Families with Strollers'&#10;        };&#10;        return groups[group] || group;&#10;    }&#10;&#10;    // Load reported obstacles from localStorage&#10;    loadReportedObstacles() {&#10;        try {&#10;            const stored = localStorage.getItem('aura_reported_obstacles');&#10;            return stored ? JSON.parse(stored) : [];&#10;        } catch (error) {&#10;            console.error('Error loading reported obstacles:', error);&#10;            return [];&#10;        }&#10;    }&#10;&#10;    // Save reported obstacles to localStorage&#10;    saveReportedObstacles() {&#10;        try {&#10;            localStorage.setItem('aura_reported_obstacles', JSON.stringify(this.reportedObstacles));&#10;        } catch (error) {&#10;            console.error('Error saving reported obstacles:', error);&#10;        }&#10;    }&#10;&#10;    // Show notification&#10;    showNotification(message, type = 'info') {&#10;        const notification = document.createElement('div');&#10;        const colors = {&#10;            'success': 'var(--success-green)',&#10;            'error': 'var(--error-red)',&#10;            'warning': 'var(--warning-orange)',&#10;            'info': 'var(--info-blue)'&#10;        };&#10;        &#10;        notification.style.cssText = `&#10;            position: fixed;&#10;            top: 20px;&#10;            right: 20px;&#10;            background: ${colors[type]};&#10;            color: white;&#10;            padding: 1rem 1.5rem;&#10;            border-radius: var(--border-radius-md);&#10;            box-shadow: var(--shadow-lg);&#10;            z-index: 10000;&#10;            max-width: 400px;&#10;            animation: slideIn 0.3s ease;&#10;        `;&#10;        notification.textContent = message;&#10;        &#10;        document.body.appendChild(notification);&#10;        &#10;        setTimeout(() =&gt; {&#10;            notification.style.animation = 'slideOut 0.3s ease forwards';&#10;            setTimeout(() =&gt; {&#10;                if (notification.parentNode) {&#10;                    document.body.removeChild(notification);&#10;                }&#10;            }, 300);&#10;        }, 5000);&#10;    }&#10;&#10;    // Get statistics about reported obstacles&#10;    getStatistics() {&#10;        const total = this.reportedObstacles.length;&#10;        const byType = {};&#10;        const bySeverity = {};&#10;        &#10;        this.reportedObstacles.forEach(obstacle =&gt; {&#10;            byType[obstacle.type] = (byType[obstacle.type] || 0) + 1;&#10;            bySeverity[obstacle.severity] = (bySeverity[obstacle.severity] || 0) + 1;&#10;        });&#10;&#10;        return {&#10;            total,&#10;            byType,&#10;            bySeverity,&#10;            mostCommonType: Object.keys(byType).reduce((a, b) =&gt; byType[a] &gt; byType[b] ? a : b, ''),&#10;            urgentCount: this.reportedObstacles.filter(o =&gt; o.is_urgent).length&#10;        };&#10;    }&#10;}&#10;&#10;// Add styles for severity badges&#10;const obstacleStyles = document.createElement('style');&#10;obstacleStyles.textContent = `&#10;    .severity-badge.low { background: var(--success-green); color: white; }&#10;    .severity-badge.medium { background: var(--warning-orange); color: white; }&#10;    .severity-badge.high { background: var(--error-red); color: white; }&#10;    .severity-badge.critical { background: #d32f2f; color: white; }&#10;    &#10;    .location-input-group {&#10;        display: flex;&#10;        flex-direction: column;&#10;        gap: 0.5rem;&#10;    }&#10;`;&#10;&#10;document.head.appendChild(obstacleStyles);&#10;&#10;// Preserve global ref&#10;window.obstacleReporter = new ObstacleReporter();&#10;&#10;// Export the ObstacleReporter class&#10;window.ObstacleReporter = ObstacleReporter;&#10;" />
              <option name="updatedContent" value="class ObstacleReporter {&#10;    constructor() {&#10;        this.isReporting = false;&#10;        this.reportedObstacles = this.loadReportedObstacles();&#10;        this.init();&#10;    }&#10;&#10;    init() {&#10;        console.log('ObstacleReporter component initialized');&#10;        this.setupEventListeners();&#10;    }&#10;&#10;    // Setup event listeners&#10;    setupEventListeners() {&#10;        // Listen for the report obstacle button click&#10;        document.addEventListener('click', (e) =&gt; {&#10;            if (e.target &amp;&amp; e.target.id === 'report-obstacle-btn') {&#10;                this.startMapReportFlow();&#10;            }&#10;        });&#10;    }&#10;&#10;    // Start the map report flow&#10;    startMapReportFlow() {&#10;        if (!window.mapboxMap || !window.mapboxMap.isAvailable()) {&#10;            alert('Map not ready yet.');&#10;            return;&#10;        }&#10;        window.mapboxMap.enableReportMode();&#10;    }&#10;&#10;    // Keep previous functions for compatibility but not used in new flow&#10;    showReportModal() { this.startMapReportFlow(); }&#10;&#10;    // Get current location for obstacle reporting&#10;    getCurrentLocation() {&#10;        if (!navigator.geolocation) {&#10;            this.showNotification('Geolocation is not supported by this browser.', 'error');&#10;            return;&#10;        }&#10;&#10;        const latInput = document.getElementById('obstacleLat');&#10;        const lngInput = document.getElementById('obstacleLng');&#10;        &#10;        // Show loading state&#10;        latInput.placeholder = 'Getting location...';&#10;        lngInput.placeholder = 'Getting location...';&#10;&#10;        navigator.geolocation.getCurrentPosition(&#10;            (position) =&gt; {&#10;                latInput.value = position.coords.latitude.toFixed(6);&#10;                lngInput.value = position.coords.longitude.toFixed(6);&#10;                latInput.placeholder = 'Latitude';&#10;                lngInput.placeholder = 'Longitude';&#10;                this.showNotification('Location detected successfully!', 'success');&#10;            },&#10;            (error) =&gt; {&#10;                latInput.placeholder = 'Latitude';&#10;                lngInput.placeholder = 'Longitude';&#10;                &#10;                let errorMessage = 'Unable to get location. ';&#10;                switch (error.code) {&#10;                    case error.PERMISSION_DENIED:&#10;                        errorMessage += 'Please enable location permissions.';&#10;                        break;&#10;                    case error.POSITION_UNAVAILABLE:&#10;                        errorMessage += 'Location information unavailable.';&#10;                        break;&#10;                    case error.TIMEOUT:&#10;                        errorMessage += 'Location request timed out.';&#10;                        break;&#10;                    default:&#10;                        errorMessage += 'Unknown error occurred.';&#10;                        break;&#10;                }&#10;                &#10;                this.showNotification(errorMessage, 'error');&#10;            },&#10;            {&#10;                enableHighAccuracy: true,&#10;                timeout: 10000,&#10;                maximumAge: 600000&#10;            }&#10;        );&#10;    }&#10;&#10;    // Submit obstacle report&#10;    async submitReport(event) {&#10;        event.preventDefault();&#10;        &#10;        if (this.isReporting) return;&#10;&#10;        // Validate form&#10;        const form = document.getElementById('obstacleReportForm');&#10;        if (!form.checkValidity()) {&#10;            form.reportValidity();&#10;            return;&#10;        }&#10;&#10;        this.isReporting = true;&#10;        const submitBtn = event.target;&#10;        const originalText = submitBtn.innerHTML;&#10;        submitBtn.innerHTML = '&lt;div class=&quot;btn-spinner&quot;&gt;&lt;/div&gt;';&#10;        submitBtn.disabled = true;&#10;&#10;        try {&#10;            // Collect form data&#10;            const formData = this.collectFormData();&#10;            &#10;            // Validate coordinates&#10;            if (!this.validateCoordinates(formData.latitude, formData.longitude)) {&#10;                throw new Error('Please provide valid coordinates');&#10;            }&#10;&#10;            // Submit to backend&#10;            const response = await fetch('/api/obstacles', {&#10;                method: 'POST',&#10;                headers: {&#10;                    'Content-Type': 'application/json',&#10;                },&#10;                body: JSON.stringify(formData)&#10;            });&#10;&#10;            if (!response.ok) {&#10;                throw new Error(`Server error: ${response.status}`);&#10;            }&#10;&#10;            const result = await response.json();&#10;            &#10;            // Store locally&#10;            this.reportedObstacles.push({&#10;                ...formData,&#10;                id: result.id || Date.now(),&#10;                timestamp: new Date().toISOString(),&#10;                status: 'submitted'&#10;            });&#10;            this.saveReportedObstacles();&#10;&#10;            // Success feedback&#10;            this.showNotification('Obstacle reported successfully! Thank you for helping improve accessibility.', 'success');&#10;            &#10;            // Close modal&#10;            document.querySelector('.modal').remove();&#10;            &#10;            // Update analytics if available&#10;            if (window.analytics) {&#10;                window.analytics.recordObstacleReport(formData.type, formData.severity);&#10;            }&#10;&#10;        } catch (error) {&#10;            console.error('Error submitting obstacle report:', error);&#10;            this.showNotification(`Failed to submit report: ${error.message}`, 'error');&#10;        } finally {&#10;            this.isReporting = false;&#10;            submitBtn.innerHTML = originalText;&#10;            submitBtn.disabled = false;&#10;        }&#10;    }&#10;&#10;    // Collect form data&#10;    collectFormData() {&#10;        const affectedUsers = Array.from(document.querySelectorAll('input[type=&quot;checkbox&quot;]:checked'))&#10;            .filter(cb =&gt; cb.value !== 'urgent')&#10;            .map(cb =&gt; cb.value);&#10;&#10;        return {&#10;            type: document.getElementById('obstacleType').value,&#10;            severity: document.getElementById('obstacleSeverity').value,&#10;            latitude: parseFloat(document.getElementById('obstacleLat').value),&#10;            longitude: parseFloat(document.getElementById('obstacleLng').value),&#10;            description: document.getElementById('obstacleDescription').value.trim(),&#10;            affected_users: affectedUsers,&#10;            reporter_contact: document.getElementById('reporterContact').value.trim(),&#10;            is_urgent: document.getElementById('urgentReport').checked,&#10;            timestamp: new Date().toISOString(),&#10;            source: 'user_report'&#10;        };&#10;    }&#10;&#10;    // Validate coordinates&#10;    validateCoordinates(lat, lng) {&#10;        return !isNaN(lat) &amp;&amp; !isNaN(lng) &amp;&amp; &#10;               lat &gt;= -90 &amp;&amp; lat &lt;= 90 &amp;&amp; &#10;               lng &gt;= -180 &amp;&amp; lng &lt;= 180;&#10;    }&#10;&#10;    // Show my reported obstacles&#10;    showMyReports() {&#10;        const modal = document.createElement('div');&#10;        modal.className = 'modal';&#10;        modal.innerHTML = `&#10;            &lt;div class=&quot;modal-content large&quot;&gt;&#10;                &lt;div class=&quot;modal-header&quot;&gt;&#10;                    &lt;h3&gt; My Obstacle Reports&lt;/h3&gt;&#10;                    &lt;button class=&quot;close-btn&quot; onclick=&quot;this.closest('.modal').remove()&quot;&gt;&amp;times;&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-body&quot;&gt;&#10;                    ${this.renderMyReports()}&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        document.body.appendChild(modal);&#10;    }&#10;&#10;    // Render my reports&#10;    renderMyReports() {&#10;        if (this.reportedObstacles.length === 0) {&#10;            return `&#10;                &lt;div class=&quot;empty-state&quot; style=&quot;text-align: center; padding: 3rem;&quot;&gt;&#10;                    &lt;div style=&quot;font-size: 4rem; margin-bottom: 1rem;&quot;&gt;&lt;/div&gt;&#10;                    &lt;h3 style=&quot;color: var(--dark-gray); margin-bottom: 1rem;&quot;&gt;No Reports Yet&lt;/h3&gt;&#10;                    &lt;p style=&quot;color: var(--dark-gray); margin-bottom: 2rem;&quot;&gt;You haven't reported any obstacles yet. Help improve accessibility by reporting obstacles you encounter.&lt;/p&gt;&#10;                    &lt;button class=&quot;primary-btn&quot; onclick=&quot;this.closest('.modal').remove(); obstacleReporter.showReportModal();&quot;&gt;&#10;                        Report an Obstacle&#10;                    &lt;/button&gt;&#10;                &lt;/div&gt;&#10;            `;&#10;        }&#10;&#10;        return `&#10;            &lt;div class=&quot;reports-list&quot;&gt;&#10;                ${this.reportedObstacles.map((report, index) =&gt; `&#10;                    &lt;div class=&quot;report-card&quot; style=&quot;border: 2px solid var(--medium-gray); border-radius: var(--border-radius-lg); padding: 1.5rem; margin-bottom: 1rem; background: var(--white);&quot;&gt;&#10;                        &lt;div class=&quot;report-header&quot; style=&quot;display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;&quot;&gt;&#10;                            &lt;div&gt;&#10;                                &lt;h4 style=&quot;color: var(--primary-blue); margin-bottom: 0.5rem;&quot;&gt;&#10;                                    ${this.getObstacleIcon(report.type)} ${this.formatObstacleType(report.type)}&#10;                                &lt;/h4&gt;&#10;                                &lt;div class=&quot;report-meta&quot; style=&quot;display: flex; gap: 1rem; font-size: var(--font-size-sm); color: var(--dark-gray);&quot;&gt;&#10;                                    &lt;span&gt; ${new Date(report.timestamp).toLocaleDateString()}&lt;/span&gt;&#10;                                    &lt;span class=&quot;severity-badge ${report.severity}&quot; style=&quot;padding: 0.25rem 0.5rem; border-radius: var(--border-radius-sm); font-weight: bold;&quot;&gt;&#10;                                        ${this.formatSeverity(report.severity)}&#10;                                    &lt;/span&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;button class=&quot;icon-btn&quot; onclick=&quot;obstacleReporter.deleteReport(${index})&quot; title=&quot;Delete Report&quot;&gt;&#10;                                ️&#10;                            &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                        &#10;                        &lt;div class=&quot;report-details&quot;&gt;&#10;                            &lt;p style=&quot;margin-bottom: 1rem; color: var(--darker-gray);&quot;&gt;${report.description}&lt;/p&gt;&#10;                            &#10;                            &lt;div class=&quot;report-info-grid&quot; style=&quot;display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; font-size: var(--font-size-sm);&quot;&gt;&#10;                                &lt;div&gt;&#10;                                    &lt;strong&gt;Location:&lt;/strong&gt;&lt;br&gt;&#10;                                    ${report.latitude.toFixed(6)}, ${report.longitude.toFixed(6)}&#10;                                &lt;/div&gt;&#10;                                ${report.affected_users.length &gt; 0 ? `&#10;                                    &lt;div&gt;&#10;                                        &lt;strong&gt;Affected Users:&lt;/strong&gt;&lt;br&gt;&#10;                                        ${report.affected_users.map(user =&gt; this.formatUserGroup(user)).join(', ')}&#10;                                    &lt;/div&gt;&#10;                                ` : ''}&#10;                                ${report.is_urgent ? `&#10;                                    &lt;div style=&quot;color: var(--error-red);&quot;&gt;&#10;                                        &lt;strong&gt;⚠️ Urgent Report&lt;/strong&gt;&#10;                                    &lt;/div&gt;&#10;                                ` : ''}&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                `).join('')}&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;&#10;    // Delete a report&#10;    deleteReport(index) {&#10;        if (confirm('Are you sure you want to delete this report?')) {&#10;            this.reportedObstacles.splice(index, 1);&#10;            this.saveReportedObstacles();&#10;            &#10;            // Refresh the modal content&#10;            const modalBody = document.querySelector('.modal .modal-body');&#10;            if (modalBody) {&#10;                modalBody.innerHTML = this.renderMyReports();&#10;            }&#10;            &#10;            this.showNotification('Report deleted successfully.', 'success');&#10;        }&#10;    }&#10;&#10;    // Format obstacle type for display&#10;    formatObstacleType(type) {&#10;        const types = {&#10;            'construction': 'Construction Work',&#10;            'pothole': 'Pothole/Road Damage',&#10;            'blocked_sidewalk': 'Blocked Sidewalk',&#10;            'steep_slope': 'Steep Slope/Stairs',&#10;            'no_curb_cut': 'Missing Curb Cut',&#10;            'debris': 'Debris/Obstruction',&#10;            'flooding': 'Flooding/Water',&#10;            'poor_lighting': 'Poor Lighting',&#10;            'broken_infrastructure': 'Broken Infrastructure',&#10;            'other': 'Other'&#10;        };&#10;        return types[type] || type;&#10;    }&#10;&#10;    // Get obstacle icon&#10;    getObstacleIcon(type) {&#10;        const icons = {&#10;            'construction': '',&#10;            'pothole': '️',&#10;            'blocked_sidewalk': '',&#10;            'steep_slope': '⛰️',&#10;            'no_curb_cut': '',&#10;            'debris': '️',&#10;            'flooding': '',&#10;            'poor_lighting': '',&#10;            'broken_infrastructure': '⚠️',&#10;            'other': '❓'&#10;        };&#10;        return icons[type] || '❓';&#10;    }&#10;&#10;    // Format severity&#10;    formatSeverity(severity) {&#10;        const severities = {&#10;            'low': ' Low',&#10;            'medium': ' Medium',&#10;            'high': ' High',&#10;            'critical': ' Critical'&#10;        };&#10;        return severities[severity] || severity;&#10;    }&#10;&#10;    // Format user group&#10;    formatUserGroup(group) {&#10;        const groups = {&#10;            'wheelchair': 'Wheelchair Users',&#10;            'mobility_aid': 'Mobility Aid Users',&#10;            'visual_impairment': 'Visual Impairments',&#10;            'hearing_impairment': 'Hearing Impairments',&#10;            'elderly': 'Elderly Users',&#10;            'families': 'Families with Strollers'&#10;        };&#10;        return groups[group] || group;&#10;    }&#10;&#10;    // Load reported obstacles from localStorage&#10;    loadReportedObstacles() {&#10;        try {&#10;            const stored = localStorage.getItem('aura_reported_obstacles');&#10;            return stored ? JSON.parse(stored) : [];&#10;        } catch (error) {&#10;            console.error('Error loading reported obstacles:', error);&#10;            return [];&#10;        }&#10;    }&#10;&#10;    // Save reported obstacles to localStorage&#10;    saveReportedObstacles() {&#10;        try {&#10;            localStorage.setItem('aura_reported_obstacles', JSON.stringify(this.reportedObstacles));&#10;        } catch (error) {&#10;            console.error('Error saving reported obstacles:', error);&#10;        }&#10;    }&#10;&#10;    // Show notification&#10;    showNotification(message, type = 'info') {&#10;        const notification = document.createElement('div');&#10;        const colors = {&#10;            'success': 'var(--success-green)',&#10;            'error': 'var(--error-red)',&#10;            'warning': 'var(--warning-orange)',&#10;            'info': 'var(--info-blue)'&#10;        };&#10;        &#10;        notification.style.cssText = `&#10;            position: fixed;&#10;            top: 20px;&#10;            right: 20px;&#10;            background: ${colors[type]};&#10;            color: white;&#10;            padding: 1rem 1.5rem;&#10;            border-radius: var(--border-radius-md);&#10;            box-shadow: var(--shadow-lg);&#10;            z-index: 10000;&#10;            max-width: 400px;&#10;            animation: slideIn 0.3s ease;&#10;        `;&#10;        notification.textContent = message;&#10;        &#10;        document.body.appendChild(notification);&#10;        &#10;        setTimeout(() =&gt; {&#10;            notification.style.animation = 'slideOut 0.3s ease forwards';&#10;            setTimeout(() =&gt; {&#10;                if (notification.parentNode) {&#10;                    document.body.removeChild(notification);&#10;                }&#10;            }, 300);&#10;        }, 5000);&#10;    }&#10;&#10;    // Get statistics about reported obstacles&#10;    getStatistics() {&#10;        const total = this.reportedObstacles.length;&#10;        const byType = {};&#10;        const bySeverity = {};&#10;        &#10;        this.reportedObstacles.forEach(obstacle =&gt; {&#10;            byType[obstacle.type] = (byType[obstacle.type] || 0) + 1;&#10;            bySeverity[obstacle.severity] = (bySeverity[obstacle.severity] || 0) + 1;&#10;        });&#10;&#10;        return {&#10;            total,&#10;            byType,&#10;            bySeverity,&#10;            mostCommonType: Object.keys(byType).reduce((a, b) =&gt; byType[a] &gt; byType[b] ? a : b, ''),&#10;            urgentCount: this.reportedObstacles.filter(o =&gt; o.is_urgent).length&#10;        };&#10;    }&#10;}&#10;&#10;// Add styles for severity badges&#10;const obstacleStyles = document.createElement('style');&#10;obstacleStyles.textContent = `&#10;    .severity-badge.low { background: var(--success-green); color: white; }&#10;    .severity-badge.medium { background: var(--warning-orange); color: white; }&#10;    .severity-badge.high { background: var(--error-red); color: white; }&#10;    .severity-badge.critical { background: #d32f2f; color: white; }&#10;    &#10;    .location-input-group {&#10;        display: flex;&#10;        flex-direction: column;&#10;        gap: 0.5rem;&#10;    }&#10;`;&#10;&#10;document.head.appendChild(obstacleStyles);&#10;&#10;// Preserve global ref&#10;window.obstacleReporter = new ObstacleReporter();&#10;&#10;// Export the ObstacleReporter class&#10;window.ObstacleReporter = ObstacleReporter;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/services/api.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/services/api.js" />
              <option name="originalContent" value="// API Service - Handles all API communications&#10;&#10;class ApiService {&#10;    constructor() {&#10;        // Use same-origin backend served by FastAPI (fixes 8003 mismatch)&#10;        this.baseUrl = window.location.origin;&#10;        this.apiBase = '/api';&#10;    }&#10;&#10;    // Generic API request method&#10;    async request(endpoint, options = {}) {&#10;        const url = `${this.baseUrl}${this.apiBase}${endpoint}`;&#10;        &#10;        const defaultOptions = {&#10;            headers: {&#10;                'Content-Type': 'application/json',&#10;                ...options.headers&#10;            },&#10;            // Add a default timeout of 30 seconds&#10;            signal: AbortSignal.timeout(30000)&#10;        };&#10;&#10;        const config = { ...defaultOptions, ...options };&#10;&#10;        try {&#10;            console.log(`API Request: ${config.method || 'GET'} ${url}`);&#10;            const response = await fetch(url, config);&#10;            &#10;            if (!response.ok) {&#10;                throw new Error(`HTTP error! status: ${response.status}`);&#10;            }&#10;&#10;            const data = await response.json();&#10;            console.log('API Response:', data);&#10;            return data;&#10;        } catch (error) {&#10;            if (error.name === 'TimeoutError') {&#10;                console.error('API Request timed out after 30 seconds');&#10;                throw new Error('Request timed out. Please try again.');&#10;            }&#10;            console.error('API Error:', error);&#10;            throw error;&#10;        }&#10;    }&#10;&#10;    // Calculate accessible route&#10;    async calculateRoute(routeRequest) {&#10;        return this.request('/calculate-route', {&#10;            method: 'POST',&#10;            body: JSON.stringify(routeRequest)&#10;        });&#10;    }&#10;&#10;    // Report obstacle&#10;    async reportObstacle(obstacleData) {&#10;        return this.request('/obstacles/report', {&#10;            method: 'POST',&#10;            body: JSON.stringify(obstacleData)&#10;        });&#10;    }&#10;&#10;    // Get obstacles in area&#10;    async getObstacles(bounds) {&#10;        const params = new URLSearchParams({&#10;            lat: bounds.lat,&#10;            lon: bounds.lon,&#10;            radius: bounds.radius || 1000&#10;        });&#10;        &#10;        return this.request(`/obstacles?${params}`);&#10;    }&#10;&#10;    // Submit feedback&#10;    async submitFeedback(feedbackData) {&#10;        return this.request('/feedback', {&#10;            method: 'POST',&#10;            body: JSON.stringify(feedbackData)&#10;        });&#10;    }&#10;&#10;    // Get analytics data&#10;    async getAnalytics() {&#10;        return this.request('/analytics');&#10;    }&#10;&#10;    // Health check&#10;    async healthCheck() {&#10;        return this.request('/health');&#10;    }&#10;&#10;    // Geocode address to coordinates&#10;    async geocodeAddress(address) {&#10;        return this.request('/geocode', {&#10;            method: 'POST',&#10;            body: JSON.stringify({ address })&#10;        });&#10;    }&#10;&#10;    // Reverse geocode coordinates to address&#10;    async reverseGeocode(lat, lng) {&#10;        return this.request('/reverse-geocode', {&#10;            method: 'POST',&#10;            body: JSON.stringify({ latitude: lat, longitude: lng })&#10;        });&#10;    }&#10;}&#10;&#10;// Create global API service instance&#10;window.apiService = new ApiService();&#10;&#10;// Export for module use&#10;if (typeof module !== 'undefined' &amp;&amp; module.exports) {&#10;    module.exports = ApiService;&#10;}&#10;" />
              <option name="updatedContent" value="class ApiService {&#10;    constructor() {&#10;        this.baseUrl = window.location.origin;&#10;        this.apiBase = '/api';&#10;    }&#10;&#10;    async request(endpoint, options = {}) {&#10;        const url = `${this.baseUrl}${this.apiBase}${endpoint}`;&#10;        &#10;        const defaultOptions = {&#10;            headers: {&#10;                'Content-Type': 'application/json',&#10;                ...options.headers&#10;            },&#10;            signal: AbortSignal.timeout(30000)&#10;        };&#10;&#10;        const config = { ...defaultOptions, ...options };&#10;&#10;        try {&#10;            console.log(`API Request: ${config.method || 'GET'} ${url}`);&#10;            const response = await fetch(url, config);&#10;            &#10;            if (!response.ok) {&#10;                throw new Error(`HTTP error! status: ${response.status}`);&#10;            }&#10;&#10;            const data = await response.json();&#10;            console.log('API Response:', data);&#10;            return data;&#10;        } catch (error) {&#10;            if (error.name === 'TimeoutError') {&#10;                console.error('API Request timed out after 30 seconds');&#10;                throw new Error('Request timed out. Please try again.');&#10;            }&#10;            console.error('API Error:', error);&#10;            throw error;&#10;        }&#10;    }&#10;&#10;    async calculateRoute(routeRequest) {&#10;        return this.request('/calculate-route', {&#10;            method: 'POST',&#10;            body: JSON.stringify(routeRequest)&#10;        });&#10;    }&#10;&#10;    async reportObstacle(obstacleData) {&#10;        return this.request('/report-obstacle', {&#10;            method: 'POST',&#10;            body: JSON.stringify(obstacleData)&#10;        });&#10;    }&#10;&#10;    async getObstacles(bounds) {&#10;        const params = new URLSearchParams({&#10;            north: bounds.north,&#10;            south: bounds.south,&#10;            east: bounds.east,&#10;            west: bounds.west&#10;        });&#10;        return this.request(`/obstacles?${params}`);&#10;    }&#10;&#10;    async submitFeedback(feedbackData) {&#10;        return this.request('/feedback', {&#10;            method: 'POST',&#10;            body: JSON.stringify(feedbackData)&#10;        });&#10;    }&#10;&#10;    async getAnalytics() {&#10;        return this.request('/analytics');&#10;    }&#10;&#10;    async healthCheck() {&#10;        return this.request('/health');&#10;    }&#10;&#10;    async geocodeAddress(address) {&#10;        const params = new URLSearchParams({ address });&#10;        return this.request(`/geocode?${params}`);&#10;    }&#10;&#10;    async reverseGeocode(lat, lon) {&#10;        const params = new URLSearchParams({ lat, lon });&#10;        return this.request(`/reverse-geocode?${params}`);&#10;    }&#10;}&#10;&#10;window.apiService = new ApiService();&#10;&#10;if (typeof module !== 'undefined' &amp;&amp; module.exports) {&#10;    module.exports = ApiService;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/styles/main.css">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/styles/main.css" />
              <option name="originalContent" value="/* Aura - Modern Accessible Design System */&#10;&#10;:root {&#10;    /* Colors */&#10;    --primary-blue: #667eea;&#10;    --primary-purple: #764ba2;&#10;    --success-green: #4CAF50;&#10;    --warning-orange: #FF9800;&#10;    --error-red: #F44336;&#10;    --info-blue: #2196F3;&#10;    &#10;    /* Accessibility Colors */&#10;    --high-accessibility: #4CAF50;&#10;    --medium-accessibility: #FF9800;&#10;    --low-accessibility: #F44336;&#10;    &#10;    /* Neutral Colors */&#10;    --white: #ffffff;&#10;    --light-gray: #f8f9fa;&#10;    --medium-gray: #e9ecef;&#10;    --dark-gray: #6c757d;&#10;    --darker-gray: #495057;&#10;    --black: #212529;&#10;    &#10;    /* Map Colors */&#10;    --map-background: #e8f4fd;&#10;    --map-water: #a0d2eb;&#10;    --map-roads: #ffffff;&#10;    --map-buildings: #d4d4d4;&#10;    --route-primary: #667eea;&#10;    --route-alternative: #764ba2;&#10;    &#10;    /* Spacing */&#10;    --spacing-xs: 0.25rem;&#10;    --spacing-sm: 0.5rem;&#10;    --spacing-md: 1rem;&#10;    --spacing-lg: 1.5rem;&#10;    --spacing-xl: 2rem;&#10;    --spacing-xxl: 3rem;&#10;    &#10;    /* Typography */&#10;    --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;&#10;    --font-size-xs: 0.75rem;&#10;    --font-size-sm: 0.875rem;&#10;    --font-size-base: 1rem;&#10;    --font-size-lg: 1.125rem;&#10;    --font-size-xl: 1.25rem;&#10;    --font-size-xxl: 1.5rem;&#10;    --font-size-xxxl: 2rem;&#10;    &#10;    /* Borders and Radius */&#10;    --border-radius-sm: 0.25rem;&#10;    --border-radius-md: 0.5rem;&#10;    --border-radius-lg: 1rem;&#10;    --border-radius-xl: 1.5rem;&#10;    &#10;    /* Shadows */&#10;    --shadow-sm: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);&#10;    --shadow-md: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);&#10;    --shadow-lg: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);&#10;    --shadow-xl: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);&#10;    &#10;    /* Transitions */&#10;    --transition-fast: 0.15s ease;&#10;    --transition-base: 0.3s ease;&#10;    --transition-slow: 0.5s ease;&#10;}&#10;&#10;/* Reset and Base Styles */&#10;* {&#10;    margin: 0;&#10;    padding: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;body {&#10;    font-family: var(--font-family);&#10;    font-size: var(--font-size-base);&#10;    line-height: 1.6;&#10;    color: var(--black);&#10;    background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);&#10;    min-height: 100vh;&#10;    overflow-x: hidden;&#10;    margin: 0;&#10;    padding: 0;&#10;    width: 100vw;&#10;}&#10;&#10;/* Loading Screen */&#10;.loading-screen {&#10;    position: fixed;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);&#10;    display: flex;&#10;    flex-direction: column;&#10;    justify-content: center;&#10;    align-items: center;&#10;    z-index: 9999;&#10;    color: var(--white);&#10;}&#10;&#10;.loading-screen .logo {&#10;    font-size: 4rem;&#10;    font-weight: bold;&#10;    margin-bottom: var(--spacing-lg);&#10;    animation: pulse 2s ease-in-out infinite;&#10;}&#10;&#10;.loading-screen .loading-text {&#10;    font-size: var(--font-size-lg);&#10;    margin-bottom: var(--spacing-xl);&#10;    opacity: 0.9;&#10;}&#10;&#10;.loading-spinner {&#10;    width: 50px;&#10;    height: 50px;&#10;    border: 4px solid rgba(255, 255, 255, 0.3);&#10;    border-radius: 50%;&#10;    border-top-color: var(--white);&#10;    animation: spin 1s ease-in-out infinite;&#10;}&#10;&#10;@keyframes pulse {&#10;    0%, 100% { transform: scale(1); }&#10;    50% { transform: scale(1.05); }&#10;}&#10;&#10;@keyframes spin {&#10;    to { transform: rotate(360deg); }&#10;}&#10;&#10;/* Main Application */&#10;.main-app {&#10;    min-height: 100vh;&#10;    display: flex;&#10;    flex-direction: column;&#10;}&#10;&#10;/* Header */&#10;.app-header {&#10;    background: var(--white);&#10;    box-shadow: var(--shadow-sm);&#10;    position: sticky;&#10;    top: 0;&#10;    z-index: 100;&#10;    height: 70px;&#10;    flex-shrink: 0;&#10;}&#10;&#10;.header-content {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--spacing-md) var(--spacing-lg);&#10;    height: 100%;&#10;    width: 100%;&#10;    margin: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;.logo-section .app-title {&#10;    font-size: var(--font-size-xxl);&#10;    color: var(--primary-blue);&#10;    margin-bottom: 0;&#10;}&#10;&#10;.logo-section .app-subtitle {&#10;    color: var(--dark-gray);&#10;    font-size: var(--font-size-xs);&#10;    margin: 0;&#10;}&#10;&#10;.header-actions {&#10;    display: flex;&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.icon-btn {&#10;    background: none;&#10;    border: 2px solid var(--medium-gray);&#10;    width: 40px;&#10;    height: 40px;&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-lg);&#10;    cursor: pointer;&#10;    transition: all var(--transition-base);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;}&#10;&#10;.icon-btn:hover {&#10;    border-color: var(--primary-blue);&#10;    background: var(--light-gray);&#10;    transform: translateY(-2px);&#10;}&#10;&#10;/* Main Content - Better Proportions */&#10;.main-content {&#10;    display: flex;&#10;    flex: 1;&#10;    width: 100vw;&#10;    height: calc(100vh - 70px); /* Account for header height */&#10;    margin: 0;&#10;    padding: var(--spacing-md);&#10;    gap: var(--spacing-md);&#10;    box-sizing: border-box;&#10;    overflow: hidden;&#10;}&#10;&#10;/* Map area sizing */&#10;.map-display-area { flex: 1; min-height: 65vh; position: relative; }&#10;.map-container, #map-container { width: 100%; height: 100%; }&#10;&#10;/* Ensure map container fills parent without needing manual resize */&#10;#map-display { position: relative; }&#10;#map-container { position: absolute; inset: 0; width: 100%; height: 100%; }&#10;&#10;/* Hide legend and extraneous controls */&#10;.map-legend { display: none !important; }&#10;.map-controls { display: none !important; }&#10;&#10;/* Hide Mapbox control buttons in top-right only (remove other blanket hides) */&#10;.mapboxgl-ctrl-top-right { display: none !important; }&#10;&#10;/* Sidebar - More space for inputs */&#10;.sidebar {&#10;    width: 450px; /* Increased from 380px to 450px for better spacing */&#10;    min-width: 450px;&#10;    background: var(--white);&#10;    border-radius: var(--border-radius-lg);&#10;    box-shadow: var(--shadow-md);&#10;    padding: var(--spacing-lg); /* Better padding */&#10;    height: 100%;&#10;    overflow-y: auto;&#10;    flex-shrink: 0;&#10;}&#10;&#10;/* Route Form Container */&#10;.route-form-container {&#10;    height: 100%;&#10;    display: flex;&#10;    flex-direction: column;&#10;}&#10;&#10;/* Results Area - Better proportions */&#10;.results-area {&#10;    flex: 1;&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;    height: 100%;&#10;    min-width: 0;&#10;    overflow: hidden;&#10;}&#10;&#10;/* Map Display Area - Better height management */&#10;.map-display-area {&#10;    flex: 1;&#10;    min-height: 65vh; /* Increased to fill the section more fully */&#10;    background: var(--white);&#10;    position: relative;&#10;    border-radius: var(--border-radius-lg);&#10;    overflow: hidden;&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.map-container {&#10;    width: 100%;&#10;    height: 100%;&#10;    position: relative;&#10;    background: var(--light-gray);&#10;}&#10;&#10;#map-container {&#10;    width: 100%;&#10;    height: 100%;&#10;    border-radius: var(--border-radius-lg);&#10;}&#10;&#10;/* Route Results Panel - Improved visibility and scrolling */&#10;.route-results-panel {&#10;    height: 30%; /* Reduced from 40% to give the map more space */&#10;    min-height: 220px;&#10;    max-height: 320px;&#10;    overflow-y: auto;&#10;    background: var(--white);&#10;    border-radius: var(--border-radius-lg);&#10;    box-shadow: var(--shadow-md);&#10;    padding: var(--spacing-lg);&#10;    scrollbar-width: thin;&#10;    scrollbar-color: var(--primary-blue) var(--light-gray);&#10;}&#10;&#10;/* Custom scrollbar for webkit browsers */&#10;.route-results-panel::-webkit-scrollbar {&#10;    width: 10px;&#10;}&#10;&#10;.route-results-panel::-webkit-scrollbar-track {&#10;    background: var(--light-gray);&#10;    border-radius: var(--border-radius-sm);&#10;}&#10;&#10;.route-results-panel::-webkit-scrollbar-thumb {&#10;    background: var(--primary-blue);&#10;    border-radius: var(--border-radius-sm);&#10;}&#10;&#10;.route-results-panel::-webkit-scrollbar-thumb:hover {&#10;    background: var(--primary-purple);&#10;}&#10;&#10;/* Section Title */&#10;.section-title {&#10;    color: var(--primary-blue);&#10;    font-size: var(--font-size-xl);&#10;    margin-bottom: var(--spacing-lg);&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;/* Demo Locations */&#10;.demo-locations {&#10;    margin-bottom: var(--spacing-xl);&#10;    padding: var(--spacing-lg);&#10;    background: linear-gradient(135deg, #f0f4ff 0%, #e8f2ff 100%);&#10;    border-radius: var(--border-radius-lg);&#10;}&#10;&#10;.demo-locations h3 {&#10;    color: var(--primary-blue);&#10;    font-size: var(--font-size-base);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.demo-buttons {&#10;    display: grid;&#10;    grid-template-columns: 1fr 1fr;&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.demo-btn {&#10;    background: var(--white);&#10;    border: 2px solid var(--primary-blue);&#10;    color: var(--primary-blue);&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    border-radius: var(--border-radius-md);&#10;    cursor: pointer;&#10;    font-size: var(--font-size-sm);&#10;    font-weight: 600;&#10;    transition: all var(--transition-base);&#10;    white-space: normal;&#10;    text-align: center;&#10;}&#10;&#10;.demo-btn:hover {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.demo-description {&#10;    margin-top: var(--spacing-sm);&#10;    font-size: var(--font-size-xs);&#10;    color: var(--dark-gray);&#10;    text-align: center;&#10;    font-style: italic;&#10;}&#10;&#10;/* Form Styles - Better spacing */&#10;.route-form {&#10;    flex: 1;&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-lg);&#10;}&#10;&#10;.form-group {&#10;    margin-bottom: var(--spacing-lg);&#10;}&#10;&#10;.form-group label {&#10;    display: block;&#10;    margin-bottom: var(--spacing-sm);&#10;    font-weight: 600;&#10;    color: var(--darker-gray);&#10;    font-size: var(--font-size-base);&#10;}&#10;&#10;/* Location Input Container */&#10;.location-input-container {&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: var(--border-radius-lg);&#10;    padding: var(--spacing-md);&#10;    background: var(--white);&#10;    transition: border-color var(--transition-base);&#10;}&#10;&#10;.location-input-container:focus-within {&#10;    border-color: var(--primary-blue);&#10;    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;/* Input Type Selector */&#10;.input-type-selector {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    margin-bottom: var(--spacing-md);&#10;    padding-bottom: var(--spacing-sm);&#10;    border-bottom: 1px solid var(--light-gray);&#10;}&#10;&#10;.radio-label {&#10;    display: flex;&#10;    align-items: center;&#10;    cursor: pointer;&#10;    font-size: var(--font-size-sm);&#10;    color: var(--darker-gray);&#10;    font-weight: 600;&#10;}&#10;&#10;.radio-label input[type=&quot;radio&quot;] {&#10;    display: none;&#10;}&#10;&#10;.radio-button {&#10;    width: 16px;&#10;    height: 16px;&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: 50%;&#10;    margin-right: var(--spacing-sm);&#10;    position: relative;&#10;    transition: all var(--transition-base);&#10;}&#10;&#10;.radio-label input[type=&quot;radio&quot;]:checked + .radio-button {&#10;    border-color: var(--primary-blue);&#10;    background: var(--primary-blue);&#10;}&#10;&#10;.radio-label input[type=&quot;radio&quot;]:checked + .radio-button::after {&#10;    content: &quot;&quot;;&#10;    position: absolute;&#10;    top: 50%;&#10;    left: 50%;&#10;    transform: translate(-50%, -50%);&#10;    width: 6px;&#10;    height: 6px;&#10;    background: var(--white);&#10;    border-radius: 50%;&#10;}&#10;&#10;/* Address Input */&#10;.address-input {&#10;    display: flex;&#10;    gap: var(--spacing-sm);&#10;    align-items: center;&#10;}&#10;&#10;.address-field {&#10;    flex: 1;&#10;    padding: var(--spacing-md);&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-base);&#10;    transition: border-color var(--transition-base);&#10;    font-family: var(--font-family);&#10;}&#10;&#10;.address-field:focus {&#10;    outline: none;&#10;    border-color: var(--primary-blue);&#10;    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;.geocode-btn, .reverse-geocode-btn {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;    border: none;&#10;    padding: var(--spacing-md);&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-sm);&#10;    cursor: pointer;&#10;    transition: all var(--transition-base);&#10;    white-space: nowrap;&#10;    font-weight: 600;&#10;}&#10;&#10;.geocode-btn:hover, .reverse-geocode-btn:hover {&#10;    background: var(--primary-purple);&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;/* Coordinate Inputs */&#10;.coordinate-inputs {&#10;    display: grid;&#10;    grid-template-columns: 1fr 1fr auto;&#10;    gap: var(--spacing-sm);&#10;    align-items: center;&#10;}&#10;&#10;/* Form Inputs */&#10;.form-group input,&#10;.form-group select,&#10;.form-group textarea {&#10;    width: 100%;&#10;    padding: var(--spacing-md);&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-base);&#10;    transition: border-color var(--transition-base);&#10;    font-family: var(--font-family);&#10;}&#10;&#10;.form-group input:focus,&#10;.form-group select:focus,&#10;.form-group textarea:focus {&#10;    outline: none;&#10;    border-color: var(--primary-blue);&#10;    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;/* Range Input */&#10;.form-group input[type=&quot;range&quot;] {&#10;    -webkit-appearance: none;&#10;    appearance: none;&#10;    height: 6px;&#10;    background: var(--medium-gray);&#10;    border-radius: var(--border-radius-sm);&#10;    outline: none;&#10;}&#10;&#10;.form-group input[type=&quot;range&quot;]::-webkit-slider-thumb {&#10;    -webkit-appearance: none;&#10;    appearance: none;&#10;    width: 20px;&#10;    height: 20px;&#10;    background: var(--primary-blue);&#10;    border-radius: 50%;&#10;    cursor: pointer;&#10;}&#10;&#10;.range-value {&#10;    display: inline-block;&#10;    margin-left: var(--spacing-sm);&#10;    font-weight: 600;&#10;    color: var(--primary-blue);&#10;}&#10;&#10;/* Preferences Group */&#10;.preferences-group {&#10;    margin-top: var(--spacing-xl);&#10;}&#10;&#10;.preferences-group h3 {&#10;    color: var(--darker-gray);&#10;    font-size: var(--font-size-lg);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.checkbox-group {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.checkbox-label {&#10;    display: flex;&#10;    align-items: center;&#10;    cursor: pointer;&#10;    font-size: var(--font-size-sm);&#10;    color: var(--darker-gray);&#10;}&#10;&#10;.checkbox-label input[type=&quot;checkbox&quot;] {&#10;    display: none;&#10;}&#10;&#10;.checkmark {&#10;    width: 20px;&#10;    height: 20px;&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: var(--border-radius-sm);&#10;    margin-right: var(--spacing-sm);&#10;    position: relative;&#10;    transition: all var(--transition-base);&#10;}&#10;&#10;.checkbox-label input[type=&quot;checkbox&quot;]:checked + .checkmark {&#10;    background: var(--primary-blue);&#10;    border-color: var(--primary-blue);&#10;}&#10;&#10;.checkbox-label input[type=&quot;checkbox&quot;]:checked + .checkmark::after {&#10;    content: &quot;✓&quot;;&#10;    position: absolute;&#10;    top: 50%;&#10;    left: 50%;&#10;    transform: translate(-50%, -50%);&#10;    color: var(--white);&#10;    font-weight: bold;&#10;    font-size: var(--font-size-sm);&#10;}&#10;&#10;/* Buttons */&#10;.calculate-btn {&#10;    width: 100%;&#10;    background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);&#10;    color: var(--white);&#10;    border: none;&#10;    padding: var(--spacing-lg);&#10;    border-radius: var(--border-radius-lg);&#10;    font-size: var(--font-size-lg);&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: all var(--transition-base);&#10;    position: relative;&#10;    overflow: hidden;&#10;    margin-top: var(--spacing-lg);&#10;}&#10;&#10;.calculate-btn:hover {&#10;    transform: translateY(-3px);&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.calculate-btn:disabled {&#10;    opacity: 0.7;&#10;    cursor: not-allowed;&#10;    transform: none;&#10;}&#10;&#10;.btn-spinner {&#10;    width: 20px;&#10;    height: 20px;&#10;    border: 2px solid rgba(255, 255, 255, 0.3);&#10;    border-radius: 50%;&#10;    border-top-color: var(--white);&#10;    animation: spin 1s linear infinite;&#10;    margin: 0 auto;&#10;}&#10;&#10;.secondary-btn {&#10;    background: var(--white);&#10;    color: var(--primary-blue);&#10;    border: 2px solid var(--primary-blue);&#10;    padding: var(--spacing-md) var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-base);&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: all var(--transition-base);&#10;    width: 100%;&#10;}&#10;&#10;.secondary-btn:hover {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.primary-btn {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;    border: none;&#10;    padding: var(--spacing-md) var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-base);&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: all var(--transition-base);&#10;}&#10;&#10;.primary-btn:hover {&#10;    background: var(--primary-purple);&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;/* Welcome Message */&#10;.welcome-message-compact {&#10;    padding: var(--spacing-md);&#10;    text-align: center;&#10;    background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);&#10;    border-radius: var(--border-radius-lg);&#10;    box-shadow: var(--shadow-sm);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.welcome-content-compact h2 {&#10;    color: var(--primary-blue);&#10;    font-size: var(--font-size-xl);&#10;    margin-bottom: var(--spacing-xs);&#10;}&#10;&#10;.welcome-content-compact p {&#10;    color: var(--dark-gray);&#10;    font-size: var(--font-size-sm);&#10;}&#10;&#10;/* Route Metrics */&#10;.route-metrics {&#10;    display: grid;&#10;    grid-template-columns: repeat(4, 1fr);&#10;    gap: var(--spacing-md);&#10;    margin-bottom: var(--spacing-lg);&#10;}&#10;&#10;.metric-card {&#10;    background: linear-gradient(135deg, var(--light-gray) 0%, var(--medium-gray) 100%);&#10;    border-radius: var(--border-radius-md);&#10;    padding: var(--spacing-md);&#10;    text-align: center;&#10;    border: 2px solid transparent;&#10;    transition: all var(--transition-base);&#10;    min-height: 80px;&#10;    display: flex;&#10;    flex-direction: column;&#10;    justify-content: center;&#10;}&#10;&#10;.metric-card:hover {&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;    border-color: var(--primary-blue);&#10;}&#10;&#10;.metric-icon {&#10;    font-size: var(--font-size-xl);&#10;    margin-bottom: var(--spacing-xs);&#10;}&#10;&#10;.metric-value {&#10;    font-size: var(--font-size-lg);&#10;    font-weight: bold;&#10;    color: var(--primary-blue);&#10;    line-height: 1.2;&#10;}&#10;&#10;.metric-label {&#10;    font-size: var(--font-size-xs);&#10;    color: var(--dark-gray);&#10;    text-transform: uppercase;&#10;    letter-spacing: 0.5px;&#10;    margin-top: var(--spacing-xs);&#10;}&#10;&#10;.metric-card.accessibility.excellent {&#10;    background: rgba(76, 175, 80, 0.1);&#10;    border-left: 4px solid var(--success-green);&#10;}&#10;&#10;.metric-card.accessibility.good {&#10;    background: rgba(139, 195, 74, 0.1);&#10;    border-left: 4px solid #8bc34a;&#10;}&#10;&#10;.metric-card.accessibility.fair {&#10;    background: rgba(255, 152, 0, 0.1);&#10;    border-left: 4px solid var(--warning-orange);&#10;}&#10;&#10;.metric-card.accessibility.poor {&#10;    background: rgba(244, 67, 54, 0.1);&#10;    border-left: 4px solid var(--error-red);&#10;}&#10;&#10;/* Route Results */&#10;.route-results {&#10;    padding: 0;&#10;}&#10;&#10;.route-header {&#10;    margin-bottom: var(--spacing-lg);&#10;    padding-bottom: var(--spacing-md);&#10;    border-bottom: 2px solid var(--light-gray);&#10;}&#10;&#10;.route-title {&#10;    color: var(--primary-blue);&#10;    font-size: var(--font-size-lg);&#10;    margin: 0;&#10;}&#10;&#10;/* Route Actions */&#10;.route-actions {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    margin-top: var(--spacing-lg);&#10;    padding-top: var(--spacing-md);&#10;    border-top: 1px solid var(--light-gray);&#10;}&#10;&#10;.route-actions .primary-btn,&#10;.route-actions .secondary-btn {&#10;    flex: 1;&#10;    padding: var(--spacing-md);&#10;    font-size: var(--font-size-sm);&#10;}&#10;&#10;/* Map Controls */&#10;.map-controls {&#10;    position: absolute;&#10;    top: 15px;&#10;    right: 15px;&#10;    z-index: 1000;&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.map-toggle-group,&#10;.map-action-group {&#10;    display: flex;&#10;    background: rgba(255, 255, 255, 0.95);&#10;    border-radius: var(--border-radius-md);&#10;    box-shadow: var(--shadow-md);&#10;    overflow: hidden;&#10;}&#10;&#10;.map-toggle-btn,&#10;.map-action-btn {&#10;    background: transparent;&#10;    border: none;&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    cursor: pointer;&#10;    font-size: var(--font-size-lg);&#10;    transition: all var(--transition-fast);&#10;    border-right: 1px solid var(--medium-gray);&#10;}&#10;&#10;.map-toggle-btn:last-child,&#10;.map-action-btn:last-child {&#10;    border-right: none;&#10;}&#10;&#10;.map-toggle-btn:hover,&#10;.map-action-btn:hover {&#10;    background: var(--light-gray);&#10;}&#10;&#10;.map-toggle-btn.active {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;}&#10;&#10;/* Leaflet Customizations */&#10;.leaflet-container {&#10;    height: 100% !important;&#10;    width: 100% !important;&#10;    border-radius: var(--border-radius-lg);&#10;    font-family: var(--font-family);&#10;}&#10;&#10;.leaflet-control-container .leaflet-control {&#10;    font-family: var(--font-family);&#10;}&#10;&#10;.leaflet-control-zoom {&#10;    border: none !important;&#10;    box-shadow: var(--shadow-md) !important;&#10;}&#10;&#10;.leaflet-control-zoom a {&#10;    background-color: var(--white) !important;&#10;    border: 1px solid rgba(0,0,0,0.1) !important;&#10;    color: var(--black) !important;&#10;    font-size: 18px !important;&#10;    font-weight: bold !important;&#10;}&#10;&#10;.leaflet-control-zoom a:hover {&#10;    background-color: var(--light-gray) !important;&#10;    color: var(--primary-blue) !important;&#10;}&#10;&#10;.leaflet-popup-content-wrapper {&#10;    border-radius: var(--border-radius-md) !important;&#10;    box-shadow: var(--shadow-md) !important;&#10;}&#10;&#10;.leaflet-popup-content {&#10;    margin: var(--spacing-md) !important;&#10;    line-height: 1.5 !important;&#10;    font-family: var(--font-family) !important;&#10;}&#10;&#10;/* Routing Method Info */&#10;.routing-method-info {&#10;    background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);&#10;    border-radius: var(--border-radius-lg);&#10;    padding: var(--spacing-lg);&#10;    margin-bottom: var(--spacing-lg);&#10;    border-left: 4px solid var(--primary-blue);&#10;}&#10;&#10;.routing-method-info.road-network {&#10;    border-left-color: var(--success-green);&#10;    background: linear-gradient(135deg, #f0fff4 0%, #e6ffed 100%);&#10;}&#10;&#10;.routing-method-info.grid-network {&#10;    border-left-color: var(--info-blue);&#10;    background: linear-gradient(135deg, #e3f2fd 0%, #e1f5fe 100%);&#10;}&#10;&#10;.routing-method-info.grid-aligned {&#10;    border-left-color: var(--warning-orange);&#10;    background: linear-gradient(135deg, #fff8e1 0%, #fffde7 100%);&#10;}&#10;&#10;.routing-method-info h4 {&#10;    color: var(--primary-blue);&#10;    margin-bottom: var(--spacing-sm);&#10;    font-size: var(--font-size-lg);&#10;}&#10;&#10;.routing-method-info.road-network h4 {&#10;    color: var(--success-green);&#10;}&#10;&#10;.routing-method-info.grid-network h4 {&#10;    color: var(--info-blue);&#10;}&#10;&#10;.routing-method-info.grid-aligned h4 {&#10;    color: var(--warning-orange);&#10;}&#10;&#10;.routing-method-info p {&#10;    color: var(--darker-gray);&#10;    margin-bottom: var(--spacing-md);&#10;    line-height: 1.6;&#10;}&#10;&#10;.routing-details {&#10;    margin-top: var(--spacing-md);&#10;}&#10;&#10;.routing-feature {&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.routing-feature strong {&#10;    color: var(--darker-gray);&#10;    display: block;&#10;    margin-bottom: var(--spacing-xs);&#10;}&#10;&#10;.feature-tags {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-xs);&#10;    margin-top: var(--spacing-xs);&#10;}&#10;&#10;.feature-tag {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;    padding: var(--spacing-xs) var(--spacing-sm);&#10;    border-radius: var(--border-radius-sm);&#10;    font-size: var(--font-size-xs);&#10;    font-weight: 500;&#10;}&#10;&#10;.feature-tag.road-type {&#10;    background: var(--success-green);&#10;}&#10;&#10;.feature-tag.surface-type {&#10;    background: var(--info-blue);&#10;}&#10;&#10;.routing-benefits {&#10;    margin-top: var(--spacing-md);&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.benefit-item {&#10;    padding: var(--spacing-sm);&#10;    background: rgba(255, 255, 255, 0.6);&#10;    border-radius: var(--border-radius-sm);&#10;    font-size: var(--font-size-sm);&#10;    border: 1px solid rgba(0, 0, 0, 0.1);&#10;}&#10;&#10;/* Notifications */&#10;.notifications-container {&#10;    position: fixed;&#10;    top: 80px;&#10;    right: 20px;&#10;    z-index: 10000;&#10;    max-width: 400px;&#10;}&#10;&#10;.route-notification {&#10;    background: var(--white);&#10;    border-radius: var(--border-radius-md);&#10;    box-shadow: var(--shadow-lg);&#10;    margin-bottom: var(--spacing-sm);&#10;    overflow: hidden;&#10;    border-left: 4px solid var(--primary-blue);&#10;    animation: slideIn 0.3s ease;&#10;}&#10;&#10;.route-notification.notification-success {&#10;    border-left-color: var(--success-green);&#10;}&#10;&#10;.route-notification.notification-warning {&#10;    border-left-color: var(--warning-orange);&#10;}&#10;&#10;.route-notification.notification-info {&#10;    border-left-color: var(--info-blue);&#10;}&#10;&#10;.notification-content {&#10;    display: flex;&#10;    align-items: center;&#10;    padding: var(--spacing-md);&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.notification-icon {&#10;    font-size: var(--font-size-lg);&#10;    flex-shrink: 0;&#10;}&#10;&#10;.notification-message {&#10;    flex: 1;&#10;    font-size: var(--font-size-sm);&#10;    color: var(--darker-gray);&#10;    line-height: 1.4;&#10;}&#10;&#10;.notification-close {&#10;    background: none;&#10;    border: none;&#10;    font-size: var(--font-size-lg);&#10;    color: var(--dark-gray);&#10;    cursor: pointer;&#10;    padding: 0;&#10;    width: 24px;&#10;    height: 24px;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    border-radius: 50%;&#10;    transition: all var(--transition-fast);&#10;}&#10;&#10;.notification-close:hover {&#10;    background: var(--light-gray);&#10;    color: var(--darker-gray);&#10;}&#10;&#10;/* Modals */&#10;.modal {&#10;    position: fixed;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: rgba(0, 0, 0, 0.5);&#10;    display: flex;&#10;    justify-content: center;&#10;    align-items: center;&#10;    z-index: 1000;&#10;    backdrop-filter: blur(5px);&#10;}&#10;&#10;.modal-content {&#10;    background: var(--white);&#10;    border-radius: var(--border-radius-xl);&#10;    box-shadow: var(--shadow-xl);&#10;    max-width: 500px;&#10;    width: 90%;&#10;    max-height: 90vh;&#10;    overflow-y: auto;&#10;}&#10;&#10;.modal-content.large {&#10;    max-width: 800px;&#10;}&#10;&#10;.modal-header {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--spacing-xl);&#10;    border-bottom: 2px solid var(--light-gray);&#10;}&#10;&#10;.modal-header h3 {&#10;    color: var(--primary-blue);&#10;    font-size: var(--font-size-xl);&#10;    margin: 0;&#10;}&#10;&#10;.close-btn {&#10;    background: none;&#10;    border: none;&#10;    font-size: var(--font-size-xxl);&#10;    cursor: pointer;&#10;    color: var(--dark-gray);&#10;    transition: color var(--transition-base);&#10;}&#10;&#10;.close-btn:hover {&#10;    color: var(--error-red);&#10;}&#10;&#10;.modal-body {&#10;    padding: var(--spacing-xl);&#10;}&#10;&#10;.modal-actions {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    justify-content: flex-end;&#10;    margin-top: var(--spacing-xl);&#10;}&#10;&#10;/* Navigation Modal Styles */&#10;.navigation-modal .modal-content {&#10;    max-width: 600px;&#10;}&#10;&#10;.navigation-info {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-lg);&#10;}&#10;&#10;.current-instruction {&#10;    background: var(--light-gray);&#10;    padding: var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;    border-left: 4px solid var(--primary-blue);&#10;}&#10;&#10;.current-instruction h4 {&#10;    color: var(--primary-blue);&#10;    margin-bottom: var(--spacing-sm);&#10;    font-size: var(--font-size-lg);&#10;}&#10;&#10;.current-instruction p {&#10;    font-size: var(--font-size-lg);&#10;    color: var(--darker-gray);&#10;    margin: 0;&#10;}&#10;&#10;.navigation-progress {&#10;    text-align: center;&#10;}&#10;&#10;.progress-bar {&#10;    width: 100%;&#10;    height: 8px;&#10;    background: var(--medium-gray);&#10;    border-radius: 4px;&#10;    overflow: hidden;&#10;    margin-bottom: var(--spacing-sm);&#10;}&#10;&#10;.progress-fill {&#10;    height: 100%;&#10;    background: linear-gradient(90deg, var(--primary-blue), var(--primary-purple));&#10;    transition: width var(--transition-base);&#10;}&#10;&#10;.navigation-controls {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    justify-content: center;&#10;}&#10;&#10;.route-summary {&#10;    background: var(--light-gray);&#10;    padding: var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;}&#10;&#10;.route-summary p {&#10;    margin: var(--spacing-xs) 0;&#10;    color: var(--darker-gray);&#10;}&#10;&#10;/* Alternatives Modal Styles */&#10;.alternatives-modal .modal-content {&#10;    max-width: 700px;&#10;}&#10;&#10;.alternatives-list {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-lg);&#10;}&#10;&#10;.alternative-route {&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: var(--border-radius-md);&#10;    padding: var(--spacing-lg);&#10;    transition: all var(--transition-base);&#10;}&#10;&#10;.alternative-route:hover {&#10;    border-color: var(--primary-blue);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.alternative-route.current-route {&#10;    border-color: var(--success-green);&#10;    background: rgba(76, 175, 80, 0.05);&#10;}&#10;&#10;.alternative-route h4 {&#10;    color: var(--primary-blue);&#10;    margin-bottom: var(--spacing-md);&#10;    font-size: var(--font-size-lg);&#10;}&#10;&#10;.alternative-route.current-route h4 {&#10;    color: var(--success-green);&#10;}&#10;&#10;.route-details {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));&#10;    gap: var(--spacing-sm);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.route-details p {&#10;    margin: 0;&#10;    color: var(--darker-gray);&#10;    font-size: var(--font-size-sm);&#10;}&#10;&#10;.route-features {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-sm);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.feature-tag {&#10;    background: var(--info-blue);&#10;    color: var(--white);&#10;    padding: var(--spacing-xs) var(--spacing-sm);&#10;    border-radius: var(--border-radius-sm);&#10;    font-size: var(--font-size-xs);&#10;    font-weight: 500;&#10;}&#10;&#10;.current-route .feature-tag {&#10;    background: var(--success-green);&#10;}&#10;&#10;/* Current Position Marker */&#10;.current-position-marker {&#10;    animation: pulse 2s infinite;&#10;}&#10;&#10;@keyframes pulse {&#10;    0% {&#10;        transform: scale(1);&#10;    }&#10;    50% {&#10;        transform: scale(1.1);&#10;    }&#10;    100% {&#10;        transform: scale(1);&#10;    }&#10;}&#10;&#10;/* Notifications Container */&#10;.notifications-container {&#10;    position: fixed;&#10;    top: 20px;&#10;    right: 20px;&#10;    z-index: 10000;&#10;    max-width: 400px;&#10;}&#10;&#10;.route-notification {&#10;    background: var(--white);&#10;    border-radius: var(--border-radius-md);&#10;    box-shadow: var(--shadow-md);&#10;    margin-bottom: var(--spacing-sm);&#10;    animation: slideIn 0.3s ease-out;&#10;}&#10;&#10;.route-notification.notification-success {&#10;    border-left: 4px solid var(--success-green);&#10;}&#10;&#10;.route-notification.notification-warning {&#10;    border-left: 4px solid var(--warning-orange);&#10;}&#10;&#10;.route-notification.notification-info {&#10;    border-left: 4px solid var(--info-blue);&#10;}&#10;&#10;.notification-content {&#10;    display: flex;&#10;    align-items: center;&#10;    padding: var(--spacing-md);&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.notification-icon {&#10;    font-size: var(--font-size-lg);&#10;    flex-shrink: 0;&#10;}&#10;&#10;.notification-message {&#10;    flex: 1;&#10;    color: var(--darker-gray);&#10;    font-size: var(--font-size-sm);&#10;}&#10;&#10;.notification-close {&#10;    background: none;&#10;    border: none;&#10;    font-size: var(--font-size-lg);&#10;    cursor: pointer;&#10;    color: var(--dark-gray);&#10;    padding: 0;&#10;    width: 24px;&#10;    height: 24px;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    border-radius: 50%;&#10;    transition: all var(--transition-fast);&#10;}&#10;&#10;/* Animations */&#10;@keyframes slideIn {&#10;    from {&#10;        transform: translateX(100%);&#10;        opacity: 0;&#10;    }&#10;    to {&#10;        transform: translateX(0);&#10;        opacity: 1;&#10;    }&#10;}&#10;&#10;/* Responsive Design */&#10;@media (max-width: 1400px) {&#10;    .sidebar {&#10;        width: 400px;&#10;        min-width: 400px;&#10;    }&#10;}&#10;&#10;@media (max-width: 1200px) {&#10;    .sidebar {&#10;        width: 380px;&#10;        min-width: 380px;&#10;    }&#10;    &#10;    .demo-buttons {&#10;        grid-template-columns: 1fr;&#10;    }&#10;}&#10;&#10;@media (max-width: 1024px) {&#10;    .main-content {&#10;        flex-direction: column;&#10;        height: auto;&#10;        padding: var(--spacing-md);&#10;    }&#10;    &#10;    .sidebar {&#10;        width: 100%;&#10;        min-width: unset;&#10;        height: auto;&#10;        max-height: none;&#10;    }&#10;    &#10;    .results-area {&#10;        width: 100%;&#10;        height: 800px;&#10;    }&#10;    &#10;    .map-display-area {&#10;        min-height: 400px;&#10;    }&#10;    &#10;    .route-results-panel {&#10;        height: 350px;&#10;    }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .header-content {&#10;        padding: var(--spacing-sm) var(--spacing-md);&#10;    }&#10;    &#10;    .app-title {&#10;        font-size: var(--font-size-xl) !important;&#10;    }&#10;    &#10;    .coordinate-inputs {&#10;        grid-template-columns: 1fr;&#10;    }&#10;    &#10;    .demo-buttons {&#10;        grid-template-columns: 1fr;&#10;    }&#10;    &#10;    .route-metrics {&#10;        grid-template-columns: 1fr 1fr;&#10;    }&#10;    &#10;    .modal-content {&#10;        width: 95%;&#10;        margin: var(--spacing-lg);&#10;    }&#10;}&#10;&#10;/* Focus styles for accessibility */&#10;*:focus {&#10;    outline: 3px solid var(--primary-blue);&#10;    outline-offset: 2px;&#10;}&#10;&#10;/* Screen reader only */&#10;.sr-only {&#10;    position: absolute;&#10;    width: 1px;&#10;    height: 1px;&#10;    padding: 0;&#10;    margin: -1px;&#10;    overflow: hidden;&#10;    clip: rect(0, 0, 0, 0);&#10;    white-space: nowrap;&#10;    border: 0;&#10;}" />
              <option name="updatedContent" value=":root {&#10;    --primary-blue: #667eea;&#10;    --primary-purple: #764ba2;&#10;    --success-green: #4CAF50;&#10;    --warning-orange: #FF9800;&#10;    --error-red: #F44336;&#10;    --info-blue: #2196F3;&#10;    &#10;    --high-accessibility: #4CAF50;&#10;    --medium-accessibility: #FF9800;&#10;    --low-accessibility: #F44336;&#10;    &#10;    --white: #ffffff;&#10;    --light-gray: #f8f9fa;&#10;    --medium-gray: #e9ecef;&#10;    --dark-gray: #6c757d;&#10;    --darker-gray: #495057;&#10;    --black: #212529;&#10;    &#10;    --map-background: #e8f4fd;&#10;    --map-water: #a0d2eb;&#10;    --map-roads: #ffffff;&#10;    --map-buildings: #d4d4d4;&#10;    --route-primary: #667eea;&#10;    --route-alternative: #764ba2;&#10;    &#10;    --spacing-xs: 0.25rem;&#10;    --spacing-sm: 0.5rem;&#10;    --spacing-md: 1rem;&#10;    --spacing-lg: 1.5rem;&#10;    --spacing-xl: 2rem;&#10;    --spacing-xxl: 3rem;&#10;    &#10;    --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;&#10;    --font-size-xs: 0.75rem;&#10;    --font-size-sm: 0.875rem;&#10;    --font-size-base: 1rem;&#10;    --font-size-lg: 1.125rem;&#10;    --font-size-xl: 1.25rem;&#10;    --font-size-xxl: 1.5rem;&#10;    --font-size-xxxl: 2rem;&#10;    &#10;    --border-radius-sm: 0.25rem;&#10;    --border-radius-md: 0.5rem;&#10;    --border-radius-lg: 1rem;&#10;    --border-radius-xl: 1.5rem;&#10;    &#10;    --shadow-sm: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);&#10;    --shadow-md: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);&#10;    --shadow-lg: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);&#10;    --shadow-xl: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);&#10;    &#10;    --transition-fast: 0.15s ease;&#10;    --transition-base: 0.3s ease;&#10;    --transition-slow: 0.5s ease;&#10;}&#10;&#10;* {&#10;    margin: 0;&#10;    padding: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;body {&#10;    font-family: var(--font-family);&#10;    font-size: var(--font-size-base);&#10;    line-height: 1.6;&#10;    color: var(--black);&#10;    background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);&#10;    min-height: 100vh;&#10;    overflow-x: hidden;&#10;    margin: 0;&#10;    padding: 0;&#10;    width: 100vw;&#10;}&#10;&#10;.loading-screen {&#10;    position: fixed;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);&#10;    display: flex;&#10;    flex-direction: column;&#10;    justify-content: center;&#10;    align-items: center;&#10;    z-index: 9999;&#10;    color: var(--white);&#10;}&#10;&#10;.loading-screen .logo {&#10;    font-size: 4rem;&#10;    font-weight: bold;&#10;    margin-bottom: var(--spacing-lg);&#10;    animation: pulse 2s ease-in-out infinite;&#10;}&#10;&#10;.loading-screen .loading-text {&#10;    font-size: var(--font-size-lg);&#10;    margin-bottom: var(--spacing-xl);&#10;    opacity: 0.9;&#10;}&#10;&#10;.loading-spinner {&#10;    width: 50px;&#10;    height: 50px;&#10;    border: 4px solid rgba(255, 255, 255, 0.3);&#10;    border-radius: 50%;&#10;    border-top-color: var(--white);&#10;    animation: spin 1s ease-in-out infinite;&#10;}&#10;&#10;@keyframes pulse {&#10;    0%, 100% { transform: scale(1); }&#10;    50% { transform: scale(1.05); }&#10;}&#10;&#10;@keyframes spin {&#10;    to { transform: rotate(360deg); }&#10;}&#10;&#10;.main-app {&#10;    min-height: 100vh;&#10;    display: flex;&#10;    flex-direction: column;&#10;}&#10;&#10;.app-header {&#10;    background: var(--white);&#10;    box-shadow: var(--shadow-sm);&#10;    position: sticky;&#10;    top: 0;&#10;    z-index: 100;&#10;    height: 70px;&#10;    flex-shrink: 0;&#10;}&#10;&#10;.header-content {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--spacing-md) var(--spacing-lg);&#10;    height: 100%;&#10;    width: 100%;&#10;    margin: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;.logo-section .app-title {&#10;    font-size: var(--font-size-xxl);&#10;    color: var(--primary-blue);&#10;    margin-bottom: 0;&#10;}&#10;&#10;.logo-section .app-subtitle {&#10;    color: var(--dark-gray);&#10;    font-size: var(--font-size-xs);&#10;    margin: 0;&#10;}&#10;&#10;.header-actions {&#10;    display: flex;&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.icon-btn {&#10;    background: none;&#10;    border: 2px solid var(--medium-gray);&#10;    width: 40px;&#10;    height: 40px;&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-lg);&#10;    cursor: pointer;&#10;    transition: all var(--transition-base);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;}&#10;&#10;.icon-btn:hover {&#10;    border-color: var(--primary-blue);&#10;    background: var(--light-gray);&#10;    transform: translateY(-2px);&#10;}&#10;&#10;.main-content {&#10;    display: flex;&#10;    flex: 1;&#10;    width: 100vw;&#10;    height: calc(100vh - 70px); /* Account for header height */&#10;    margin: 0;&#10;    padding: var(--spacing-md);&#10;    gap: var(--spacing-md);&#10;    box-sizing: border-box;&#10;    overflow: hidden;&#10;}&#10;&#10;.map-display-area { flex: 1; min-height: 65vh; position: relative; }&#10;.map-container, #map-container { width: 100%; height: 100%; }&#10;&#10;#map-display { position: relative; }&#10;#map-container { position: absolute; inset: 0; width: 100%; height: 100%; }&#10;&#10;.map-legend { display: none !important; }&#10;.map-controls { display: none !important; }&#10;&#10;.mapboxgl-ctrl-top-right { display: none !important; }&#10;&#10;.sidebar {&#10;    width: 450px; /* Increased from 380px to 450px for better spacing */&#10;    min-width: 450px;&#10;    background: var(--white);&#10;    border-radius: var(--border-radius-lg);&#10;    box-shadow: var(--shadow-md);&#10;    padding: var(--spacing-lg); /* Better padding */&#10;    height: 100%;&#10;    overflow-y: auto;&#10;    flex-shrink: 0;&#10;}&#10;&#10;.route-form-container {&#10;    height: 100%;&#10;    display: flex;&#10;    flex-direction: column;&#10;}&#10;&#10;.results-area {&#10;    flex: 1;&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;    height: 100%;&#10;    min-width: 0;&#10;    overflow: hidden;&#10;}&#10;&#10;.map-display-area {&#10;    flex: 1;&#10;    min-height: 65vh; /* Increased to fill the section more fully */&#10;    background: var(--white);&#10;    position: relative;&#10;    border-radius: var(--border-radius-lg);&#10;    overflow: hidden;&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.map-container {&#10;    width: 100%;&#10;    height: 100%;&#10;    position: relative;&#10;    background: var(--light-gray);&#10;}&#10;&#10;#map-container {&#10;    width: 100%;&#10;    height: 100%;&#10;    border-radius: var(--border-radius-lg);&#10;}&#10;&#10;.route-results-panel {&#10;    height: 30%; /* Reduced from 40% to give the map more space */&#10;    min-height: 220px;&#10;    max-height: 320px;&#10;    overflow-y: auto;&#10;    background: var(--white);&#10;    border-radius: var(--border-radius-lg);&#10;    box-shadow: var(--shadow-md);&#10;    padding: var(--spacing-lg);&#10;    scrollbar-width: thin;&#10;    scrollbar-color: var(--primary-blue) var(--light-gray);&#10;}&#10;&#10;.route-results-panel::-webkit-scrollbar {&#10;    width: 10px;&#10;}&#10;&#10;.route-results-panel::-webkit-scrollbar-track {&#10;    background: var(--light-gray);&#10;    border-radius: var(--border-radius-sm);&#10;}&#10;&#10;.route-results-panel::-webkit-scrollbar-thumb {&#10;    background: var(--primary-blue);&#10;    border-radius: var(--border-radius-sm);&#10;}&#10;&#10;.route-results-panel::-webkit-scrollbar-thumb:hover {&#10;    background: var(--primary-purple);&#10;}&#10;&#10;.section-title {&#10;    color: var(--primary-blue);&#10;    font-size: var(--font-size-xl);&#10;    margin-bottom: var(--spacing-lg);&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.demo-locations {&#10;    margin-bottom: var(--spacing-xl);&#10;    padding: var(--spacing-lg);&#10;    background: linear-gradient(135deg, #f0f4ff 0%, #e8f2ff 100%);&#10;    border-radius: var(--border-radius-lg);&#10;}&#10;&#10;.demo-locations h3 {&#10;    color: var(--primary-blue);&#10;    font-size: var(--font-size-base);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.demo-buttons {&#10;    display: grid;&#10;    grid-template-columns: 1fr 1fr;&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.demo-btn {&#10;    background: var(--white);&#10;    border: 2px solid var(--primary-blue);&#10;    color: var(--primary-blue);&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    border-radius: var(--border-radius-md);&#10;    cursor: pointer;&#10;    font-size: var(--font-size-sm);&#10;    font-weight: 600;&#10;    transition: all var(--transition-base);&#10;    white-space: normal;&#10;    text-align: center;&#10;}&#10;&#10;.demo-btn:hover {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.demo-description {&#10;    margin-top: var(--spacing-sm);&#10;    font-size: var(--font-size-xs);&#10;    color: var(--dark-gray);&#10;    text-align: center;&#10;    font-style: italic;&#10;}&#10;&#10;.route-form {&#10;    flex: 1;&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-lg);&#10;}&#10;&#10;.form-group {&#10;    margin-bottom: var(--spacing-lg);&#10;}&#10;&#10;.form-group label {&#10;    display: block;&#10;    margin-bottom: var(--spacing-sm);&#10;    font-weight: 600;&#10;    color: var(--darker-gray);&#10;    font-size: var(--font-size-base);&#10;}&#10;&#10;.location-input-container {&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: var(--border-radius-lg);&#10;    padding: var(--spacing-md);&#10;    background: var(--white);&#10;    transition: border-color var(--transition-base);&#10;}&#10;&#10;.location-input-container:focus-within {&#10;    border-color: var(--primary-blue);&#10;    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;.input-type-selector {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    margin-bottom: var(--spacing-md);&#10;    padding-bottom: var(--spacing-sm);&#10;    border-bottom: 1px solid var(--light-gray);&#10;}&#10;&#10;.radio-label {&#10;    display: flex;&#10;    align-items: center;&#10;    cursor: pointer;&#10;    font-size: var(--font-size-sm);&#10;    color: var(--darker-gray);&#10;    font-weight: 600;&#10;}&#10;&#10;.radio-label input[type=&quot;radio&quot;] {&#10;    display: none;&#10;}&#10;&#10;.radio-button {&#10;    width: 16px;&#10;    height: 16px;&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: 50%;&#10;    margin-right: var(--spacing-sm);&#10;    position: relative;&#10;    transition: all var(--transition-base);&#10;}&#10;&#10;.radio-label input[type=&quot;radio&quot;]:checked + .radio-button {&#10;    border-color: var(--primary-blue);&#10;    background: var(--primary-blue);&#10;}&#10;&#10;.radio-label input[type=&quot;radio&quot;]:checked + .radio-button::after {&#10;    content: &quot;&quot;;&#10;    position: absolute;&#10;    top: 50%;&#10;    left: 50%;&#10;    transform: translate(-50%, -50%);&#10;    width: 6px;&#10;    height: 6px;&#10;    background: var(--white);&#10;    border-radius: 50%;&#10;}&#10;&#10;.address-input {&#10;    display: flex;&#10;    gap: var(--spacing-sm);&#10;    align-items: center;&#10;}&#10;&#10;.address-field {&#10;    flex: 1;&#10;    padding: var(--spacing-md);&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-base);&#10;    transition: border-color var(--transition-base);&#10;    font-family: var(--font-family);&#10;}&#10;&#10;.address-field:focus {&#10;    outline: none;&#10;    border-color: var(--primary-blue);&#10;    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;.geocode-btn, .reverse-geocode-btn {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;    border: none;&#10;    padding: var(--spacing-md);&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-sm);&#10;    cursor: pointer;&#10;    transition: all var(--transition-base);&#10;    white-space: nowrap;&#10;    font-weight: 600;&#10;}&#10;&#10;.geocode-btn:hover, .reverse-geocode-btn:hover {&#10;    background: var(--primary-purple);&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.coordinate-inputs {&#10;    display: grid;&#10;    grid-template-columns: 1fr 1fr auto;&#10;    gap: var(--spacing-sm);&#10;    align-items: center;&#10;}&#10;&#10;.form-group input,&#10;.form-group select,&#10;.form-group textarea {&#10;    width: 100%;&#10;    padding: var(--spacing-md);&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-base);&#10;    transition: border-color var(--transition-base);&#10;    font-family: var(--font-family);&#10;}&#10;&#10;.form-group input:focus,&#10;.form-group select:focus,&#10;.form-group textarea:focus {&#10;    outline: none;&#10;    border-color: var(--primary-blue);&#10;    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;.form-group input[type=&quot;range&quot;] {&#10;    -webkit-appearance: none;&#10;    appearance: none;&#10;    height: 6px;&#10;    background: var(--medium-gray);&#10;    border-radius: var(--border-radius-sm);&#10;    outline: none;&#10;}&#10;&#10;.form-group input[type=&quot;range&quot;]::-webkit-slider-thumb {&#10;    -webkit-appearance: none;&#10;    appearance: none;&#10;    width: 20px;&#10;    height: 20px;&#10;    background: var(--primary-blue);&#10;    border-radius: 50%;&#10;    cursor: pointer;&#10;}&#10;&#10;.range-value {&#10;    display: inline-block;&#10;    margin-left: var(--spacing-sm);&#10;    font-weight: 600;&#10;    color: var(--primary-blue);&#10;}&#10;&#10;.preferences-group {&#10;    margin-top: var(--spacing-xl);&#10;}&#10;&#10;.preferences-group h3 {&#10;    color: var(--darker-gray);&#10;    font-size: var(--font-size-lg);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.checkbox-group {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.checkbox-label {&#10;    display: flex;&#10;    align-items: center;&#10;    cursor: pointer;&#10;    font-size: var(--font-size-sm);&#10;    color: var(--darker-gray);&#10;}&#10;&#10;.checkbox-label input[type=&quot;checkbox&quot;] {&#10;    display: none;&#10;}&#10;&#10;.checkmark {&#10;    width: 20px;&#10;    height: 20px;&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: var(--border-radius-sm);&#10;    margin-right: var(--spacing-sm);&#10;    position: relative;&#10;    transition: all var(--transition-base);&#10;}&#10;&#10;.checkbox-label input[type=&quot;checkbox&quot;]:checked + .checkmark {&#10;    background: var(--primary-blue);&#10;    border-color: var(--primary-blue);&#10;}&#10;&#10;.checkbox-label input[type=&quot;checkbox&quot;]:checked + .checkmark::after {&#10;    content: &quot;✓&quot;;&#10;    position: absolute;&#10;    top: 50%;&#10;    left: 50%;&#10;    transform: translate(-50%, -50%);&#10;    color: var(--white);&#10;    font-weight: bold;&#10;    font-size: var(--font-size-sm);&#10;}&#10;&#10;.calculate-btn {&#10;    width: 100%;&#10;    background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);&#10;    color: var(--white);&#10;    border: none;&#10;    padding: var(--spacing-lg);&#10;    border-radius: var(--border-radius-lg);&#10;    font-size: var(--font-size-lg);&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: all var(--transition-base);&#10;    position: relative;&#10;    overflow: hidden;&#10;    margin-top: var(--spacing-lg);&#10;}&#10;&#10;.calculate-btn:hover {&#10;    transform: translateY(-3px);&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.calculate-btn:disabled {&#10;    opacity: 0.7;&#10;    cursor: not-allowed;&#10;    transform: none;&#10;}&#10;&#10;.btn-spinner {&#10;    width: 20px;&#10;    height: 20px;&#10;    border: 2px solid rgba(255, 255, 255, 0.3);&#10;    border-radius: 50%;&#10;    border-top-color: var(--white);&#10;    animation: spin 1s linear infinite;&#10;    margin: 0 auto;&#10;}&#10;&#10;.secondary-btn {&#10;    background: var(--white);&#10;    color: var(--primary-blue);&#10;    border: 2px solid var(--primary-blue);&#10;    padding: var(--spacing-md) var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-base);&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: all var(--transition-base);&#10;    width: 100%;&#10;}&#10;&#10;.secondary-btn:hover {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.primary-btn {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;    border: none;&#10;    padding: var(--spacing-md) var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;    font-size: var(--font-size-base);&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: all var(--transition-base);&#10;}&#10;&#10;.primary-btn:hover {&#10;    background: var(--primary-purple);&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.welcome-message-compact {&#10;    padding: var(--spacing-md);&#10;    text-align: center;&#10;    background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);&#10;    border-radius: var(--border-radius-lg);&#10;    box-shadow: var(--shadow-sm);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.welcome-content-compact h2 {&#10;    color: var(--primary-blue);&#10;    font-size: var(--font-size-xl);&#10;    margin-bottom: var(--spacing-xs);&#10;}&#10;&#10;.welcome-content-compact p {&#10;    color: var(--dark-gray);&#10;    font-size: var(--font-size-sm);&#10;}&#10;&#10;.route-metrics {&#10;    display: grid;&#10;    grid-template-columns: repeat(4, 1fr);&#10;    gap: var(--spacing-md);&#10;    margin-bottom: var(--spacing-lg);&#10;}&#10;&#10;.metric-card {&#10;    background: linear-gradient(135deg, var(--light-gray) 0%, var(--medium-gray) 100%);&#10;    border-radius: var(--border-radius-md);&#10;    padding: var(--spacing-md);&#10;    text-align: center;&#10;    border: 2px solid transparent;&#10;    transition: all var(--transition-base);&#10;    min-height: 80px;&#10;    display: flex;&#10;    flex-direction: column;&#10;    justify-content: center;&#10;}&#10;&#10;.metric-card:hover {&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;    border-color: var(--primary-blue);&#10;}&#10;&#10;.metric-icon {&#10;    font-size: var(--font-size-xl);&#10;    margin-bottom: var(--spacing-xs);&#10;}&#10;&#10;.metric-value {&#10;    font-size: var(--font-size-lg);&#10;    font-weight: bold;&#10;    color: var(--primary-blue);&#10;    line-height: 1.2;&#10;}&#10;&#10;.metric-label {&#10;    font-size: var(--font-size-xs);&#10;    color: var(--dark-gray);&#10;    text-transform: uppercase;&#10;    letter-spacing: 0.5px;&#10;    margin-top: var(--spacing-xs);&#10;}&#10;&#10;.metric-card.accessibility.excellent {&#10;    background: rgba(76, 175, 80, 0.1);&#10;    border-left: 4px solid var(--success-green);&#10;}&#10;&#10;.metric-card.accessibility.good {&#10;    background: rgba(139, 195, 74, 0.1);&#10;    border-left: 4px solid #8bc34a;&#10;}&#10;&#10;.metric-card.accessibility.fair {&#10;    background: rgba(255, 152, 0, 0.1);&#10;    border-left: 4px solid var(--warning-orange);&#10;}&#10;&#10;.metric-card.accessibility.poor {&#10;    background: rgba(244, 67, 54, 0.1);&#10;    border-left: 4px solid var(--error-red);&#10;}&#10;&#10;.route-results {&#10;    padding: 0;&#10;}&#10;&#10;.route-header {&#10;    margin-bottom: var(--spacing-lg);&#10;    padding-bottom: var(--spacing-md);&#10;    border-bottom: 2px solid var(--light-gray);&#10;}&#10;&#10;.route-title {&#10;    color: var(--primary-blue);&#10;    font-size: var(--font-size-lg);&#10;    margin: 0;&#10;}&#10;&#10;.route-actions {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    margin-top: var(--spacing-lg);&#10;    padding-top: var(--spacing-md);&#10;    border-top: 1px solid var(--light-gray);&#10;}&#10;&#10;.route-actions .primary-btn,&#10;.route-actions .secondary-btn {&#10;    flex: 1;&#10;    padding: var(--spacing-md);&#10;    font-size: var(--font-size-sm);&#10;}&#10;&#10;.map-controls {&#10;    position: absolute;&#10;    top: 15px;&#10;    right: 15px;&#10;    z-index: 1000;&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.map-toggle-group,&#10;.map-action-group {&#10;    display: flex;&#10;    background: rgba(255, 255, 255, 0.95);&#10;    border-radius: var(--border-radius-md);&#10;    box-shadow: var(--shadow-md);&#10;    overflow: hidden;&#10;}&#10;&#10;.map-toggle-btn,&#10;.map-action-btn {&#10;    background: transparent;&#10;    border: none;&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    cursor: pointer;&#10;    font-size: var(--font-size-lg);&#10;    transition: all var(--transition-fast);&#10;    border-right: 1px solid var(--medium-gray);&#10;}&#10;&#10;.map-toggle-btn:last-child,&#10;.map-action-btn:last-child {&#10;    border-right: none;&#10;}&#10;&#10;.map-toggle-btn:hover,&#10;.map-action-btn:hover {&#10;    background: var(--light-gray);&#10;}&#10;&#10;.map-toggle-btn.active {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;}&#10;&#10;.leaflet-container {&#10;    height: 100% !important;&#10;    width: 100% !important;&#10;    border-radius: var(--border-radius-lg);&#10;    font-family: var(--font-family);&#10;}&#10;&#10;.leaflet-control-container .leaflet-control {&#10;    font-family: var(--font-family);&#10;}&#10;&#10;.leaflet-control-zoom {&#10;    border: none !important;&#10;    box-shadow: var(--shadow-md) !important;&#10;}&#10;&#10;.leaflet-control-zoom a {&#10;    background-color: var(--white) !important;&#10;    border: 1px solid rgba(0,0,0,0.1) !important;&#10;    color: var(--black) !important;&#10;    font-size: 18px !important;&#10;    font-weight: bold !important;&#10;}&#10;&#10;.leaflet-control-zoom a:hover {&#10;    background-color: var(--light-gray) !important;&#10;    color: var(--primary-blue) !important;&#10;}&#10;&#10;.leaflet-popup-content-wrapper {&#10;    border-radius: var(--border-radius-md) !important;&#10;    box-shadow: var(--shadow-md) !important;&#10;}&#10;&#10;.leaflet-popup-content {&#10;    margin: var(--spacing-md) !important;&#10;    line-height: 1.5 !important;&#10;    font-family: var(--font-family) !important;&#10;}&#10;&#10;.routing-method-info {&#10;    background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);&#10;    border-radius: var(--border-radius-lg);&#10;    padding: var(--spacing-lg);&#10;    margin-bottom: var(--spacing-lg);&#10;    border-left: 4px solid var(--primary-blue);&#10;}&#10;&#10;.routing-method-info.road-network {&#10;    border-left-color: var(--success-green);&#10;    background: linear-gradient(135deg, #f0fff4 0%, #e6ffed 100%);&#10;}&#10;&#10;.routing-method-info.grid-network {&#10;    border-left-color: var(--info-blue);&#10;    background: linear-gradient(135deg, #e3f2fd 0%, #e1f5fe 100%);&#10;}&#10;&#10;.routing-method-info.grid-aligned {&#10;    border-left-color: var(--warning-orange);&#10;    background: linear-gradient(135deg, #fff8e1 0%, #fffde7 100%);&#10;}&#10;&#10;.routing-method-info h4 {&#10;    color: var(--primary-blue);&#10;    margin-bottom: var(--spacing-sm);&#10;    font-size: var(--font-size-lg);&#10;}&#10;&#10;.routing-method-info.road-network h4 {&#10;    color: var(--success-green);&#10;}&#10;&#10;.routing-method-info.grid-network h4 {&#10;    color: var(--info-blue);&#10;}&#10;&#10;.routing-method-info.grid-aligned h4 {&#10;    color: var(--warning-orange);&#10;}&#10;&#10;.routing-method-info p {&#10;    color: var(--darker-gray);&#10;    margin-bottom: var(--spacing-md);&#10;    line-height: 1.6;&#10;}&#10;&#10;.routing-details {&#10;    margin-top: var(--spacing-md);&#10;}&#10;&#10;.routing-feature {&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.routing-feature strong {&#10;    color: var(--darker-gray);&#10;    display: block;&#10;    margin-bottom: var(--spacing-xs);&#10;}&#10;&#10;.feature-tags {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-xs);&#10;    margin-top: var(--spacing-xs);&#10;}&#10;&#10;.feature-tag {&#10;    background: var(--primary-blue);&#10;    color: var(--white);&#10;    padding: var(--spacing-xs) var(--spacing-sm);&#10;    border-radius: var(--border-radius-sm);&#10;    font-size: var(--font-size-xs);&#10;    font-weight: 500;&#10;}&#10;&#10;.feature-tag.road-type {&#10;    background: var(--success-green);&#10;}&#10;&#10;.feature-tag.surface-type {&#10;    background: var(--info-blue);&#10;}&#10;&#10;.routing-benefits {&#10;    margin-top: var(--spacing-md);&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.benefit-item {&#10;    padding: var(--spacing-sm);&#10;    background: rgba(255, 255, 255, 0.6);&#10;    border-radius: var(--border-radius-sm);&#10;    font-size: var(--font-size-sm);&#10;    border: 1px solid rgba(0, 0, 0, 0.1);&#10;}&#10;&#10;.notifications-container {&#10;    position: fixed;&#10;    top: 80px;&#10;    right: 20px;&#10;    z-index: 10000;&#10;    max-width: 400px;&#10;}&#10;&#10;.route-notification {&#10;    background: var(--white);&#10;    border-radius: var(--border-radius-md);&#10;    box-shadow: var(--shadow-lg);&#10;    margin-bottom: var(--spacing-sm);&#10;    overflow: hidden;&#10;    border-left: 4px solid var(--primary-blue);&#10;    animation: slideIn 0.3s ease;&#10;}&#10;&#10;.route-notification.notification-success {&#10;    border-left-color: var(--success-green);&#10;}&#10;&#10;.route-notification.notification-warning {&#10;    border-left-color: var(--warning-orange);&#10;}&#10;&#10;.route-notification.notification-info {&#10;    border-left-color: var(--info-blue);&#10;}&#10;&#10;.notification-content {&#10;    display: flex;&#10;    align-items: center;&#10;    padding: var(--spacing-md);&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.notification-icon {&#10;    font-size: var(--font-size-lg);&#10;    flex-shrink: 0;&#10;}&#10;&#10;.notification-message {&#10;    flex: 1;&#10;    font-size: var(--font-size-sm);&#10;    color: var(--darker-gray);&#10;    line-height: 1.4;&#10;}&#10;&#10;.notification-close {&#10;    background: none;&#10;    border: none;&#10;    font-size: var(--font-size-lg);&#10;    color: var(--dark-gray);&#10;    cursor: pointer;&#10;    padding: 0;&#10;    width: 24px;&#10;    height: 24px;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    border-radius: 50%;&#10;    transition: all var(--transition-fast);&#10;}&#10;&#10;.notification-close:hover {&#10;    background: var(--light-gray);&#10;    color: var(--darker-gray);&#10;}&#10;&#10;.modal {&#10;    position: fixed;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: rgba(0, 0, 0, 0.5);&#10;    display: flex;&#10;    justify-content: center;&#10;    align-items: center;&#10;    z-index: 1000;&#10;    backdrop-filter: blur(5px);&#10;}&#10;&#10;.modal-content {&#10;    background: var(--white);&#10;    border-radius: var(--border-radius-xl);&#10;    box-shadow: var(--shadow-xl);&#10;    max-width: 500px;&#10;    width: 90%;&#10;    max-height: 90vh;&#10;    overflow-y: auto;&#10;}&#10;&#10;.modal-content.large {&#10;    max-width: 800px;&#10;}&#10;&#10;.modal-header {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--spacing-xl);&#10;    border-bottom: 2px solid var(--light-gray);&#10;}&#10;&#10;.modal-header h3 {&#10;    color: var(--primary-blue);&#10;    font-size: var(--font-size-xl);&#10;    margin: 0;&#10;}&#10;&#10;.close-btn {&#10;    background: none;&#10;    border: none;&#10;    font-size: var(--font-size-xxl);&#10;    cursor: pointer;&#10;    color: var(--dark-gray);&#10;    transition: color var(--transition-base);&#10;}&#10;&#10;.close-btn:hover {&#10;    color: var(--error-red);&#10;}&#10;&#10;.modal-body {&#10;    padding: var(--spacing-xl);&#10;}&#10;&#10;.modal-actions {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    justify-content: flex-end;&#10;    margin-top: var(--spacing-xl);&#10;}&#10;&#10;.navigation-modal .modal-content {&#10;    max-width: 600px;&#10;}&#10;&#10;.navigation-info {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-lg);&#10;}&#10;&#10;.current-instruction {&#10;    background: var(--light-gray);&#10;    padding: var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;    border-left: 4px solid var(--primary-blue);&#10;}&#10;&#10;.current-instruction h4 {&#10;    color: var(--primary-blue);&#10;    margin-bottom: var(--spacing-sm);&#10;    font-size: var(--font-size-lg);&#10;}&#10;&#10;.current-instruction p {&#10;    font-size: var(--font-size-lg);&#10;    color: var(--darker-gray);&#10;    margin: 0;&#10;}&#10;&#10;.navigation-progress {&#10;    text-align: center;&#10;}&#10;&#10;.progress-bar {&#10;    width: 100%;&#10;    height: 8px;&#10;    background: var(--medium-gray);&#10;    border-radius: 4px;&#10;    overflow: hidden;&#10;    margin-bottom: var(--spacing-sm);&#10;}&#10;&#10;.progress-fill {&#10;    height: 100%;&#10;    background: linear-gradient(90deg, var(--primary-blue), var(--primary-purple));&#10;    transition: width var(--transition-base);&#10;}&#10;&#10;.navigation-controls {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    justify-content: center;&#10;}&#10;&#10;.route-summary {&#10;    background: var(--light-gray);&#10;    padding: var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;}&#10;&#10;.route-summary p {&#10;    margin: var(--spacing-xs) 0;&#10;    color: var(--darker-gray);&#10;}&#10;&#10;.alternatives-modal .modal-content {&#10;    max-width: 700px;&#10;}&#10;&#10;.alternatives-list {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-lg);&#10;}&#10;&#10;.alternative-route {&#10;    border: 2px solid var(--medium-gray);&#10;    border-radius: var(--border-radius-md);&#10;    padding: var(--spacing-lg);&#10;    transition: all var(--transition-base);&#10;}&#10;&#10;.alternative-route:hover {&#10;    border-color: var(--primary-blue);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.alternative-route.current-route {&#10;    border-color: var(--success-green);&#10;    background: rgba(76, 175, 80, 0.05);&#10;}&#10;&#10;.alternative-route h4 {&#10;    color: var(--primary-blue);&#10;    margin-bottom: var(--spacing-md);&#10;    font-size: var(--font-size-lg);&#10;}&#10;&#10;.alternative-route.current-route h4 {&#10;    color: var(--success-green);&#10;}&#10;&#10;.route-details {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));&#10;    gap: var(--spacing-sm);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.route-details p {&#10;    margin: 0;&#10;    color: var(--darker-gray);&#10;    font-size: var(--font-size-sm);&#10;}&#10;&#10;.route-features {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-sm);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.feature-tag {&#10;    background: var(--info-blue);&#10;    color: var(--white);&#10;    padding: var(--spacing-xs) var(--spacing-sm);&#10;    border-radius: var(--border-radius-sm);&#10;    font-size: var(--font-size-xs);&#10;    font-weight: 500;&#10;}&#10;&#10;.current-route .feature-tag {&#10;    background: var(--success-green);&#10;}&#10;&#10;.current-position-marker {&#10;    animation: pulse 2s infinite;&#10;}&#10;&#10;@keyframes pulse {&#10;    0% {&#10;        transform: scale(1);&#10;    }&#10;    50% {&#10;        transform: scale(1.1);&#10;    }&#10;    100% {&#10;        transform: scale(1);&#10;    }&#10;}&#10;&#10;.notifications-container {&#10;    position: fixed;&#10;    top: 20px;&#10;    right: 20px;&#10;    z-index: 10000;&#10;    max-width: 400px;&#10;}&#10;&#10;.route-notification {&#10;    background: var(--white);&#10;    border-radius: var(--border-radius-md);&#10;    box-shadow: var(--shadow-md);&#10;    margin-bottom: var(--spacing-sm);&#10;    animation: slideIn 0.3s ease-out;&#10;}&#10;&#10;.route-notification.notification-success {&#10;    border-left: 4px solid var(--success-green);&#10;}&#10;&#10;.route-notification.notification-warning {&#10;    border-left: 4px solid var(--warning-orange);&#10;}&#10;&#10;.route-notification.notification-info {&#10;    border-left: 4px solid var(--info-blue);&#10;}&#10;&#10;.notification-content {&#10;    display: flex;&#10;    align-items: center;&#10;    padding: var(--spacing-md);&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.notification-icon {&#10;    font-size: var(--font-size-lg);&#10;    flex-shrink: 0;&#10;}&#10;&#10;.notification-message {&#10;    flex: 1;&#10;    color: var(--darker-gray);&#10;    font-size: var(--font-size-sm);&#10;}&#10;&#10;.notification-close {&#10;    background: none;&#10;    border: none;&#10;    font-size: var(--font-size-lg);&#10;    cursor: pointer;&#10;    color: var(--dark-gray);&#10;    padding: 0;&#10;    width: 24px;&#10;    height: 24px;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    border-radius: 50%;&#10;    transition: all var(--transition-fast);&#10;}&#10;&#10;@keyframes slideIn {&#10;    from {&#10;        transform: translateX(100%);&#10;        opacity: 0;&#10;    }&#10;    to {&#10;        transform: translateX(0);&#10;        opacity: 1;&#10;    }&#10;}&#10;&#10;@media (max-width: 1400px) {&#10;    .sidebar {&#10;        width: 400px;&#10;        min-width: 400px;&#10;    }&#10;}&#10;&#10;@media (max-width: 1200px) {&#10;    .sidebar {&#10;        width: 380px;&#10;        min-width: 380px;&#10;    }&#10;    &#10;    .demo-buttons {&#10;        grid-template-columns: 1fr;&#10;    }&#10;}&#10;&#10;@media (max-width: 1024px) {&#10;    .main-content {&#10;        flex-direction: column;&#10;        height: auto;&#10;        padding: var(--spacing-md);&#10;    }&#10;    &#10;    .sidebar {&#10;        width: 100%;&#10;        min-width: unset;&#10;        height: auto;&#10;        max-height: none;&#10;    }&#10;    &#10;    .results-area {&#10;        width: 100%;&#10;        height: 800px;&#10;    }&#10;    &#10;    .map-display-area {&#10;        min-height: 400px;&#10;    }&#10;    &#10;    .route-results-panel {&#10;        height: 350px;&#10;    }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .header-content {&#10;        padding: var(--spacing-sm) var(--spacing-md);&#10;    }&#10;    &#10;    .app-title {&#10;        font-size: var(--font-size-xl) !important;&#10;    }&#10;    &#10;    .coordinate-inputs {&#10;        grid-template-columns: 1fr;&#10;    }&#10;    &#10;    .demo-buttons {&#10;        grid-template-columns: 1fr;&#10;    }&#10;    &#10;    .route-metrics {&#10;        grid-template-columns: 1fr 1fr;&#10;    }&#10;    &#10;    .modal-content {&#10;        width: 95%;&#10;        margin: var(--spacing-lg);&#10;    }&#10;}&#10;&#10;/* Focus styles for accessibility */&#10;*:focus {&#10;    outline: 3px solid var(--primary-blue);&#10;    outline-offset: 2px;&#10;}&#10;&#10;/* Screen reader only */&#10;.sr-only {&#10;    position: absolute;&#10;    width: 1px;&#10;    height: 1px;&#10;    padding: 0;&#10;    margin: -1px;&#10;    overflow: hidden;&#10;    clip: rect(0, 0, 0, 0);&#10;    white-space: nowrap;&#10;    border: 0;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>